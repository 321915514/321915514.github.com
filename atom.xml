<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>philxling</title>
  <icon>https://www.gravatar.com/avatar/295a5284129a41f836e900ffd2bcd96b</icon>
  <subtitle>Sometimes,Nowhere means &quot;Now&quot;&quot;Here&quot;</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://philxling.cn/"/>
  <updated>2020-03-15T05:40:56.537Z</updated>
  <id>http://philxling.cn/</id>
  
  <author>
    <name>philxling</name>
    <email>321915514wx@gmail.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>python爬虫基础</title>
    <link href="http://philxling.cn/2020/03/09/python%E7%88%AC%E8%99%AB/"/>
    <id>http://philxling.cn/2020/03/09/python%E7%88%AC%E8%99%AB/</id>
    <published>2020-03-09T05:32:43.000Z</published>
    <updated>2020-03-15T05:40:56.537Z</updated>
    
    <content type="html"><![CDATA[<p>##python爬虫基础</p><p>urllib库,url库含有四个模块</p><ul><li>request 是最基本的请求方式,error是异常处理信息,parse是解析的工具类,你可以将没有编码的url放在parse工具中编码和解码,robotparser主要是用来识别网站的 robots.txt 文件.</li></ul><p>例: </p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request<span class="comment">#导入库</span></span><br><span class="line">response=request.urlopen(<span class="string">'http://www.baidu.com'</span>)<span class="comment">#请求baidu.com</span></span><br><span class="line">print(response.read())</span><br><span class="line">&lt;!--more--&gt;</span><br><span class="line">request.urlretrieve(<span class="string">'http://www.baidu.com'</span>,<span class="string">'baidu.html'</span>)</span><br><span class="line"><span class="comment">#将百度的网页下载到本地baidu.html</span></span><br><span class="line"><span class="comment">#urlencode用法</span></span><br><span class="line"><span class="comment">#https://www.baidu.com/s?wd=hello&amp;rsv_spt=1&amp;rsv_iqid=0xc249d2880001381f&amp;issp=1&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=2&amp;ie=utf-8&amp;tn=baiduhome_pg&amp;rsv_enter=1&amp;rsv_dl=tb&amp;rsv_sug3=6&amp;rsv_sug1=5&amp;rsv_sug7=101&amp;rsv_sug2=0&amp;inputT=1310&amp;rsv_sug4=2416</span></span><br><span class="line"><span class="comment">#将参数为中文的字符转换为浏览器能够识别的字符</span></span><br><span class="line">data=&#123;<span class="string">'wd'</span>:<span class="string">'你好'</span>,<span class="string">'age'</span>:<span class="number">12</span>,<span class="string">'gender'</span>:<span class="string">'男'</span>&#125;</span><br><span class="line">data=parse.urlencode(data)</span><br><span class="line">print(data)</span><br><span class="line"><span class="comment">#wd=%E4%BD%A0%E5%A5%BD&amp;age=12&amp;gender=%E7%94%B7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#例</span></span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request<span class="comment">#导入库</span></span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse<span class="comment">#用于编码</span></span><br><span class="line">data=&#123;<span class="string">'wd'</span>:<span class="string">'你好'</span>&#125;</span><br><span class="line">data=parse.urlencode(data)</span><br><span class="line">response=request.urlopen(<span class="string">'http://www.baidu.com/s?'</span>+data)<span class="comment">#请求baidu.com</span></span><br><span class="line">print(response.read())</span><br><span class="line"></span><br><span class="line"><span class="comment">#解码</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#parse_qs()解码</span></span><br><span class="line">data=parse.parse_qs(data)</span><br><span class="line"><span class="comment">#url='http://www.baidu.com/s?'+data</span></span><br><span class="line">print(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlparse和urlsplit</span><br><span class="line"><span class="comment">#urlparse将url地址进行分割</span></span><br><span class="line"><span class="comment">#例</span></span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line">url=<span class="string">'http://www.baidu.com/s?wd=hello&amp;username=123#12'</span></span><br><span class="line">print(parse.urlparse(url))</span><br><span class="line"></span><br><span class="line"><span class="comment">#ParseResult(scheme='http', netloc='www.baidu.com', path='/s', params='', query='wd=hello&amp;username=123', fragment='12')</span></span><br><span class="line">print(parse.urlparse(url).scheme)</span><br><span class="line">print(parse.urlparse(url).netloc)</span><br><span class="line">print(parse.urlsplit(url))</span><br><span class="line"><span class="comment">#SplitResult(scheme='http', netloc='www.baidu.com', path='/s', query='wd=hello&amp;username=123', fragment='12')</span></span><br><span class="line"><span class="comment">#前者多了一个params参数</span></span><br></pre></td></tr></table></figure><p>Request类</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line">url=<span class="string">'https://www.lagou.com/jobs/list_python?labelWords=&amp;fromSearch=true&amp;suginput='</span></span><br><span class="line"></span><br><span class="line">headers=&#123;<span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36'</span>&#125;</span><br><span class="line">req=request.Request(url,headers=headers)</span><br><span class="line"></span><br><span class="line">print(request.urlopen(req).read())</span><br><span class="line"></span><br><span class="line"><span class="comment">#Request()参数</span></span><br></pre></td></tr></table></figure><p>代理设置</p><p>ProxyHandler处理器(代理设置)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line">url=<span class="string">'https://httpbin.org/ip'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(request.urlopen(url).read())</span></span><br><span class="line"><span class="comment">#没有使用代理</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用代理</span></span><br><span class="line"></span><br><span class="line">handler=request.ProxyHandler(&#123;<span class="string">'http'</span>:<span class="string">'112.84.55.122:9999'</span>&#125;)</span><br><span class="line"></span><br><span class="line">openner=request.build_opener(handler)</span><br><span class="line"></span><br><span class="line">res=openner.open(url)</span><br><span class="line"></span><br><span class="line">print(res.read())</span><br></pre></td></tr></table></figure><p>http.cookiejar保存cookie</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">from</span> http.cookiejar <span class="keyword">import</span> MozillaCookieJar</span><br><span class="line"><span class="comment">#保存cookie信息</span></span><br><span class="line">cookieJar = MozillaCookieJar(<span class="string">'cookie.txt'</span>)</span><br><span class="line"><span class="comment">#加载cookie</span></span><br><span class="line">cookieJar.load(ignore_discard=<span class="literal">True</span>)</span><br><span class="line">handler = request.HTTPCookieProcessor(cookieJar)</span><br><span class="line">opener = request.build_opener(handler)</span><br><span class="line">resp = opener.open(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line">cookieJar.save(ignore_discard=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#打印cookie信息</span></span><br><span class="line"><span class="keyword">for</span> cookie <span class="keyword">in</span> cookieJar:</span><br><span class="line">    print(cookie)</span><br></pre></td></tr></table></figure><p>requests库</p><p>requests发送get请求</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">params = &#123;<span class="string">'wd'</span>: <span class="string">'中国'</span>, <span class="string">'ie'</span>: <span class="string">'utf-8'</span>,</span><br><span class="line"><span class="string">'f'</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">'rsv_bp'</span>: <span class="number">1</span>,</span><br><span class="line"><span class="string">'rsv_idx'</span>: <span class="number">2</span>,</span><br><span class="line"><span class="string">'tn'</span>: <span class="string">'baiduhome_pg'</span>,</span><br><span class="line"><span class="string">'rsv_spt'</span>: <span class="number">1</span>,</span><br><span class="line"><span class="string">'oq'</span>: <span class="number">100</span>,</span><br><span class="line"><span class="string">'rsv_pq'</span>: <span class="number">9282010e00005646</span>,</span><br><span class="line"><span class="string">'rsv_t'</span>: <span class="string">'65b6ZN8IJiXpluNcz/pIQxWDy8QWRjCXH7ym3yqE583HxR32Ytg75ZGh3MGjaslBNJxC'</span>,</span><br><span class="line"><span class="string">'rqlang'</span>: <span class="string">'cn'</span>,</span><br><span class="line"><span class="string">'rsv_enter'</span>: <span class="number">1</span>,</span><br><span class="line"><span class="string">'rsv_dl'</span>: <span class="string">'ts_0'</span>,</span><br><span class="line"><span class="string">'rsv_sug3'</span>: <span class="number">9</span>,</span><br><span class="line"><span class="string">'rsv_sug1'</span>: <span class="number">10</span>,</span><br><span class="line"><span class="string">'rsv_sug7'</span>: <span class="number">101</span>,</span><br><span class="line"><span class="string">'rsv_sug2'</span>: <span class="number">1</span>,</span><br><span class="line"><span class="string">'prefixsug'</span>: <span class="string">'zhongu'</span>,</span><br><span class="line"><span class="string">'rsp'</span>: <span class="number">0</span>,</span><br><span class="line"><span class="string">'inputT'</span>: <span class="number">4623</span>&#125;</span><br><span class="line">headers = &#123;<span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                         <span class="string">'Chrome/76.0.3809.100 Safari/537.36'</span>&#125;</span><br><span class="line">response = requests.get(<span class="string">'http://www.baidu.com/s'</span>, params=params, headers=headers)</span><br><span class="line"><span class="comment"># print(type(response.text)) #str类型 手动解码 </span></span><br><span class="line"><span class="comment"># print(type(response.content))# bytes类型 一般采用response.content.decode('utf-8')</span></span><br><span class="line">print(response.url)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'baidu.html'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> fp:<span class="comment">#将页面写在baidu.html上</span></span><br><span class="line">    fp.write(response.content.decode(<span class="string">'utf-8'</span>))</span><br><span class="line">print(response.content.decode(<span class="string">'utf-8'</span>))</span><br><span class="line"><span class="comment"># print(response.status_code)</span></span><br></pre></td></tr></table></figure><p>发送post请求</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'first'</span>: <span class="string">'true'</span>,</span><br><span class="line">    <span class="string">'pn'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'kd'</span>: <span class="string">'python'</span></span><br><span class="line">&#125;</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                         <span class="string">'Chrome/76.0.3809.100 Safari/537.36'</span>,</span><br><span class="line">    <span class="string">'Referer'</span>: <span class="string">'https://www.lagou.com/jobs/list_python?labelWords=&amp;fromSearch=true&amp;suginput='</span>,</span><br><span class="line">    <span class="string">'Host'</span>: <span class="string">'www.lagou.com'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 使用代理</span></span><br><span class="line"><span class="comment"># proxy=&#123;</span></span><br><span class="line"><span class="comment">#     'http':'27.43.190.11:9999'</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br><span class="line">response = requests.post(<span class="string">'https://www.lagou.com/jobs/positionAjax.json?needAddtionalResult=false'</span>, data=data, headers=headers) <span class="comment">#proxies=proxy)</span></span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><p>requests的cookie保存</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">resp = requests.get(<span class="string">'http://www.baidu.com'</span>)</span><br><span class="line">print(resp.cookies.get_dict())</span><br></pre></td></tr></table></figure><p>session 利用session保存信息并访问</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">session=requests.session()<span class="comment">#创建会话</span></span><br><span class="line">session.post(url,data,headers)<span class="comment">#登录</span></span><br><span class="line">res=session.get(url)<span class="comment">#访问页面</span></span><br><span class="line">print(res.text)</span><br></pre></td></tr></table></figure><p>数据的提取</p><p>XPath和lxml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1 &#x2F;AAA&#x2F;DD&#x2F;BBB 表示aaa下的dd下的bbb元素</span><br><span class="line">2 &#x2F;&#x2F;aaa 选择所有的aaa元素</span><br><span class="line">3 &#x2F;&#x2F;aaa&#x2F;bbb 所有的aaa下的所有bbb元素</span><br><span class="line">4 &#x2F;* 表示所有</span><br><span class="line">5 bbb[1] 表示bbb第一个元素</span><br><span class="line">6 bbb[@id] 只要bbb上有id属性，都能得到</span><br><span class="line">7 bbb[@id&#x3D;&#39;b1&#39;] 元素是bbb，上有id属性，并且属性的值为b1</span><br><span class="line">在某个标签下执行xpath在这个标签加.</span><br><span class="line">即 trs&#x3D;html.xpath(&#39;&#x2F;&#x2F;tr&#39;)</span><br><span class="line">   for i in trs:</span><br><span class="line">   harf&#x3D;i.xpath(&#39;.&#x2F;&#x2F;a&#x2F;@href&#39;)</span><br><span class="line">   </span><br><span class="line">获取文本是text()即&#x2F;&#x2F;a&#x2F;text()</span><br></pre></td></tr></table></figure><p>使用lxml解析html</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line">text = <span class="string">'''</span></span><br><span class="line"><span class="string">&lt;ul class="r_company_con"&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/9251.html"&gt;美柚&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/1373.html"&gt;喜马拉雅fm&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/14229.html"&gt;微盟&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/49369.html"&gt;淘粉吧&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/107435.html"&gt;熊猫TV&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/2768.html"&gt;易到用车&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/40738.html"&gt;小红唇&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/97631.html"&gt;汽车超人&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/109.html"&gt;蚂蜂窝&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/36996.html"&gt;三好网&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/4760.html"&gt;唯品会&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/1686.html"&gt;爱奇艺&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/23014.html"&gt;快法务&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/1575.html"&gt;百度招聘&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/81491.html"&gt;蚂蚁金服&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/62.html"&gt;今日头条&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/2474.html"&gt;滴滴&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/20909.html"&gt;AcFun&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/23489.html"&gt;点点客&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/59251.html"&gt;映客&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class="r_search_item"&gt;&lt;a href="https://www.lagou.com/gongsi/3712.html"&gt;京东&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;   </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_text</span><span class="params">()</span>:</span></span><br><span class="line">    htmlElement = etree.HTML(text)  <span class="comment"># 对象</span></span><br><span class="line">    print(etree.tostring(htmlElement, encoding=<span class="string">'utf-8'</span>).decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_file</span><span class="params">()</span>:</span></span><br><span class="line">    parser=etree.HTMLParser(encoding=<span class="string">'utf-8'</span>) <span class="comment"># 解析器</span></span><br><span class="line">    htmlElement = etree.parse(<span class="string">"lagou.html"</span>, parser=parser)</span><br><span class="line">    print(etree.tostring(htmlElement, encoding=<span class="string">'utf-8'</span>).decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    parse_file()</span><br><span class="line">//解析html的代码有两种,一种是解析字符串类型的html代码直接使用etree.HTML(字符串)一种是解析html文件</span><br><span class="line">使用parser=etree.HTMLParser(encoding=<span class="string">'utf-8'</span>)  htmlElement = etree.parse(<span class="string">"lagou.html"</span>, parser=parser)解析</span><br><span class="line">如果有不规范的html代码就要自定义解析器parser=etree.HTMLParser(encoding=<span class="string">'utf-8'</span>)</span><br></pre></td></tr></table></figure><p>爬取电影天堂案例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> xlwt</span><br><span class="line">DOMAIN = <span class="string">'https://www.dytt8.net'</span></span><br><span class="line">HEADERS = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                  <span class="string">'Chrome/76.0.3809.100 Safari/537.36'</span>&#125;</span><br><span class="line"></span><br><span class="line">movies = []</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_details</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">8</span>):</span><br><span class="line">        url = <span class="string">'https://www.dytt8.net/html/gndy/dyzz/list_23_'</span> + str(i) + <span class="string">'.html'</span></span><br><span class="line">        response = requests.get(url, headers=HEADERS)</span><br><span class="line">        text = response.text</span><br><span class="line">        html = etree.HTML(text)</span><br><span class="line">        detail_urls = html.xpath(<span class="string">"//table[@class='tbspan']//a/@href"</span>)</span><br><span class="line">        <span class="keyword">for</span> detail_url <span class="keyword">in</span> detail_urls:</span><br><span class="line">            movie = parse_detail(DOMAIN + detail_url)</span><br><span class="line">            movies.append(movie)</span><br><span class="line">            <span class="comment"># pf = pd.DataFrame(list(movie))</span></span><br><span class="line">            <span class="comment">#             # print(pf)</span></span><br><span class="line">            <span class="comment"># columns_map = &#123;</span></span><br><span class="line">            <span class="comment">#     'title': '名称',</span></span><br><span class="line">            <span class="comment">#     'cover': '封面',</span></span><br><span class="line">            <span class="comment">#     'year': '年份',</span></span><br><span class="line">            <span class="comment">#     'country': '国家',</span></span><br><span class="line">            <span class="comment">#     'category': '分类',</span></span><br><span class="line">            <span class="comment">#     'douban_rating': '豆瓣评分',</span></span><br><span class="line">            <span class="comment">#     'size': '分辨率',</span></span><br><span class="line">            <span class="comment">#     'actors': '演员',</span></span><br><span class="line">            <span class="comment">#     'director': '导演',</span></span><br><span class="line">            <span class="comment">#     'label': '标签',</span></span><br><span class="line">            <span class="comment">#     'download_url': '下载地址',</span></span><br><span class="line">            <span class="comment">#     'profile': '简介'&#125;</span></span><br><span class="line">            <span class="comment"># pf.rename(columns=columns_map, inplace=True)</span></span><br><span class="line">            <span class="comment"># pf.fillna(' ', inplace=True)</span></span><br><span class="line">            <span class="comment"># pf.to_excel('d:/my.xlsx', encoding='utf-8', index=False)</span></span><br><span class="line">            <span class="comment"># data = movie</span></span><br><span class="line">            <span class="comment"># data_df = pd.DataFrame(data)</span></span><br><span class="line">            <span class="comment"># data_df.index = range(1, 100)</span></span><br><span class="line">            <span class="comment"># writer = pd.ExcelWriter('my.xlsx')</span></span><br><span class="line">            <span class="comment"># data_df.to_excel(writer, float_format='%.5f')</span></span><br><span class="line">            <span class="comment"># writer.save()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_detail</span><span class="params">(url)</span>:</span></span><br><span class="line">    movie = &#123;&#125;</span><br><span class="line">    response = requests.get(url, headers=HEADERS)</span><br><span class="line">    text = response.content.decode(<span class="string">'gbk'</span>)</span><br><span class="line">    html = etree.HTML(text)</span><br><span class="line">    movie[<span class="string">'title'</span>] = html.xpath(<span class="string">"//div[@class='title_all']//font/text()"</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> len(html.xpath(<span class="string">"//div[@id='Zoom']//img/@src"</span>)):</span><br><span class="line">        movie[<span class="string">'cover'</span>] = html.xpath(<span class="string">"//div[@id='Zoom']//img/@src"</span>)[<span class="number">0</span>]</span><br><span class="line">    parse_movie_content(html, movie)  <span class="comment"># 解析content</span></span><br><span class="line">    movie_download_url = html.xpath(<span class="string">"//td[@bgcolor='#fdfddf']/a/@href"</span>)</span><br><span class="line">    movie[<span class="string">'download_url'</span>] = movie_download_url</span><br><span class="line">    <span class="keyword">return</span> movie</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_movie_content</span><span class="params">(html, movie)</span>:</span></span><br><span class="line">    movie_content = html.xpath(<span class="string">"//div[@id='Zoom']//p/text()"</span>)</span><br><span class="line">    <span class="keyword">for</span> index, info <span class="keyword">in</span> enumerate(movie_content):</span><br><span class="line">        <span class="keyword">if</span> info.startswith(<span class="string">"◎年　　代"</span>):</span><br><span class="line">            info = info.replace(<span class="string">"◎年　　代"</span>, <span class="string">""</span>).strip()</span><br><span class="line">            movie[<span class="string">'year'</span>] = info</span><br><span class="line">        <span class="keyword">if</span> info.startswith(<span class="string">"◎产　　地"</span>):</span><br><span class="line">            info = info.replace(<span class="string">"◎产　　地"</span>, <span class="string">""</span>).strip()</span><br><span class="line">            movie[<span class="string">'country'</span>] = info</span><br><span class="line">        <span class="keyword">if</span> info.startswith(<span class="string">"◎类　　别"</span>):</span><br><span class="line">            info = info.replace(<span class="string">"◎类　　别"</span>, <span class="string">""</span>).strip()</span><br><span class="line">            movie[<span class="string">'category'</span>] = info</span><br><span class="line">        <span class="keyword">if</span> info.startswith(<span class="string">"◎豆瓣评分"</span>):</span><br><span class="line">            info = info.replace(<span class="string">"◎豆瓣评分"</span>, <span class="string">""</span>).strip()</span><br><span class="line">            movie[<span class="string">'douban_rating'</span>] = info</span><br><span class="line">        <span class="keyword">if</span> info.startswith(<span class="string">"◎视频尺寸"</span>):</span><br><span class="line">            info = info.replace(<span class="string">"◎视频尺寸"</span>, <span class="string">""</span>).strip()</span><br><span class="line">            movie[<span class="string">'size'</span>] = info</span><br><span class="line">        <span class="keyword">if</span> info.startswith(<span class="string">'◎导　　演'</span>):</span><br><span class="line">            info = info.replace(<span class="string">"◎导　　演"</span>, <span class="string">""</span>).strip()</span><br><span class="line">            movie[<span class="string">"director"</span>] = info</span><br><span class="line">        <span class="keyword">if</span> info.startswith(<span class="string">'◎主　　演'</span>):</span><br><span class="line">            info = info.replace(<span class="string">"◎主　　演"</span>, <span class="string">""</span>).strip()</span><br><span class="line">            actors = [info]</span><br><span class="line">            <span class="keyword">for</span> actor <span class="keyword">in</span> range(index + <span class="number">1</span>, len(movie_content)):</span><br><span class="line">                <span class="keyword">if</span> movie_content[actor].startswith(<span class="string">"◎标　　签"</span>):</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                actors.append(movie_content[actor].strip())</span><br><span class="line">            movie[<span class="string">"actors"</span>] = actors</span><br><span class="line">        <span class="keyword">if</span> info.startswith(<span class="string">'◎标　　签'</span>):</span><br><span class="line">            info = info.replace(<span class="string">"◎标　　签"</span>, <span class="string">""</span>).strip()</span><br><span class="line">            movie[<span class="string">'label'</span>] = info</span><br><span class="line">        <span class="keyword">if</span> info.startswith(<span class="string">'◎简　　介'</span>):</span><br><span class="line">            info = movie_content[index + <span class="number">1</span>].strip()</span><br><span class="line">            movie[<span class="string">"profile"</span>] = info</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    get_details()</span><br><span class="line">    pf = pd.DataFrame(list(movies))</span><br><span class="line">    columns_map = &#123;</span><br><span class="line">        <span class="string">'title'</span>: <span class="string">'名称'</span>,</span><br><span class="line">        <span class="string">'cover'</span>: <span class="string">'封面'</span>,</span><br><span class="line">        <span class="string">'year'</span>: <span class="string">'年份'</span>,</span><br><span class="line">        <span class="string">'country'</span>: <span class="string">'国家'</span>,</span><br><span class="line">        <span class="string">'category'</span>: <span class="string">'分类'</span>,</span><br><span class="line">        <span class="string">'douban_rating'</span>: <span class="string">'豆瓣评分'</span>,</span><br><span class="line">        <span class="string">'size'</span>: <span class="string">'分辨率'</span>,</span><br><span class="line">        <span class="string">'actors'</span>: <span class="string">'演员'</span>,</span><br><span class="line">        <span class="string">'director'</span>: <span class="string">'导演'</span>,</span><br><span class="line">        <span class="string">'label'</span>: <span class="string">'标签'</span>,</span><br><span class="line">        <span class="string">'download_url'</span>: <span class="string">'下载地址'</span>,</span><br><span class="line">        <span class="string">'profile'</span>: <span class="string">'简介'</span>&#125;</span><br><span class="line">    pf.rename(columns=columns_map, inplace=<span class="literal">True</span>)</span><br><span class="line">    pf.to_excel(<span class="string">'D:/my.xlsx'</span>, encoding=<span class="string">'utf-8'</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><p>爬取公众号文章</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Dict</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line">url = <span class="string">'https://data.wxb.com/rank/day/2020-02-22/%E7%A7%91%E6%8A%80?sort=&amp;page=1&amp;page_size=50&amp;is_new=1'</span></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                  <span class="string">'Chrome/76.0.3809.100 Safari/537.36'</span>,</span><br><span class="line">    <span class="string">'Cookie'</span>: <span class="string">'PHPSESSID=beac3d26447612afc0000369ce0a6b37; Qs_lvt_288791=1582549381; Qs_pv_288791=4313460905624405000; '</span></span><br><span class="line">              <span class="string">'aliyungf_tc=AQAAAKyqam5YtgQAWQMTOkuQHo7LO0N2; visit-wxb-id=847ecde119a5cefbe55b022b9af2debe '</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response=requests.get(url, headers=headers)</span><br><span class="line">json_obj=json.loads(response.text,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">url_id=[]</span><br><span class="line">articles = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> json_obj[<span class="string">'data'</span>]:</span><br><span class="line">    url_id.append(i[<span class="string">'wx_origin_id'</span>])</span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> url_id:</span><br><span class="line">    headers[<span class="string">'Referer'</span>] = <span class="string">'https://data.wxb.com/details/postRead?id='</span>+url</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">        resp = requests.get(<span class="string">'https://data.wxb.com/account/statArticles/'</span>+url+<span class="string">'?period=30&amp;page='</span>+str(j)+<span class="string">'&amp;sort='</span>, headers=headers)</span><br><span class="line">        json_obj = json.loads(resp.text, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> json_obj[<span class="string">'data'</span>]:</span><br><span class="line">            article = &#123;<span class="string">'title'</span>: i[<span class="string">'title'</span>], <span class="string">'url'</span>: i[<span class="string">'url'</span>]&#125;</span><br><span class="line">            articles.append(article)</span><br><span class="line">            <span class="comment"># for article in article_url:</span></span><br><span class="line">            <span class="comment">#     res=requests.get(article)</span></span><br><span class="line">            <span class="comment">#     print(res.url)</span></span><br><span class="line">            <span class="comment">#     print(res.text)</span></span><br><span class="line">                <span class="comment"># html=etree.HTML(res.text)</span></span><br><span class="line">                <span class="comment"># head=html.xpath("//head")</span></span><br><span class="line">                <span class="comment"># for i in head:</span></span><br><span class="line">                <span class="comment">#     print(etree.tostring(i, encoding='utf-8').decode('utf-8'))</span></span><br><span class="line">pf = pd.DataFrame(list(articles))</span><br><span class="line">columns = &#123;</span><br><span class="line">        <span class="string">'title'</span>: <span class="string">'名称'</span>,</span><br><span class="line">        <span class="string">'url'</span>: <span class="string">'网址'</span></span><br><span class="line">    &#125;</span><br><span class="line">pf.rename(columns=columns, inplace=<span class="literal">True</span>)</span><br><span class="line">pf.to_excel(<span class="string">'D:/公众号文章.xlsx'</span>, encoding=<span class="string">'utf-8'</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><p>BeautifulSoup4解析</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> .find_all(<span class="string">'a'</span>,limit=*) //查所有的a标签,参数limit可以限制找到几个</span><br><span class="line"><span class="number">2</span> .find_all(<span class="string">'tr'</span>,class_=<span class="string">'even'</span>)//查找所有的tr标签并且<span class="class"><span class="keyword">class</span>为<span class="title">even</span></span></span><br><span class="line"><span class="class">3 .<span class="title">find_all</span><span class="params">(<span class="string">'tr'</span>,attrs=&#123;<span class="string">'class'</span>:<span class="string">'even'</span>&#125;)</span></span></span><br><span class="line"><span class="class">4 .<span class="title">find_all</span><span class="params">(<span class="string">'tr'</span>,id=<span class="string">'even'</span>)</span></span></span><br><span class="line"><span class="class">5 //获取纯文本</span></span><br><span class="line">trs=soup.find_all('tr')//获取所有tr标签</span><br><span class="line"><span class="keyword">for</span> tr <span class="keyword">in</span> trs:</span><br><span class="line">title=tr[<span class="number">0</span>].string//某个标签下有多行文本不能取到</span><br><span class="line">category=tr[<span class="number">1</span>].string常用</span><br><span class="line">infos=list(tr.stripped_strings)//获取tr下的所有非空文本(常用)</span><br><span class="line"><span class="number">6</span> .find(<span class="string">'a'</span>)//返回第一个符合条件的a标签</span><br><span class="line"><span class="number">7</span> contents和children//返回某个标签下的直接子元素,contents返回列表,children返回迭代器</span><br><span class="line"><span class="number">8</span> 使用css选择器,使用soup.select(<span class="string">'css语法'</span>),应该写css语法的字符串</span><br></pre></td></tr></table></figure><p>中国天气网</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> Bar</span><br><span class="line"></span><br><span class="line">ALL_DATA = []</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    page = [<span class="string">'hb'</span>, <span class="string">'db'</span>, <span class="string">'hd'</span>, <span class="string">'hz'</span>, <span class="string">'hn'</span>, <span class="string">'xb'</span>, <span class="string">'xn'</span>, <span class="string">'gat'</span>]</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> page:</span><br><span class="line">        url = <span class="string">'http://www.weather.com.cn/textFC/'</span> + url + <span class="string">'.shtml'</span></span><br><span class="line">        parse_page(url)</span><br><span class="line">    <span class="comment"># 根据最低气温排序</span></span><br><span class="line">    ALL_DATA.sort(key=<span class="keyword">lambda</span> data: data[<span class="string">'min_temp'</span>])</span><br><span class="line">    data = ALL_DATA[<span class="number">0</span>:<span class="number">10</span>]</span><br><span class="line">    charts = Bar(<span class="string">'中国最低气温排行榜'</span>)</span><br><span class="line">    cities = list(map(<span class="keyword">lambda</span> x: x[<span class="string">'city'</span>], data))</span><br><span class="line">    temp = list(map(<span class="keyword">lambda</span> x: x[<span class="string">'min_temp'</span>], data))</span><br><span class="line">    charts.add(<span class="string">''</span>, cities, temp)</span><br><span class="line">    charts.render(<span class="string">'temperature.html'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_page</span><span class="params">(url)</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                      <span class="string">'Chrome/76.0.3809.100 Safari/537.36'</span></span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.get(url, headers=headers)</span><br><span class="line">    html = response.content.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    soup = BeautifulSoup(html, <span class="string">'html5lib'</span>)</span><br><span class="line">    div = soup.find_all(<span class="string">'div'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'conMidtab'</span>&#125;)[<span class="number">0</span>]</span><br><span class="line">    tables = div.find_all(<span class="string">'table'</span>)</span><br><span class="line">    <span class="keyword">for</span> table <span class="keyword">in</span> tables:</span><br><span class="line">        trs = table.find_all(<span class="string">'tr'</span>)[<span class="number">2</span>:]</span><br><span class="line">        <span class="keyword">for</span> tr <span class="keyword">in</span> trs:</span><br><span class="line">            tds = tr.find_all(<span class="string">'td'</span>)</span><br><span class="line">            city_td = tds[<span class="number">-8</span>]</span><br><span class="line">            city = list(city_td.stripped_strings)[<span class="number">0</span>]</span><br><span class="line">            temp_td = tds[<span class="number">-2</span>]</span><br><span class="line">            min_temp = list(temp_td.stripped_strings)[<span class="number">0</span>]</span><br><span class="line">            ALL_DATA.append(&#123;<span class="string">'city'</span>: city, <span class="string">'min_temp'</span>: int(min_temp)&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>正则表达式匹配</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1 * 可以匹配0或任意多个字符</span></span><br><span class="line">text = <span class="string">'aqw+q123ad1232'</span></span><br><span class="line"><span class="comment"># result = re.match('\s*', text)</span></span><br><span class="line"><span class="comment"># + 匹配1个或多个字符</span></span><br><span class="line"><span class="comment"># result = re.match('\w+', text)</span></span><br><span class="line"><span class="comment"># aqw</span></span><br><span class="line"><span class="comment"># ? 匹配一个或0个(要么没有,要么就只有一个)</span></span><br><span class="line"><span class="comment"># result = re.match('\w?', text)</span></span><br><span class="line"><span class="comment"># a</span></span><br><span class="line"><span class="comment"># &#123;m&#125; 匹配m个字符</span></span><br><span class="line"><span class="comment"># result = re.match('\w&#123;2&#125;', text)</span></span><br><span class="line"><span class="comment"># aq</span></span><br><span class="line"><span class="comment"># &#123;m, n&#125; 匹配m-n个字符</span></span><br><span class="line">test = <span class="string">'\\n'</span></span><br><span class="line">test1 = <span class="string">'apple is $22, orange is $12'</span></span><br><span class="line">test2 = <span class="string">'Hello ni hao'</span></span><br><span class="line">result = re.search(<span class="string">'\\\\n'</span>, test)  <span class="comment"># \\\\表示 \\ 表示一个\ \\后面一个表示一个\ 即 \\n 用python匹配 则是\n</span></span><br><span class="line"><span class="comment"># aqw</span></span><br><span class="line">res = re.findall(<span class="string">'\$\d+'</span>, test1)</span><br><span class="line"><span class="comment"># ['$22', '$12']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sub函数</span></span><br><span class="line">print(re.sub(<span class="string">'\$\d+'</span>, <span class="string">'0'</span>, test1))</span><br><span class="line"><span class="comment"># apple is 0, orange is 0</span></span><br><span class="line">print(res)</span><br><span class="line">print(re.split(<span class="string">' '</span>, test2))</span><br><span class="line"><span class="comment"># ['Hello', 'ni', 'hao']</span></span><br></pre></td></tr></table></figure><p>案例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># 验证手机号</span></span><br><span class="line">text = <span class="string">'13991471643'</span></span><br><span class="line">result = re.match(<span class="string">'1[34578]\d&#123;9&#125;'</span>, text)</span><br><span class="line"><span class="comment"># print(result.group())</span></span><br><span class="line"><span class="comment"># 验证邮箱</span></span><br><span class="line">email = <span class="string">'321915@163.com'</span></span><br><span class="line">ret = re.match(<span class="string">'\w+@[a-z0-9]+\.[a-z]+'</span>, email)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证url</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.baidu.com/s?re=233'</span></span><br><span class="line">resultUrl = re.match(<span class="string">'(http|https|ftp)://[^\s]+'</span>, url)<span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证身份证</span></span><br><span class="line"></span><br><span class="line">id = <span class="string">'61252619971008357x'</span></span><br><span class="line">res = re.match(<span class="string">'\d&#123;17&#125;[\dXx]'</span>, id)</span><br><span class="line">print(res.group())</span><br></pre></td></tr></table></figure><p>用正则表达式爬取古诗文网</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">poems = []</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_urls</span><span class="params">()</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                      <span class="string">'Chrome/76.0.3809.100 Safari/537.36'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">        <span class="comment"># response = requests.get('https://www.gushiwen.org/default_' + str(i) + '.aspx', headers=headers)</span></span><br><span class="line">        response = requests.get(<span class="string">'https://so.gushiwen.org/shiwen/default_0AA'</span>+str(i)+<span class="string">'.aspx'</span>, headers=headers)</span><br><span class="line">        html = response.text</span><br><span class="line">        titles = re.findall(<span class="string">r'&lt;div\sclass="cont".*?&lt;b&gt;(.*?)&lt;/b&gt;'</span>, html, re.DOTALL)</span><br><span class="line">        dynasties = re.findall(<span class="string">r'&lt;p\sclass="source".*?&lt;a.*?&gt;(.*?)&lt;/a&gt;'</span>, html, re.DOTALL)</span><br><span class="line">        authors = re.findall(<span class="string">r'&lt;p\sclass="source"&gt;.*?&lt;span.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;'</span>, html, re.DOTALL)</span><br><span class="line">        content_tag = re.findall(<span class="string">r'&lt;div\sclass="contson".*?&gt;(.*?)&lt;/div&gt;'</span>, html, re.DOTALL)</span><br><span class="line">        contents = []</span><br><span class="line">        <span class="keyword">for</span> content <span class="keyword">in</span> content_tag:</span><br><span class="line">            content = re.sub(<span class="string">r'&lt;.*?&gt;'</span>, <span class="string">''</span>, content)</span><br><span class="line">            contents.append(content.strip())</span><br><span class="line">        <span class="keyword">for</span> value <span class="keyword">in</span> zip(titles, dynasties, authors, contents):</span><br><span class="line">            title, dynasty, author, content = value</span><br><span class="line">            poem = &#123;</span><br><span class="line">                <span class="string">'title'</span>: title,</span><br><span class="line">                <span class="string">'dynasty'</span>: dynasty,</span><br><span class="line">                <span class="string">'author'</span>: author,</span><br><span class="line">                <span class="string">'content'</span>: content</span><br><span class="line">            &#125;</span><br><span class="line">            poems.append(poem)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    get_urls()</span><br><span class="line">    pf = pd.DataFrame(list(poems))</span><br><span class="line">    columns = &#123;</span><br><span class="line">        <span class="string">'title'</span>: <span class="string">'诗名'</span>,</span><br><span class="line">        <span class="string">'dynasty'</span>: <span class="string">'朝代'</span>,</span><br><span class="line">        <span class="string">'author'</span>: <span class="string">'作者'</span>,</span><br><span class="line">        <span class="string">'content'</span>: <span class="string">'内容'</span></span><br><span class="line">        &#125;</span><br><span class="line">    pf.rename(columns=columns, inplace=<span class="literal">True</span>)</span><br><span class="line">    pf.to_excel(<span class="string">'D:/古诗词.xlsx'</span>, encoding=<span class="string">'utf-8'</span>, index=<span class="literal">False</span>)</span><br><span class="line">    print(len(poems))</span><br></pre></td></tr></table></figure><p>json数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//字符转json</span><br><span class="line">json.dumps(json_str)</span><br><span class="line">//json转python对象</span><br><span class="line">json.loads(json字符串)</span><br></pre></td></tr></table></figure><p>将json写入文件</p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200228161318410.png" alt="image-20200228161318410"></p><p>csv文件</p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200228175101405.png" alt="image-20200228175101405"></p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200228175137667.png" alt="image-20200228175137667"></p><p>多线程</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">value = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">writer_</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> value</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000000</span>):</span><br><span class="line">        value += <span class="number">1</span></span><br><span class="line">    print(value)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drawing</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> value</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000000</span>):</span><br><span class="line">        value += <span class="number">1</span></span><br><span class="line">    print(value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    threading.Thread(target=writer_).start()</span><br><span class="line">    threading.Thread(target=drawing).start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br><span class="line"><span class="comment">#  1254106</span></span><br><span class="line"><span class="comment">#  1396958</span></span><br><span class="line"><span class="comment"># 出现线程抢占问题</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">value = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">gLock = threading.Lock() <span class="comment"># 创建锁</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">writer_</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> value</span><br><span class="line">    gLock.acquire()  <span class="comment"># 加锁</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000000000</span>):</span><br><span class="line">        value += <span class="number">1</span></span><br><span class="line">    gLock.release()  <span class="comment"># 释放锁</span></span><br><span class="line">    print(value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    threading.Thread(target=writer_).start()</span><br><span class="line">    threading.Thread(target=writer_).start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>lock版生产者消费者</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生产者消费者</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">gTimes = <span class="number">0</span></span><br><span class="line">gTotalTimes = <span class="number">10</span></span><br><span class="line">gMoney = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">gLock = threading.Lock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">global</span> gMoney</span><br><span class="line">        <span class="keyword">global</span> gTimes</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            money = random.randint(<span class="number">100</span>, <span class="number">1000</span>)</span><br><span class="line">            gLock.acquire()</span><br><span class="line">            <span class="keyword">if</span> gTimes &gt; gTotalTimes:</span><br><span class="line">                gLock.release()</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            gMoney += money</span><br><span class="line">            gTimes += <span class="number">1</span></span><br><span class="line">            print(<span class="string">'%s生产了%d的钱,还剩%d的钱'</span> % (threading.current_thread(), money, gMoney))</span><br><span class="line">            gLock.release()</span><br><span class="line">            time.sleep(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">global</span> gMoney</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            money = random.randint(<span class="number">100</span>, <span class="number">1000</span>)</span><br><span class="line">            gLock.acquire()</span><br><span class="line">            <span class="keyword">if</span> money &lt;= gMoney:</span><br><span class="line">                gMoney -= money</span><br><span class="line">                print(<span class="string">'%s消费了%d的钱,还剩%d的钱'</span> % (threading.current_thread(), money, gMoney))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> gTimes &gt; gTotalTimes:</span><br><span class="line">                    gLock.release()</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                print(<span class="string">'%s消费%d的钱,还剩%d的钱,钱不足'</span> % (threading.current_thread(), money, gMoney))</span><br><span class="line">            gLock.release()</span><br><span class="line">            time.sleep(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        Consumer(name=<span class="string">'消费者%d'</span> % x).start()</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        Producer(name=<span class="string">'生产者%d'</span> % x).start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>condition版,即线程通信的方式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生产者消费者</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">gTimes = <span class="number">0</span></span><br><span class="line">gTotalTimes = <span class="number">10</span></span><br><span class="line">gMoney = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">gCondition = threading.Condition()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">global</span> gMoney</span><br><span class="line">        <span class="keyword">global</span> gTimes</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            money = random.randint(<span class="number">100</span>, <span class="number">1000</span>)</span><br><span class="line">            gCondition.acquire()</span><br><span class="line">            <span class="keyword">if</span> gTimes &gt; gTotalTimes:</span><br><span class="line">                gCondition.release()</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            gMoney += money</span><br><span class="line">            gCondition.notify_all()</span><br><span class="line">            gTimes += <span class="number">1</span></span><br><span class="line">            print(<span class="string">'%s生产了%d的钱,还剩%d的钱'</span> % (threading.current_thread(), money, gMoney))</span><br><span class="line">            gCondition.release()</span><br><span class="line">            time.sleep(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">global</span> gMoney</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            money = random.randint(<span class="number">100</span>, <span class="number">1000</span>)</span><br><span class="line">            gCondition.acquire()</span><br><span class="line">            <span class="keyword">while</span> gMoney &lt; money:</span><br><span class="line">                <span class="keyword">if</span> gTimes &gt;= gTotalTimes:</span><br><span class="line">                    gCondition.release()</span><br><span class="line">                    <span class="keyword">return</span></span><br><span class="line">                print(<span class="string">'%s准备消费%d,还剩%d的钱,钱不足'</span> % (threading.current_thread(), money, gMoney))</span><br><span class="line">                gCondition.wait()</span><br><span class="line">            gMoney -= money</span><br><span class="line">            print(<span class="string">'%s消费了%d的钱,还剩%d的钱'</span> % (threading.current_thread(), money, gMoney))</span><br><span class="line">            gCondition.release()</span><br><span class="line">            time.sleep(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        Consumer(name=<span class="string">'消费者%d'</span> % x).start()</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        Producer(name=<span class="string">'生产者%d'</span> % x).start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&lt;Consumer(消费者<span class="number">0</span>, started <span class="number">11240</span>)&gt;消费了<span class="number">811</span>的钱,还剩<span class="number">189</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">1</span>, started <span class="number">16408</span>)&gt;消费了<span class="number">153</span>的钱,还剩<span class="number">36</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">2</span>, started <span class="number">14100</span>)&gt;准备消费<span class="number">762</span>,还剩<span class="number">36</span>的钱,钱不足</span><br><span class="line">&lt;Consumer(消费者<span class="number">3</span>, started <span class="number">12012</span>)&gt;准备消费<span class="number">512</span>,还剩<span class="number">36</span>的钱,钱不足</span><br><span class="line">&lt;Consumer(消费者<span class="number">4</span>, started <span class="number">6924</span>)&gt;准备消费<span class="number">568</span>,还剩<span class="number">36</span>的钱,钱不足</span><br><span class="line">&lt;Producer(生产者<span class="number">0</span>, started <span class="number">18116</span>)&gt;生产了<span class="number">692</span>的钱,还剩<span class="number">728</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">2</span>, started <span class="number">14100</span>)&gt;准备消费<span class="number">762</span>,还剩<span class="number">728</span>的钱,钱不足</span><br><span class="line">&lt;Consumer(消费者<span class="number">3</span>, started <span class="number">12012</span>)&gt;消费了<span class="number">512</span>的钱,还剩<span class="number">216</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">4</span>, started <span class="number">6924</span>)&gt;准备消费<span class="number">568</span>,还剩<span class="number">216</span>的钱,钱不足</span><br><span class="line">&lt;Producer(生产者<span class="number">1</span>, started <span class="number">18792</span>)&gt;生产了<span class="number">523</span>的钱,还剩<span class="number">739</span>的钱</span><br><span class="line">&lt;Producer(生产者<span class="number">2</span>, started <span class="number">19104</span>)&gt;生产了<span class="number">457</span>的钱,还剩<span class="number">1196</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">2</span>, started <span class="number">14100</span>)&gt;消费了<span class="number">762</span>的钱,还剩<span class="number">434</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">4</span>, started <span class="number">6924</span>)&gt;准备消费<span class="number">568</span>,还剩<span class="number">434</span>的钱,钱不足</span><br><span class="line">&lt;Producer(生产者<span class="number">3</span>, started <span class="number">17256</span>)&gt;生产了<span class="number">171</span>的钱,还剩<span class="number">605</span>的钱</span><br><span class="line">&lt;Producer(生产者<span class="number">4</span>, started <span class="number">1284</span>)&gt;生产了<span class="number">486</span>的钱,还剩<span class="number">1091</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">4</span>, started <span class="number">6924</span>)&gt;消费了<span class="number">568</span>的钱,还剩<span class="number">523</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">0</span>, started <span class="number">11240</span>)&gt;准备消费<span class="number">584</span>,还剩<span class="number">523</span>的钱,钱不足</span><br><span class="line">&lt;Consumer(消费者<span class="number">1</span>, started <span class="number">16408</span>)&gt;准备消费<span class="number">605</span>,还剩<span class="number">523</span>的钱,钱不足</span><br><span class="line">&lt;Producer(生产者<span class="number">2</span>, started <span class="number">19104</span>)&gt;生产了<span class="number">774</span>的钱,还剩<span class="number">1297</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">3</span>, started <span class="number">12012</span>)&gt;消费了<span class="number">621</span>的钱,还剩<span class="number">676</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">0</span>, started <span class="number">11240</span>)&gt;消费了<span class="number">584</span>的钱,还剩<span class="number">92</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">1</span>, started <span class="number">16408</span>)&gt;准备消费<span class="number">605</span>,还剩<span class="number">92</span>的钱,钱不足</span><br><span class="line">&lt;Producer(生产者<span class="number">0</span>, started <span class="number">18116</span>)&gt;生产了<span class="number">383</span>的钱,还剩<span class="number">475</span>的钱</span><br><span class="line">&lt;Producer(生产者<span class="number">1</span>, started <span class="number">18792</span>)&gt;生产了<span class="number">639</span>的钱,还剩<span class="number">1114</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">1</span>, started <span class="number">16408</span>)&gt;消费了<span class="number">605</span>的钱,还剩<span class="number">509</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">4</span>, started <span class="number">6924</span>)&gt;消费了<span class="number">116</span>的钱,还剩<span class="number">393</span>的钱</span><br><span class="line">&lt;Producer(生产者<span class="number">3</span>, started <span class="number">17256</span>)&gt;生产了<span class="number">550</span>的钱,还剩<span class="number">943</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">2</span>, started <span class="number">14100</span>)&gt;消费了<span class="number">543</span>的钱,还剩<span class="number">400</span>的钱</span><br><span class="line">&lt;Producer(生产者<span class="number">4</span>, started <span class="number">1284</span>)&gt;生产了<span class="number">957</span>的钱,还剩<span class="number">1357</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">3</span>, started <span class="number">12012</span>)&gt;消费了<span class="number">754</span>的钱,还剩<span class="number">603</span>的钱</span><br><span class="line">&lt;Producer(生产者<span class="number">2</span>, started <span class="number">19104</span>)&gt;生产了<span class="number">463</span>的钱,还剩<span class="number">1066</span>的钱</span><br><span class="line">&lt;Consumer(消费者<span class="number">0</span>, started <span class="number">11240</span>)&gt;消费了<span class="number">778</span>的钱,还剩<span class="number">288</span>的钱</span><br></pre></td></tr></table></figure><p>队列 queue</p><p>from queue import Queue</p><p>使用多线程爬取表情包</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生产者消费者下载表情包</span></span><br><span class="line"><span class="comment">#  其中需要两个队列,一个是获取每一页的url 还有一个获取每个表情的url</span></span><br><span class="line"><span class="comment"># 生产者负责获取每个表情包的url,消费者负责将表情的url写进文件</span></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                  <span class="string">'Chrome/76.0.3809.100 Safari/537.36 '</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, page_queue, img_queue, *args, **kwargs)</span>:</span>  <span class="comment"># 构造函数</span></span><br><span class="line">        super(Producer, self).__init__(*args, **kwargs)  <span class="comment"># 继承父类的方法</span></span><br><span class="line">        self.page_queue = page_queue</span><br><span class="line">        self.img_queue = img_queue</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">if</span> self.page_queue.empty():</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            url = self.page_queue.get()</span><br><span class="line">            self.parse_page(url)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_page</span><span class="params">(self, url)</span>:</span></span><br><span class="line">        response = requests.get(url, headers=headers)</span><br><span class="line">        html = etree.HTML(response.text)</span><br><span class="line">        images = html.xpath(<span class="string">"//div[@class='page-content text-center']//img[@class!='gif']"</span>)</span><br><span class="line">        <span class="keyword">for</span> img <span class="keyword">in</span> images:</span><br><span class="line">            file_url = img.get(<span class="string">'data-original'</span>)</span><br><span class="line">            alt = img.get(<span class="string">'alt'</span>)</span><br><span class="line">            suffix = os.path.splitext(file_url)</span><br><span class="line">            alt = re.sub(<span class="string">r"[!\?,\.！？]"</span>, <span class="string">''</span>, alt)</span><br><span class="line">            filename = alt + suffix[<span class="number">1</span>]</span><br><span class="line">            self.img_queue.put((file_url, filename))</span><br><span class="line">            <span class="comment"># download_img(file_url, filename)</span></span><br><span class="line">            <span class="comment"># 此处不能用urllib.request.urlretrieve() 会403</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, page_queue, img_queue, *args, **kwargs)</span>:</span>  <span class="comment"># 构造函数</span></span><br><span class="line">        super(Consumer, self).__init__(*args, **kwargs)  <span class="comment"># 继承父类的方法</span></span><br><span class="line">        self.page_queue = page_queue</span><br><span class="line">        self.img_queue = img_queue</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">if</span> self.img_queue.empty() <span class="keyword">and</span> self.page_queue.empty():</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            img_url, filename = self.img_queue.get()  <span class="comment"># 解析元组</span></span><br><span class="line">            self.download_img(img_url, filename)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">download_img</span><span class="params">(self, url, filename)</span>:</span></span><br><span class="line">        file_name = <span class="string">'D:\\images\\'</span> + filename</span><br><span class="line">        response = requests.get(url, headers=headers)</span><br><span class="line">        <span class="keyword">with</span> open(file_name, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.content)</span><br><span class="line">        print(filename + <span class="string">'下载完成'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    page_queue = Queue(<span class="number">100</span>)</span><br><span class="line">    img_queue = Queue(<span class="number">50000</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">101</span>):</span><br><span class="line">        url = <span class="string">'http://www.doutula.com/photo/list/?page=%d'</span> % i</span><br><span class="line">        page_queue.put(url)  <span class="comment"># 将每一页的url加入队列中</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        Producer(page_queue, img_queue).start()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        Consumer(page_queue, img_queue).start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>selenium与chromedriver</p><p>安装selenium</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install selenium</span><br></pre></td></tr></table></figure><p>安装chromedriver(安装与自己浏览器匹配的版本,将chromedriver放在不含中文的文件夹下)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;chromedriver&#x2F;</span><br></pre></td></tr></table></figure><p>selenium测试和行为链</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="comment">#  行为链</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.action_chains <span class="keyword">import</span> ActionChains</span><br><span class="line">driver_path = <span class="string">r'E:\Program Files\chromedriver\chromedriver.exe'</span></span><br><span class="line">driver = webdriver.Chrome(executable_path=driver_path)</span><br><span class="line">driver.get(<span class="string">'http://www.baidu.com'</span>)</span><br><span class="line">actions = ActionChains(driver)</span><br><span class="line">inputTag = driver.find_element_by_name(<span class="string">'wd'</span>)</span><br><span class="line">submit = driver.find_element_by_id(<span class="string">'su'</span>)</span><br><span class="line">actions.move_to_element(inputTag)</span><br><span class="line">actions.send_keys_to_element(inputTag, <span class="string">'python'</span>)</span><br><span class="line">actions.move_to_element(submit)</span><br><span class="line">actions.click(submit)</span><br><span class="line">actions.perform()</span><br></pre></td></tr></table></figure><p>selenium api文档</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;selenium-python.readthedocs.io&#x2F;api.html#module-selenium.webdriver.common.action_chains</span><br></pre></td></tr></table></figure><p>操作cookie</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> cookie <span class="keyword">in</span> driver.get_cookies():</span><br><span class="line">    print(cookie)</span><br><span class="line"></span><br><span class="line">print(driver.get_cookie(<span class="string">'PSTM'</span>))</span><br><span class="line"></span><br><span class="line">print(driver.delete_cookie(<span class="string">'PSTM'</span>))</span><br><span class="line"></span><br><span class="line">print(driver.delete_all_cookies())</span><br></pre></td></tr></table></figure><p>显示等待和隐式等待</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line">driver_path = <span class="string">r'E:\Program Files\chromedriver\chromedriver.exe'</span></span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome(driver_path)</span><br><span class="line">driver.get(<span class="string">'http://www.douban.com'</span>)</span><br><span class="line"><span class="comment"># driver.implicitly_wait(5)  # 隐式等待</span></span><br><span class="line"></span><br><span class="line">WebDriverWait(driver, <span class="number">10</span>).until(  <span class="comment"># 显示等待 当元素出现就返回</span></span><br><span class="line">    EC.presence_of_element_located((By.ID, <span class="string">'anony-group'</span>))</span><br><span class="line">)</span><br><span class="line"><span class="comment"># driver.find_element_by_name('weweweew')</span></span><br></pre></td></tr></table></figure><p>页面切换</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">driver_path = <span class="string">r'E:\Program Files\chromedriver\chromedriver.exe'</span></span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome(driver_path)</span><br><span class="line"></span><br><span class="line">driver.get(<span class="string">'http://www.baidu.com'</span>)</span><br><span class="line"></span><br><span class="line">driver.execute_script(<span class="string">"window.open('http://www.douban.com')"</span>)</span><br><span class="line">driver.switch_to.window(driver.window_handles[<span class="number">1</span>])  <span class="comment"># driver.window_handles[1] 页面句柄 </span></span><br><span class="line"><span class="comment"># switch_to.window 跳转页面</span></span><br><span class="line">print(driver.current_url)</span><br></pre></td></tr></table></figure><p>使用代理</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">driver_path = <span class="string">r'E:\Program Files\chromedriver\chromedriver.exe'</span></span><br><span class="line">options = webdriver.ChromeOptions()  <span class="comment"># 代理</span></span><br><span class="line">options.add_argument(<span class="string">'--proxy-server=http://119.57.108.65:53281'</span>)</span><br><span class="line">driver = webdriver.Chrome(executable_path=driver_path, chrome_options=options)</span><br><span class="line"></span><br><span class="line">driver.get(<span class="string">'http://httpbin.org/ip'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 对元素进行操作</span><br><span class="line">from selenium.webdriver.remote.webelement import WebElement</span><br><span class="line"># 对元素进行操作</span><br><span class="line">submitBtn &#x3D; driver.fin_element_by_id(&#39;su&#39;)</span><br><span class="line">print(submitBtn.get_attribute(&quot;value&quot;))</span><br></pre></td></tr></table></figure><p>selenium实现获取拉勾网职位信息</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">requesst_url</span><span class="params">()</span>:</span></span><br><span class="line">    driver_path = <span class="string">r'E:\Program Files\chromedriver\chromedriver.exe'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.driver = webdriver.Chrome(requesst_url.driver_path)</span><br><span class="line">        self.url = <span class="string">'https://www.lagou.com/jobs/list_python?labelWords=&amp;fromSearch=true&amp;suginput='</span></span><br><span class="line">        self.positions = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.driver.get(self.url)</span><br><span class="line">        self.driver.find_element_by_xpath(<span class="string">"//div[@class='body-btn']"</span>).click()</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            source = self.driver.page_source</span><br><span class="line">            self.parse_page(source)</span><br><span class="line">            WebDriverWait(self.driver, <span class="number">10</span>).until(</span><br><span class="line">                EC.presence_of_element_located((By.XPATH, <span class="string">"//div[@class='pager_container']//span[last()]"</span>))</span><br><span class="line">            )</span><br><span class="line">            next_btn = self.driver.find_element_by_xpath(<span class="string">"//div[@class='pager_container']//span[last()]"</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'pager_next_disabled'</span> <span class="keyword">in</span> next_btn.get_attribute(<span class="string">'class'</span>):</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                next_btn.click()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_page</span><span class="params">(self, source)</span>:</span></span><br><span class="line">        html = etree.HTML(source)</span><br><span class="line">        detail_urls = html.xpath(<span class="string">"//a[@class='position_link']/@href"</span>)</span><br><span class="line">        <span class="keyword">for</span> detail_url <span class="keyword">in</span> detail_urls:</span><br><span class="line">            self.driver.execute_script(<span class="string">"window.open('%s')"</span> % detail_url) <span class="comment"># 切换到新的页面</span></span><br><span class="line">            self.driver.switch_to.window(self.driver.window_handles[<span class="number">1</span>])</span><br><span class="line">            WebDriverWait(self.driver, <span class="number">10</span>).until(</span><br><span class="line">                EC.presence_of_element_located((By.XPATH, <span class="string">"//div[@class='job-name']"</span>))</span><br><span class="line">            )</span><br><span class="line">            source = self.driver.page_source</span><br><span class="line">            self.parse_detail_page(source)</span><br><span class="line">            self.driver.close()</span><br><span class="line">            self.driver.switch_to.window(self.driver.window_handles[<span class="number">0</span>]) <span class="comment"># 切换到原来的页面</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_detail_page</span><span class="params">(self, source)</span>:</span></span><br><span class="line">        html = etree.HTML(source)</span><br><span class="line">        position_name = html.xpath(<span class="string">"//div[@class='job-name']/@title"</span>)[<span class="number">0</span>]</span><br><span class="line">        spans = html.xpath(<span class="string">"//dd[@class='job_request']"</span>)[<span class="number">0</span>]</span><br><span class="line">        salary = spans.xpath(<span class="string">".//span[@class='salary']/text()"</span>)[<span class="number">0</span>].strip()</span><br><span class="line">        city = re.sub(<span class="string">r"[\s/]"</span>, <span class="string">''</span>, spans.xpath(<span class="string">".//span/text()"</span>)[<span class="number">1</span>]).strip()</span><br><span class="line">        work_years = re.sub(<span class="string">r"[\s/]"</span>, <span class="string">''</span>, spans.xpath(<span class="string">".//span/text()"</span>)[<span class="number">2</span>]).strip()</span><br><span class="line">        company_name = html.xpath(<span class="string">"//div[@class='job_company_content']//em/text()"</span>)[<span class="number">0</span>].strip()</span><br><span class="line">        require = re.sub(<span class="string">r"[\s/]"</span>, <span class="string">''</span>, spans.xpath(<span class="string">".//span/text()"</span>)[<span class="number">3</span>]).strip()</span><br><span class="line">        description = <span class="string">""</span>.join(html.xpath(<span class="string">"//div[@class='job-detail']//text()"</span>)).strip()</span><br><span class="line">        position = &#123;</span><br><span class="line">            <span class="string">'position_name'</span>: position_name,</span><br><span class="line">            <span class="string">'salary'</span>: salary,</span><br><span class="line">            <span class="string">'city'</span>: city,</span><br><span class="line">            <span class="string">'work_years'</span>: work_years,</span><br><span class="line">            <span class="string">'company_name'</span>: company_name,</span><br><span class="line">            <span class="string">'require'</span>: require,</span><br><span class="line">            <span class="string">'description'</span>: description</span><br><span class="line">        &#125;</span><br><span class="line">        self.positions.append(position)</span><br><span class="line">        print(position)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    requesst_url().run()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>图形验证码识别技术</p><p>tesseract的安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;digi.bib.uni-mannheim.de&#x2F;tesseract&#x2F;</span><br></pre></td></tr></table></figure><p>配置环境变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\Program Files\Tesseract-OCR\tessdata</span><br></pre></td></tr></table></figure><p>测试验证码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> pytesseract</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    pytesseract.pytesseract.tesseract_cmd = <span class="string">r'D:\Program Files\Tesseract-OCR\tesseract.exe'</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        time_stamp = int(time.time())</span><br><span class="line">        url = <span class="string">'http://47.103.204.177/BookStore/Vcode?a=%d'</span> % time_stamp</span><br><span class="line">        request.urlretrieve(url, <span class="string">'captcha.png'</span>)</span><br><span class="line">        image = Image.open(<span class="string">'captcha.png'</span>)</span><br><span class="line">        text = pytesseract.image_to_string(image)</span><br><span class="line">        print(text)</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>Scrapy框架</p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200305165442113.png" alt="image-20200305165442113"></p><p>安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install scrapy</span><br><span class="line"># windows下还要安装</span><br><span class="line">pip install pypiwin32</span><br></pre></td></tr></table></figure><p>文档</p><p>scrapy中文文档</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;scrapy-chs.readthedocs.io&#x2F;zh_CN&#x2F;1.0&#x2F;intro&#x2F;overview.html</span><br></pre></td></tr></table></figure><p>使用命令行创建项目</p><p>创建项目前将scrapy加到环境变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject 项目名称</span><br></pre></td></tr></table></figure><p>目录结构</p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200305162348095.png" alt="image-20200305162348095"></p><p>使用命令生成一个爬虫</p><p>项目路径:</p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200305162546702.png" alt="image-20200305162546702"></p><p>进入项目下创建</p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200305162952859.png" alt="image-20200305162952859"></p><p>(创建爬虫项目要与项目名不一样)</p><p>生成项目</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkSpiderSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'qsbk_spider'</span></span><br><span class="line">    allowed_domains = [<span class="string">'funnyba.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://funnyba.com/'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>在settings设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ROBOTSTXT_OBEY &#x3D; False  # 机器人协议</span><br></pre></td></tr></table></figure><p>在请求头添加User-Agent</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DEFAULT_REQUEST_HEADERS = &#123;</span><br><span class="line">    <span class="string">'Accept'</span>: <span class="string">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span>,</span><br><span class="line">    <span class="string">'Accept-Language'</span>: <span class="string">'en'</span>,</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                  <span class="string">'Chrome/80.0.3987.132 Safari/537.36 '</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>例:爬取段子</p><p>qsbk_spider.py代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scrapy_demo.qsbk.qsbk.items <span class="keyword">import</span> QsbkItem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkSpiderSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'qsbk_spider'</span></span><br><span class="line">    allowed_domains = [<span class="string">'xiaohuabang.cn'</span>]</span><br><span class="line">    start_urls = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">190</span>):</span><br><span class="line">        start_urls.append(<span class="string">'http://www.xiaohuabang.cn/duanzi/hunduanzi/p%d/'</span> % i)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        hrefs = response.xpath(<span class="string">"//a[@class='link_more']/@href"</span>).getall()</span><br><span class="line">        <span class="keyword">for</span> href <span class="keyword">in</span> hrefs:</span><br><span class="line">            url = <span class="string">'http://www.xiaohuabang.cn'</span>+href</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url, callback=self.parse_detail)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_detail</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        title = response.xpath(<span class="string">"//em[contains(@style,'font')]/text()"</span>).get()</span><br><span class="line">        content = <span class="string">""</span>.join(response.xpath(<span class="string">"//div[@class='block untagged noline']//div[@class='content']//text()"</span>).getall()).strip()</span><br><span class="line">        content = re.sub(<span class="string">r"[\s\n\s?]"</span>, <span class="string">''</span>, content)</span><br><span class="line">        item = QsbkItem(title=title, content=content)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure><p>pipelines.py代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define your item pipelines here</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Don't forget to add your pipeline to the ITEM_PIPELINES setting</span></span><br><span class="line"><span class="comment"># See: https://docs.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> scrapy.exporters <span class="keyword">import</span> JsonLinesItemExporter</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.fp = open(<span class="string">"duanzi.json"</span>, <span class="string">"wb"</span>)</span><br><span class="line">        self.exporter = JsonLinesItemExporter(self.fp, ensure_ascii=<span class="literal">False</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_spider</span><span class="params">(self, spider)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        self.exporter.export_item(item)</span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_spider</span><span class="params">(self, spider)</span>:</span></span><br><span class="line">        self.fp.close()</span><br></pre></td></tr></table></figure><p>CrawlSpider爬虫</p><p>LinkExtractors链接提取器</p><p>常用参数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">allow&#x3D;() #允许的url,满足这个正则的url都会被提取</span><br><span class="line">deny&#x3D;() 禁止的url,满足这个正则的url都不会被提取</span><br></pre></td></tr></table></figure><p>Rule 规则类</p><p>创建crawl模板的spider</p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200306135437033.png" alt="image-20200306135437033"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject 项目名称</span><br><span class="line">进入项目下</span><br><span class="line">即cd 项目名称</span><br><span class="line">创建 crawl模板的spider</span><br><span class="line">scrapy genspider -t crawl wxapp_spider &quot;域名&quot;</span><br></pre></td></tr></table></figure><p>需要使用LinkExtractors和Rule 规则</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">start_urls = [<span class="string">'http://www.wxapp-union.com/portal.php?mod=list&amp;catid=2&amp;page=1'</span>]</span><br><span class="line"><span class="comment"># start_url 是爬虫开始的url</span></span><br><span class="line"></span><br><span class="line">rules = (</span><br><span class="line">    Rule(LinkExtractor(allow=<span class="string">r'.+mod=list&amp;catid=2&amp;page=\d'</span>), follow=<span class="literal">True</span>),</span><br><span class="line">    Rule(LinkExtractor(allow=<span class="string">".+article-.+\.html"</span>), callback=<span class="string">"parse_detail"</span>, follow=<span class="literal">False</span>)</span><br><span class="line">)</span><br><span class="line"><span class="comment"># 重点是rules 其中的Rule(LinkExtractor(allow="")#allow 使用正则表达式,区分所有的url follow表示 是否要跟进比如前十页后面还有则设置为true 为详情页的rule设置callback是返回执行的解析函数,follow不跟进, 什么情况下需要指定callback如果这个url只为获取更多的url并不需要里面的数据, 则不用设置,若这个url需要获取页面的信息则要指定callback</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> scrapy.linkextractors <span class="keyword">import</span> LinkExtractor</span><br><span class="line"><span class="keyword">from</span> scrapy.spiders <span class="keyword">import</span> CrawlSpider, Rule</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scrapy_demo.wxapp.wxapp.items <span class="keyword">import</span> WxappItem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WxappSpiderSpider</span><span class="params">(CrawlSpider)</span>:</span></span><br><span class="line">    name = <span class="string">'wxapp_spider'</span></span><br><span class="line">    allowed_domains = [<span class="string">'wxapp-union.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://www.wxapp-union.com/portal.php?mod=list&amp;catid=2&amp;page=1'</span>]</span><br><span class="line"></span><br><span class="line">    rules = (</span><br><span class="line">        Rule(LinkExtractor(allow=<span class="string">r'.+mod=list&amp;catid=2&amp;page=\d'</span>), follow=<span class="literal">True</span>),</span><br><span class="line">        Rule(LinkExtractor(allow=<span class="string">".+article-.+\.html"</span>), callback=<span class="string">"parse_detail"</span>, follow=<span class="literal">False</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_detail</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="comment"># item = &#123;&#125;</span></span><br><span class="line">        <span class="comment"># item['domain_id'] = response.xpath('//input[@id="sid"]/@value').get()</span></span><br><span class="line">        <span class="comment"># item['name'] = response.xpath('//div[@id="name"]').get()</span></span><br><span class="line">        <span class="comment"># item['description'] = response.xpath('//div[@id="description"]').get()</span></span><br><span class="line">        title = response.xpath(<span class="string">"//h1[@class='ph']/text()"</span>).get()</span><br><span class="line">        author_p = response.xpath(<span class="string">"//p[@class='authors']"</span>)</span><br><span class="line">        author = author_p.xpath(<span class="string">".//a/text()"</span>).get()</span><br><span class="line">        pub_time = author_p.xpath(<span class="string">".//span/text()"</span>).get()</span><br><span class="line">        article_content = <span class="string">""</span>.join(response.xpath(<span class="string">"//td[@id='article_content']//text()"</span>).getall()).strip()</span><br><span class="line">        <span class="comment"># print(article_content)</span></span><br><span class="line">        <span class="comment"># print("author: %s,pub_time: %s" % (author, pub_time))</span></span><br><span class="line">        item = WxappItem(title=title, author=author, pub_time=pub_time, content=article_content)</span><br><span class="line">        <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define your item pipelines here</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Don't forget to add your pipeline to the ITEM_PIPELINES setting</span></span><br><span class="line"><span class="comment"># See: https://docs.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scrapy.exporters <span class="keyword">import</span> JsonLinesItemExporter</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WxappPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.fp = open(<span class="string">'wxapp.json'</span>, <span class="string">'wb'</span>)</span><br><span class="line">        self.exporters = JsonLinesItemExporter(self.fp, ensure_ascii=<span class="literal">False</span>, encoding=<span class="string">"utf-8"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        self.exporters.export_item(item)</span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_spider</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.fp.close()</span><br></pre></td></tr></table></figure><p>主意要开启</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ITEM_PIPELINES &#x3D; &#123;</span><br><span class="line">   &#39;wxapp.pipelines.WxappPipeline&#39;: 300,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define here the models for your scraped items</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># See documentation in:</span></span><br><span class="line"><span class="comment"># https://docs.scrapy.org/en/latest/topics/items.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WxappItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    author = scrapy.Field()</span><br><span class="line">    pub_time = scrapy.Field()</span><br><span class="line">    content = scrapy.Field()</span><br></pre></td></tr></table></figure><p>Scrapy shell </p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200306140125182.png" alt="image-20200306140125182"></p><p>request和response对象</p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200306141415606.png" alt="image-20200306141415606"></p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200306141525160.png" alt="image-20200306141525160"></p><p>发送post请求</p><p>重写start_request方法,使用FormRequest()</p><p><img src="/2020/03/09/python%E7%88%AC%E8%99%AB/image-20200306165729994.png" alt="image-20200306165729994"></p><p>模拟登录豆瓣网</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;##python爬虫基础&lt;/p&gt;
&lt;p&gt;urllib库,url库含有四个模块&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;request 是最基本的请求方式,error是异常处理信息,parse是解析的工具类,你可以将没有编码的url放在parse工具中编码和解码,robotparser主要是用来识别网站的 robots.txt 文件.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;例: &lt;/p&gt;
    
    </summary>
    
    
      <category term="python爬虫" scheme="http://philxling.cn/categories/python%E7%88%AC%E8%99%AB/"/>
    
    
  </entry>
  
  <entry>
    <title>mysql查询2</title>
    <link href="http://philxling.cn/2020/03/08/mysql%E6%9F%A5%E8%AF%A22/"/>
    <id>http://philxling.cn/2020/03/08/mysql%E6%9F%A5%E8%AF%A22/</id>
    <published>2020-03-08T04:00:25.000Z</published>
    <updated>2020-03-15T06:31:02.281Z</updated>
    
    <content type="html"><![CDATA[<h2 id="mysql查询2"><a href="#mysql查询2" class="headerlink" title="mysql查询2"></a>mysql查询2</h2><p>作者: philxling</p><p>通过多个表,然后用log记录的方式记录知识:</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">create table goods (</span><br><span class="line">  goods_id mediumint(8) unsigned primary key auto_increment,</span><br><span class="line">  goods_name varchar(120) not null default &#39;&#39;,</span><br><span class="line">  cat_id smallint(5) unsigned not null default &#39;0&#39;,</span><br><span class="line">  brand_id smallint(5) unsigned not null default &#39;0&#39;,</span><br><span class="line">  goods_sn char(15) not null default &#39;&#39;,</span><br><span class="line">  goods_number smallint(5) unsigned not null default &#39;0&#39;,</span><br><span class="line">  shop_price decimal(10,2) unsigned not null default &#39;0.00&#39;,</span><br><span class="line">  market_price decimal(10,2) unsigned not null default &#39;0.00&#39;,</span><br><span class="line">  click_count int(10) unsigned not null default &#39;0&#39;</span><br><span class="line">) engine&#x3D;myisam default charset&#x3D;utf8;</span><br><span class="line">insert into &#96;goods&#96; values (1,&#39;kd876&#39;,4,8,&#39;ecs000000&#39;,1,1388.00,1665.60,9),</span><br><span class="line">(4,&#39;诺基亚n85原装充电器&#39;,8,1,&#39;ecs000004&#39;,17,58.00,69.60,0),</span><br><span class="line">(3,&#39;诺基亚原装5800耳机&#39;,8,1,&#39;ecs000002&#39;,24,68.00,81.60,3),</span><br><span class="line">(5,&#39;索爱原装m2卡读卡器&#39;,11,7,&#39;ecs000005&#39;,8,20.00,24.00,3),</span><br><span class="line">(6,&#39;胜创kingmax内存卡&#39;,11,0,&#39;ecs000006&#39;,15,42.00,50.40,0),</span><br><span class="line">(7,&#39;诺基亚n85原装立体声耳机hs-82&#39;,8,1,&#39;ecs000007&#39;,20,100.00,120.00,0),</span><br><span class="line">(8,&#39;飞利浦9@9v&#39;,3,4,&#39;ecs000008&#39;,1,399.00,478.79,10),</span><br><span class="line">(9,&#39;诺基亚e66&#39;,3,1,&#39;ecs000009&#39;,4,2298.00,2757.60,20),</span><br><span class="line">(10,&#39;索爱c702c&#39;,3,7,&#39;ecs000010&#39;,7,1328.00,1593.60,11),</span><br><span class="line">(11,&#39;索爱c702c&#39;,3,7,&#39;ecs000011&#39;,1,1300.00,0.00,0),</span><br><span class="line">(12,&#39;摩托罗拉a810&#39;,3,2,&#39;ecs000012&#39;,8,983.00,1179.60,13),</span><br><span class="line">(13,&#39;诺基亚5320 xpressmusic&#39;,3,1,&#39;ecs000013&#39;,8,1311.00,1573.20,13),</span><br><span class="line">(14,&#39;诺基亚5800xm&#39;,4,1,&#39;ecs000014&#39;,1,2625.00,3150.00,6),</span><br><span class="line">(15,&#39;摩托罗拉a810&#39;,3,2,&#39;ecs000015&#39;,3,788.00,945.60,8),</span><br><span class="line">(16,&#39;恒基伟业g101&#39;,2,11,&#39;ecs000016&#39;,0,823.33,988.00,3),</span><br><span class="line">(17,&#39;夏新n7&#39;,3,5,&#39;ecs000017&#39;,1,2300.00,2760.00,2),</span><br><span class="line">(18,&#39;夏新t5&#39;,4,5,&#39;ecs000018&#39;,1,2878.00,3453.60,0),</span><br><span class="line">(19,&#39;三星sgh-f258&#39;,3,6,&#39;ecs000019&#39;,12,858.00,1029.60,7),</span><br><span class="line">(20,&#39;三星bc01&#39;,3,6,&#39;ecs000020&#39;,12,280.00,336.00,14),</span><br><span class="line">(21,&#39;金立 a30&#39;,3,10,&#39;ecs000021&#39;,40,2000.00,2400.00,4),</span><br><span class="line">(22,&#39;多普达touch hd&#39;,3,3,&#39;ecs000022&#39;,1,5999.00,7198.80,16),</span><br><span class="line">(23,&#39;诺基亚n96&#39;,5,1,&#39;ecs000023&#39;,8,3700.00,4440.00,17),</span><br><span class="line">(24,&#39;p806&#39;,3,9,&#39;ecs000024&#39;,100,2000.00,2400.00,35),</span><br><span class="line">(25,&#39;小灵通&#x2F;固话50元充值卡&#39;,13,0,&#39;ecs000025&#39;,2,48.00,57.59,0),</span><br><span class="line">(26,&#39;小灵通&#x2F;固话20元充值卡&#39;,13,0,&#39;ecs000026&#39;,2,19.00,22.80,0),</span><br><span class="line">(27,&#39;联通100元充值卡&#39;,15,0,&#39;ecs000027&#39;,2,95.00,100.00,0),</span><br><span class="line">(28,&#39;联通50元充值卡&#39;,15,0,&#39;ecs000028&#39;,0,45.00,50.00,0),</span><br><span class="line">(29,&#39;移动100元充值卡&#39;,14,0,&#39;ecs000029&#39;,0,90.00,0.00,0),</span><br><span class="line">(30,&#39;移动20元充值卡&#39;,14,0,&#39;ecs000030&#39;,9,18.00,21.00,1),</span><br><span class="line">(31,&#39;摩托罗拉e8 &#39;,3,2,&#39;ecs000031&#39;,1,1337.00,1604.39,5),</span><br><span class="line">(32,&#39;诺基亚n85&#39;,3,1,&#39;ecs000032&#39;,4,3010.00,3612.00,9);</span><br><span class="line">create table category (</span><br><span class="line">cat_id smallint unsigned auto_increment primary key,</span><br><span class="line">cat_name varchar(90) not null default &#39;&#39;,</span><br><span class="line">parent_id smallint unsigned</span><br><span class="line">)engine myisam charset utf8;</span><br><span class="line">INSERT INTO &#96;category&#96; VALUES</span><br><span class="line">(1,&#39;手机类型&#39;,0),</span><br><span class="line">(2,&#39;CDMA手机&#39;,1),</span><br><span class="line">(3,&#39;GSM手机&#39;,1),</span><br><span class="line">(4,&#39;3G手机&#39;,1),</span><br><span class="line">(5,&#39;双模手机&#39;,1),</span><br><span class="line">(6,&#39;手机配件&#39;,0),</span><br><span class="line">(7,&#39;充电器&#39;,6),</span><br><span class="line">(8,&#39;耳机&#39;,6),</span><br><span class="line">(9,&#39;电池&#39;,6),</span><br><span class="line">(11,&#39;读卡器和内存卡&#39;,6),</span><br><span class="line">(12,&#39;充值卡&#39;,0),</span><br><span class="line">(13,&#39;小灵通&#x2F;固话充值卡&#39;,12),</span><br><span class="line">(14,&#39;移动手机充值卡&#39;,12),</span><br><span class="line">(15,&#39;联通手机充值卡&#39;,12);</span><br><span class="line">CREATE TABLE &#96;result&#96; (</span><br><span class="line">  &#96;name&#96; varchar(20) DEFAULT NULL,</span><br><span class="line">  &#96;subject&#96; varchar(20) DEFAULT NULL,</span><br><span class="line">  &#96;score&#96; tinyint(4) DEFAULT NULL</span><br><span class="line">) ENGINE&#x3D;MyISAM DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line">insert into result</span><br><span class="line">values</span><br><span class="line">(&#39;张三&#39;,&#39;数学&#39;,90),</span><br><span class="line">(&#39;张三&#39;,&#39;语文&#39;,50),</span><br><span class="line">(&#39;张三&#39;,&#39;地理&#39;,40),</span><br><span class="line">(&#39;李四&#39;,&#39;语文&#39;,55),</span><br><span class="line">(&#39;李四&#39;,&#39;政治&#39;,45),</span><br><span class="line">(&#39;王五&#39;,&#39;政治&#39;,30);</span><br><span class="line">create table a (</span><br><span class="line">id char(1),</span><br><span class="line">num int</span><br><span class="line">)engine myisam charset utf8;</span><br><span class="line">insert into a values (&#39;a&#39;,5),(&#39;b&#39;,10),(&#39;c&#39;,15),(&#39;d&#39;,10);</span><br><span class="line">create table b (</span><br><span class="line">id char(1),</span><br><span class="line">num int</span><br><span class="line">)engine myisam charset utf8;</span><br><span class="line">insert into b values (&#39;b&#39;,5),(&#39;c&#39;,15),(&#39;d&#39;,20),(&#39;e&#39;,99);</span><br><span class="line">create table m(</span><br><span class="line">     mid int,</span><br><span class="line">     hid int,</span><br><span class="line">     gid int,</span><br><span class="line">     mres varchar(10),</span><br><span class="line">     matime date</span><br><span class="line">)engine myisam charset utf8;</span><br><span class="line">create table t (</span><br><span class="line">     tid int,</span><br><span class="line">     tname varchar(20)</span><br><span class="line">)engine myisam charset utf8;</span><br><span class="line">insert into m</span><br><span class="line">     values</span><br><span class="line">     (1,1,2,&#39;2:0&#39;,&#39;2006-05-21&#39;),</span><br><span class="line">     (2,2,3,&#39;1:2&#39;,&#39;2006-06-21&#39;),</span><br><span class="line">     (3,3,1,&#39;2:5&#39;,&#39;2006-06-25&#39;),</span><br><span class="line">     (4,2,1,&#39;3:2&#39;,&#39;2006-07-21&#39;);</span><br><span class="line">insert into t</span><br><span class="line">     values</span><br><span class="line">     (1,&#39;国安&#39;),</span><br><span class="line">     (2,&#39;申花&#39;),</span><br><span class="line">     (3,&#39;布尔联队&#39;);</span><br><span class="line">create table mian ( num int) engine myisam;</span><br><span class="line">insert into mian values</span><br><span class="line">(3),</span><br><span class="line">(12),</span><br><span class="line">(15),</span><br><span class="line">(25),</span><br><span class="line">(23),</span><br><span class="line">(29),</span><br><span class="line">(34),</span><br><span class="line">(37),</span><br><span class="line">(32);</span><br><span class="line">create table user (</span><br><span class="line">uid int primary key auto_increment,</span><br><span class="line">name varchar(20) not null default &#39;&#39;,</span><br><span class="line">age smallint unsigned not null default 0</span><br><span class="line">) engine myisam charset utf8;</span><br><span class="line">create table boy (</span><br><span class="line">    hid char(1),</span><br><span class="line">     bname varchar(20)</span><br><span class="line">)engine myisam charset utf8;</span><br><span class="line">insert into boy (bname,hid)</span><br><span class="line">     values</span><br><span class="line">     (&#39;屌丝&#39;,&#39;A&#39;),</span><br><span class="line">     (&#39;杨过&#39;,&#39;B&#39;),</span><br><span class="line">     (&#39;陈冠希&#39;,&#39;C&#39;);</span><br><span class="line">create table girl (</span><br><span class="line">    hid char(1),</span><br><span class="line">     gname varchar(20)</span><br><span class="line">     )engine myisam charset utf8;</span><br><span class="line">insert into girl(gname,hid)</span><br><span class="line">     values</span><br><span class="line">     (&#39;小龙女&#39;,&#39;B&#39;),</span><br><span class="line">     (&#39;张柏芝&#39;,&#39;C&#39;),</span><br><span class="line">     (&#39;死宅女&#39;,&#39;D&#39;);</span><br></pre></td></tr></table></figure><p>mysql&gt; select goods_name,goods_id, concat(“HTC”,substring(goods_name,4)) as name from goods where goods_name like “诺基亚%”;<br>+—————————————-+———-+———————————-+<br>| goods_name                             | goods_id | name                             |<br>+—————————————-+———-+———————————-+<br>| 诺基亚n85原装充电器                    |        4 | HTCn85原装充电器                 |<br>| 诺基亚原装5800耳机                     |        3 | HTC原装5800耳机                  |<br>| 诺基亚n85原装立体声耳机hs-82           |        7 | HTCn85原装立体声耳机hs-82        |<br>| 诺基亚e66                              |        9 | HTCe66                           |<br>| 诺基亚5320 xpressmusic                 |       13 | HTC5320 xpressmusic              |<br>| 诺基亚5800xm                           |       14 | HTC5800xm                        |<br>| 诺基亚n96                              |       23 | HTCn96                           |<br>| 诺基亚n85                              |       32 | HTCn85                           |<br>+—————————————-+———-+———————————-+<br>8 rows in set (0.00 sec)</p><p>mysql&gt; select * from mian<br>    -&gt; ;<br>+——+<br>| num  |<br>+——+<br>|    3 |<br>|   12 |<br>|   15 |<br>|   20 |<br>|   20 |<br>|   20 |<br>|   30 |<br>|   30 |<br>|   30 |<br>+——+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; #取出第三个栏目下价格小于1000或者大于3000 同时点击量大于5的商品<br>mysql&gt; select goods_id ,goods_name, shop_price,cat_id,click_count from goods where cat_id=3 and (shop_price&lt;1000 || shop_price&gt;3000) and click_count &gt;=5 ;<br>+———-+——————-+————+——–+————-+<br>| goods_id | goods_name        | shop_price | cat_id | click_count |<br>+———-+——————-+————+——–+————-+<br>|        8 | 飞利浦9@9v        |     399.00 |      3 |          10 |<br>|       12 | 摩托罗拉a810      |     983.00 |      3 |          13 |<br>|       15 | 摩托罗拉a810      |     788.00 |      3 |           8 |<br>|       19 | 三星sgh-f258      |     858.00 |      3 |           7 |<br>|       20 | 三星bc01          |     280.00 |      3 |          14 |<br>|       22 | 多普达touch hd    |    5999.00 |      3 |          16 |<br>|       32 | 诺基亚n85         |    3010.00 |      3 |           9 |<br>+———-+——————-+————+——–+————-+<br>7 rows in set (0.00 sec)</p><p>mysql&gt; #最贵的商品的价格<br>mysql&gt; select max(shop_price) from goods;<br>+—————–+<br>| max(shop_price) |<br>+—————–+<br>|         5999.00 |<br>+—————–+<br>1 row in set (0.06 sec)</p><p>mysql&gt; #查询最便宜的商品的价格<br>mysql&gt; select min(shop_price) from goods ;<br>+—————–+<br>| min(shop_price) |<br>+—————–+<br>|           18.00 |<br>+—————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #查出最旧的商品<br>mysql&gt; select min(goods_id) from goods;<br>+—————+<br>| min(goods_id) |<br>+—————+<br>|             1 |<br>+—————+<br>1 row in set (0.10 sec)</p><p>mysql&gt; #goods_number是库存量<br>mysql&gt; select sum(goods_number) from goods<br>    -&gt; ;<br>+——————-+<br>| sum(goods_number) |<br>+——————-+<br>|               313 |<br>+——————-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #查看自己店里的商品的平均价格</p><p>mysql&gt; select avg(shop_price) from goods;<br>+—————–+<br>| avg(shop_price) |<br>+—————–+<br>|     1232.526774 |<br>+—————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #统计多少种商品<br>mysql&gt; select count(<em>) from goods;<br>+———-+<br>| count(</em>) |<br>+———-+<br>|       31 |<br>+———-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.17 sec)</p><p>mysql&gt; select * from t;<br>+——+————–+<br>| tid  | tname        |<br>+——+————–+<br>|    1 | 国安         |<br>|    2 | 申花         |<br>|    3 | 布尔联队     |<br>+——+————–+<br>3 rows in set (0.06 sec)</p><p>mysql&gt; #select count(<em>) from 表名,表示查询的是绝对的行数,哪怕某一行所有字段全为null的时候也能计算在内,<br>mysql&gt; #而select count(字段) from 表名 查询的是该列不为null的所有行的行数<br>mysql&gt; #用count(</em>)和count(1) 那个好,对于myisamm的表咩有区别,这种引擎计数器在维护,innodb的用count(*))直接读行数,效率很低<br>mysql&gt; #计算第三个栏目下所有商品的库存量之和<br>mysql&gt; select sum(goods_number) from goods where cat_id =3;<br>+——————-+<br>| sum(goods_number) |<br>+——————-+<br>|               203 |<br>+——————-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #计算每个栏目下的库存量之和<br>mysql&gt; select cat_id, sum(goods_number) from goods  group by cat_id ;<br>+——–+——————-+<br>| cat_id | sum(goods_number) |<br>+——–+——————-+<br>|      4 |                 3 |<br>|      8 |                61 |<br>|     11 |                23 |<br>|      3 |               203 |<br>|      2 |                 0 |<br>|      5 |                 8 |<br>|     13 |                 4 |<br>|     15 |                 2 |<br>|     14 |                 9 |<br>+——–+——————-+<br>9 rows in set (0.05 sec)</p><p>mysql&gt; #having 筛选<br>mysql&gt; #查询每种商品积压的货款<br>mysql&gt; show databases;<br>+——————–+<br>| Database           |<br>+——————–+<br>| bookstore          |<br>| clouddb01          |<br>| clouddb02          |<br>| clouddb03          |<br>| information_schema |<br>| mydb               |<br>| mysql              |<br>| performance_schema |<br>| shop               |<br>| ssm_crud           |<br>| struts             |<br>| student            |<br>| sys                |<br>| test               |<br>| test01             |<br>+——————–+<br>15 rows in set (0.00 sec)</p><p>mysql&gt; #查询每种商品积压的货款<br>mysql&gt; select market_price,shop_price, market_price-shop_price as discount from goods where 1 having discount &gt;200;<br>ERROR 1046 (3D000): No database selected<br>mysql&gt; use test01;<br>Database changed</p><p>mysql&gt; #查询每种商品积压的货款<br>mysql&gt; #提示: 商品的库存量*价格</p><p>mysql&gt; select goods_id ,shop_price,goods_number*shop_price as hk from goods;<br>+———-+————+———–+<br>| goods_id | shop_price | hk        |<br>+———-+————+———–+<br>|        1 |    1388.00 |   1388.00 |<br>|        4 |      58.00 |    986.00 |<br>|        3 |      68.00 |   1632.00 |<br>|        5 |      20.00 |    160.00 |<br>|        6 |      42.00 |    630.00 |<br>|        7 |     100.00 |   2000.00 |<br>|        8 |     399.00 |    399.00 |<br>|        9 |    2298.00 |   9192.00 |<br>|       10 |    1328.00 |   9296.00 |<br>|       11 |    1300.00 |   1300.00 |<br>|       12 |     983.00 |   7864.00 |<br>|       13 |    1311.00 |  10488.00 |<br>|       14 |    2625.00 |   2625.00 |<br>|       15 |     788.00 |   2364.00 |<br>|       16 |     823.33 |      0.00 |<br>|       17 |    2300.00 |   2300.00 |<br>|       18 |    2878.00 |   2878.00 |<br>|       19 |     858.00 |  10296.00 |<br>|       20 |     280.00 |   3360.00 |<br>|       21 |    2000.00 |  80000.00 |<br>|       22 |    5999.00 |   5999.00 |<br>|       23 |    3700.00 |  29600.00 |<br>|       24 |    2000.00 | 200000.00 |<br>|       25 |      48.00 |     96.00 |<br>|       26 |      19.00 |     38.00 |<br>|       27 |      95.00 |    190.00 |<br>|       28 |      45.00 |      0.00 |<br>|       29 |      90.00 |      0.00 |<br>|       30 |      18.00 |    162.00 |<br>|       31 |    1337.00 |   1337.00 |<br>|       32 |    3010.00 |  12040.00 |<br>+———-+————+———–+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; #查询该店积压的总货款<br>mysql&gt; select goods_number ,sum(goods_number*shop_price) as sum from goods;<br>+————–+———–+<br>| goods_number | sum       |<br>+————–+———–+<br>|            1 | 398620.00 |<br>+————–+———–+<br>1 row in set (0.07 sec)</p><p>mysql&gt; select sum(goods_number*shop_price) as sum from goods;<br>+———–+<br>| sum       |<br>+———–+<br>| 398620.00 |<br>+———–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #查询每个栏目下积压的k货款<br>mysql&gt; select cat_id, sum(goods_number*shop_price) as sum from goods group by cat_id;<br>+——–+———–+<br>| cat_id | sum       |<br>+——–+———–+<br>|      4 |   6891.00 |<br>|      8 |   4618.00 |<br>|     11 |    790.00 |<br>|      3 | 356235.00 |<br>|      2 |      0.00 |<br>|      5 |  29600.00 |<br>|     13 |    134.00 |<br>|     15 |    190.00 |<br>|     14 |    162.00 |<br>+——–+———–+<br>9 rows in set (0.03 sec)</p><p>mysql&gt; #查询栏目的积压货款金额,且查出挤压金额超出20000的货款<br>mysql&gt; select cat_id, sum(goods_number*shop_price) as sum from goods  group by cat_id having sum&gt;20000;<br>+——–+———–+<br>| cat_id | sum       |<br>+——–+———–+<br>|      3 | 356235.00 |<br>|      5 |  29600.00 |<br>+——–+———–+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; #查询本店市场价与本店价省的钱,且筛选出省钱200以上的商品<br>mysql&gt; select goods_name, market_price-shop_price as discount from goods having discount&gt;200;<br>ERROR 1690 (22003): DECIMAL UNSIGNED value is out of range in ‘(<code>test01</code>.<code>goods</code>.<code>market_price</code> - <code>test01</code>.<code>goods</code>.<code>shop_price</code>)’<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.14 sec)</p><p>mysql&gt; select * from result;<br>+——–+———+——-+<br>| name   | subject | score |<br>+——–+———+——-+<br>| 张三   | 数学    |    90 |<br>| 张三   | 语文    |    50 |<br>| 张三   | 地理    |    40 |<br>| 李四   | 语文    |    55 |<br>| 李四   | 政治    |    45 |<br>| 王五   | 政治    |    30 |<br>+——–+———+——-+<br>6 rows in set (0.07 sec)</p><p>mysql&gt; #查询出两门及两门以上不及格者的平均成绩<br>mysql&gt; select avg(score) as average ,subject from result where subject&gt;=2  group by name having average&lt;60;<br>Empty set, 6 warnings (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,subject from result group by name;<br>+———+———+<br>| average | subject |<br>+———+———+<br>| 60.0000 | 数学    |<br>| 50.0000 | 语文    |<br>| 30.0000 | 政治    |<br>+———+———+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result group by name;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>| 60.0000 | 张三   |<br>| 50.0000 | 李四   |<br>| 30.0000 | 王五   |<br>+———+——–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where 1  group by name;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>| 60.0000 | 张三   |<br>| 50.0000 | 李四   |<br>| 30.0000 | 王五   |<br>+———+——–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where 1  group by name having average&lt;60 ;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>| 50.0000 | 李四   |<br>| 30.0000 | 王五   |<br>+———+——–+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where score&lt;60  group by name having avg(average) ;<br>Empty set (0.00 sec)</p><p>mysql&gt; select avg(score&lt;60) as average ,name from result where 1  group by name having avg(average) ;<br>Empty set (0.00 sec)</p><p>mysql&gt; select avg(score&lt;60) as average ,name from result where 1  group by name ;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>|  0.6667 | 张三   |<br>|  1.0000 | 李四   |<br>|  1.0000 | 王五   |<br>+———+——–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where score&lt;60  group by name ;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>| 45.0000 | 张三   |<br>| 50.0000 | 李四   |<br>| 30.0000 | 王五   |<br>+———+——–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where subject&gt;=2  group by name ;<br>Empty set, 6 warnings (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) from result where score&lt;60  group by name ;<br>+———+——–+—————-+<br>| average | name   | count(subject) |<br>+———+——–+—————-+<br>| 45.0000 | 张三   |              2 |<br>| 50.0000 | 李四   |              2 |<br>| 30.0000 | 王五   |              1 |<br>+———+——–+—————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) as subject from result where score&lt;60   group by name having subject&gt;=2  ;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 45.0000 | 张三   |       2 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) as subject from result where score&lt;60   group by name having subject&gt;=2 and avg(average);<br>Empty set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject)&gt;=2 as subject from result where score&lt;60   group by name having avg(average);<br>Empty set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) as subject from result where score&lt;60   group by name having subject&gt;=2;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 45.0000 | 张三   |       2 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where score&lt;60  group by name ;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>| 45.0000 | 张三   |<br>| 50.0000 | 李四   |<br>| 30.0000 | 王五   |<br>+———+——–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) from result where score&lt;60  group by name ;<br>+———+——–+—————-+<br>| average | name   | count(subject) |<br>+———+——–+—————-+<br>| 45.0000 | 张三   |              2 |<br>| 50.0000 | 李四   |              2 |<br>| 30.0000 | 王五   |              1 |<br>+———+——–+—————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject)&gt;=2 from result where score&lt;60  group by name ;<br>+———+——–+——————-+<br>| average | name   | count(subject)&gt;=2 |<br>+———+——–+——————-+<br>| 45.0000 | 张三   |                 1 |<br>| 50.0000 | 李四   |                 1 |<br>| 30.0000 | 王五   |                 0 |<br>+———+——–+——————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject)&gt;=2 from result where score&lt;60  group by name ;<br>+———+——–+——————-+<br>| average | name   | count(subject)&gt;=2 |<br>+———+——–+——————-+<br>| 45.0000 | 张三   |                 1 |<br>| 50.0000 | 李四   |                 1 |<br>| 30.0000 | 王五   |                 0 |<br>+———+——–+——————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) from result where score&lt;60  group by name ;<br>+———+——–+—————-+<br>| average | name   | count(subject) |<br>+———+——–+—————-+<br>| 45.0000 | 张三   |              2 |<br>| 50.0000 | 李四   |              2 |<br>| 30.0000 | 王五   |              1 |<br>+———+——–+—————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where score&lt;60 and subject&gt;=2   group by name ;<br>Empty set, 5 warnings (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name, count(subject) from result where score&lt;60 and subject&gt;=2   group by name ;<br>Empty set, 5 warnings (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name, count(subject) from result where score&lt;60    group by name ;<br>+———+——–+—————-+<br>| average | name   | count(subject) |<br>+———+——–+—————-+<br>| 45.0000 | 张三   |              2 |<br>| 50.0000 | 李四   |              2 |<br>| 30.0000 | 王五   |              1 |<br>+———+——–+—————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name, count(subject) as subject from result where score&lt;60    group by name having subject&gt;=2  ;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 45.0000 | 张三   |       2 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; use test01<br>Database changed<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.42 sec)</p><p>mysql&gt; select avg(score) as average ,name, count(subject) as subject from result where score&lt;60    group by name having subject&gt;=2  ;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 45.0000 | 张三   |       2 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.14 sec)</p><p>mysql&gt; insert into resule values(“赵六”,”语文”,100),<br>    -&gt; (“赵六”,”数学”,99),<br>    -&gt; (“赵六”,”英语”,98);<br>ERROR 1146 (42S02): Table ‘test01.resule’ doesn’t exist<br>mysql&gt; insert into result values(“赵六”,”语文”,100),<br>    -&gt; (“赵六”,”数学”,99),<br>    -&gt; (“赵六”,”英语”,98);<br>Query OK, 3 rows affected (0.19 sec)<br>Records: 3  Duplicates: 0  Warnings: 0</p><p>mysql&gt; select * from result;<br>+——–+———+——-+<br>| name   | subject | score |<br>+——–+———+——-+<br>| 张三   | 数学    |    90 |<br>| 张三   | 语文    |    50 |<br>| 张三   | 地理    |    40 |<br>| 李四   | 语文    |    55 |<br>| 李四   | 政治    |    45 |<br>| 王五   | 政治    |    30 |<br>| 赵六   | 语文    |   100 |<br>| 赵六   | 数学    |    99 |<br>| 赵六   | 英语    |    98 |<br>+——–+———+——-+<br>9 rows in set (0.00 sec)</p><p>mysql&gt;  select avg(score) as average ,name, count(subject) as subject from result where score&lt;60    group by name having subject&gt;=2;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 45.0000 | 张三   |       2 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; insert into result values(“张三”,”英语”,34);<br>Query OK, 1 row affected (0.05 sec)</p><p>mysql&gt;  select avg(score) as average ,name, count(subject) as subject from result where score&lt;60    group by name having subject&gt;=2;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 41.3333 | 张三   |       3 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt;  select avg(score) as average ,name, sum(score&lt;60) as subject from result   group by name having subject&gt;=2;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 53.5000 | 张三   |       3 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt;  select avg(score) as average ,name, sum(score&lt;60) as subject from result   group by name having subject&gt;=2 order by average;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 50.0000 | 李四   |       2 |<br>| 53.5000 | 张三   |       3 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt;  select avg(score) as average ,name, sum(score&lt;60) as subject from result   group by name having subject&gt;=2 order by desc average;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘desc average’ at line 1<br>mysql&gt;  select avg(score) as average ,name, sum(score&lt;60) as subject from result   group by name having subject&gt;=2 order by  average desc;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 53.5000 | 张三   |       3 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; #降序排 order by 列名 desc 降序/asc升序<br>mysql&gt;  select avg(score) as average ,name, sum(score&lt;60) as subject from result   group by name having subject&gt;=2 order by  add_time asc;<br>ERROR 1054 (42S22): Unknown column ‘add_time’ in ‘order clause’<br>mysql&gt; desc goods;<br>+————–+————————+——+—–+———+—————-+<br>| Field        | Type                   | Null | Key | Default | Extra          |<br>+————–+————————+——+—–+———+—————-+<br>| goods_id     | mediumint(8) unsigned  | NO   | PRI | NULL    | auto_increment |<br>| goods_name   | varchar(120)           | NO   |     |         |                |<br>| cat_id       | smallint(5) unsigned   | NO   |     | 0       |                |<br>| brand_id     | smallint(5) unsigned   | NO   |     | 0       |                |<br>| goods_sn     | char(15)               | NO   |     |         |                |<br>| goods_number | smallint(5) unsigned   | NO   |     | 0       |                |<br>| shop_price   | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| market_price | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| click_count  | int(10) unsigned       | NO   |     | 0       |                |<br>+————–+————————+——+—–+———+—————-+<br>9 rows in set (0.20 sec)</p><p>mysql&gt; select goods_name ,cat_id,goods_id,shop_price from goods order by asc cat_id ,shop_price desc;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘asc cat_id ,shop_price desc’ at line 1<br>mysql&gt; select goods_name ,cat_id,goods_id,shop_price from goods order by  cat_id asc ,shop_price desc;<br>+—————————————-+——–+———-+————+<br>| goods_name                             | cat_id | goods_id | shop_price |<br>+—————————————-+——–+———-+————+<br>| 恒基伟业g101                           |      2 |       16 |     823.33 |<br>| 多普达touch hd                         |      3 |       22 |    5999.00 |<br>| 诺基亚n85                              |      3 |       32 |    3010.00 |<br>| 夏新n7                                 |      3 |       17 |    2300.00 |<br>| 诺基亚e66                              |      3 |        9 |    2298.00 |<br>| 金立 a30                               |      3 |       21 |    2000.00 |<br>| p806                                   |      3 |       24 |    2000.00 |<br>| 摩托罗拉e8                             |      3 |       31 |    1337.00 |<br>| 索爱c702c                              |      3 |       10 |    1328.00 |<br>| 诺基亚5320 xpressmusic                 |      3 |       13 |    1311.00 |<br>| 索爱c702c                              |      3 |       11 |    1300.00 |<br>| 摩托罗拉a810                           |      3 |       12 |     983.00 |<br>| 三星sgh-f258                           |      3 |       19 |     858.00 |<br>| 摩托罗拉a810                           |      3 |       15 |     788.00 |<br>| 飞利浦9@9v                             |      3 |        8 |     399.00 |<br>| 三星bc01                               |      3 |       20 |     280.00 |<br>| 夏新t5                                 |      4 |       18 |    2878.00 |<br>| 诺基亚5800xm                           |      4 |       14 |    2625.00 |<br>| kd876                                  |      4 |        1 |    1388.00 |<br>| 诺基亚n96                              |      5 |       23 |    3700.00 |<br>| 诺基亚n85原装立体声耳机hs-82           |      8 |        7 |     100.00 |<br>| 诺基亚原装5800耳机                     |      8 |        3 |      68.00 |<br>| 诺基亚n85原装充电器                    |      8 |        4 |      58.00 |<br>| 胜创kingmax内存卡                      |     11 |        6 |      42.00 |<br>| 索爱原装m2卡读卡器                     |     11 |        5 |      20.00 |<br>| 小灵通/固话50元充值卡                  |     13 |       25 |      48.00 |<br>| 小灵通/固话20元充值卡                  |     13 |       26 |      19.00 |<br>| 移动100元充值卡                        |     14 |       29 |      90.00 |<br>| 移动20元充值卡                         |     14 |       30 |      18.00 |<br>| 联通100元充值卡                        |     15 |       27 |      95.00 |<br>| 联通50元充值卡                         |     15 |       28 |      45.00 |<br>+—————————————-+——–+———-+————+<br>31 rows in set (0.26 sec)</p><p>mysql&gt; #多排 用,隔开 order by cat_id asc ,shop_price desc<br>mysql&gt; exit<br>mysql&gt; use test01;<br>Database changed<br>mysql&gt; #limit 限制条目<br>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods where cat_id=3 order by shop_price desc limit 0,3;<br>+———-+——–+——————-+————+<br>| goods_id | cat_id | goods_name        | shop_price |<br>+———-+——–+——————-+————+<br>|       22 |      3 | 多普达touch hd    |    5999.00 |<br>|       32 |      3 | 诺基亚n85         |    3010.00 |<br>|       17 |      3 | 夏新n7            |    2300.00 |<br>+———-+——–+——————-+————+<br>3 rows in set (0.01 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods where cat_id=3 order by shop_price desc limit 2,2;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       17 |      3 | 夏新n7       |    2300.00 |<br>|        9 |      3 | 诺基亚e66    |    2298.00 |<br>+———-+——–+————–+————+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods where cat_id=3 order by shop_price desc limit 2,3;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       17 |      3 | 夏新n7       |    2300.00 |<br>|        9 |      3 | 诺基亚e66    |    2298.00 |<br>|       21 |      3 | 金立 a30     |    2000.00 |<br>+———-+——–+————–+————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #limit 第一个参数为0可以不写<br>mysql&gt; #查询出每个栏目下id号最大的一条商品<br>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods where 1 group by cat_id order by goods_id desc limit 1;<br>+———-+——–+———————–+————+<br>| goods_id | cat_id | goods_name            | shop_price |<br>+———-+——–+———————–+————+<br>|       29 |     14 | 移动100元充值卡       |      90.00 |<br>+———-+——–+———————–+————+<br>1 row in set (0.06 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods where 1 group by cat_id ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods  group by cat_id ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,goods_name,shop_price from goods  group by cat_id ;<br>+——–+——————————–+————+<br>| cat_id | goods_name                     | shop_price |<br>+——–+——————————–+————+<br>|      4 | kd876                          |    1388.00 |<br>|      8 | 诺基亚n85原装充电器            |      58.00 |<br>|     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|      3 | 飞利浦9@9v                     |     399.00 |<br>|      2 | 恒基伟业g101                   |     823.33 |<br>|      5 | 诺基亚n96                      |    3700.00 |<br>|     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|     15 | 联通100元充值卡                |      95.00 |<br>|     14 | 移动100元充值卡                |      90.00 |<br>+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods   group by cat_id=3  ;<br>+———-+——–+—————+————+<br>| goods_id | cat_id | goods_name    | shop_price |<br>+———-+——–+—————+————+<br>|        1 |      4 | kd876         |    1388.00 |<br>|        8 |      3 | 飞利浦9@9v    |     399.00 |<br>+———-+——–+—————+————+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods group by cat_id ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods group by cat_id  order by cat_id asc ,goods_id desc ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|        1 |      4 | kd876                          |    1388.00 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as tem group by cat_id  ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.04 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as tem group by cat_id  order by cat_id asc ,goods_id desc limit 1  ;<br>+———-+——–+——————+————+<br>| goods_id | cat_id | goods_name       | shop_price |<br>+———-+——–+——————+————+<br>|       16 |      2 | 恒基伟业g101     |     823.33 |<br>+———-+——–+——————+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as tem group by cat_id  order by cat_id asc ,goods_id desc ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|        1 |      4 | kd876                          |    1388.00 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as temp order by cat_id asc ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as temp group by cat_id order by cat_id asc ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|        1 |      4 | kd876                          |    1388.00 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as temp group by cat_id  ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods where cat_id=3 order by goods_id desc limit 1 ;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       32 |      3 | 诺基亚n85    |    3010.00 |<br>+———-+——–+————–+————+<br>1 row in set (0.07 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods  order by goods_id desc limit 1 ;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       32 |      3 | 诺基亚n85    |    3010.00 |<br>+———-+——–+————–+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods  order by goods_id desc limit 1 ;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       32 |      3 | 诺基亚n85    |    3010.00 |<br>+———-+——–+————–+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods  order by goods_id desc  ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods group by cat_id  order by goods_id desc  ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        1 |      4 | kd876                          |    1388.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods group by cat_id  ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods group by cat_id  order by goods_id desc  ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        1 |      4 | kd876                          |    1388.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods  order by goods_id desc limit 1 ;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       32 |      3 | 诺基亚n85    |    3010.00 |<br>+———-+——–+————–+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select max(goods_id), cat_id,goods_name,shop_price from goods  order by goods_id desc ;<br>+—————+——–+————+————+<br>| max(goods_id) | cat_id | goods_name | shop_price |<br>+—————+——–+————+————+<br>|            32 |      4 | kd876      |    1388.00 |<br>+—————+——–+————+————+<br>1 row in set (0.06 sec)</p><p>mysql&gt; select goods_id ,cat_id ,goods_name from goods<br>    -&gt; ;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|        1 |      4 | kd876                                  |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|        9 |      3 | 诺基亚e66                              |<br>|       10 |      3 | 索爱c702c                              |<br>|       11 |      3 | 索爱c702c                              |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       16 |      2 | 恒基伟业g101                           |<br>|       17 |      3 | 夏新n7                                 |<br>|       18 |      4 | 夏新t5                                 |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       20 |      3 | 三星bc01                               |<br>|       21 |      3 | 金立 a30                               |<br>|       22 |      3 | 多普达touch hd                         |<br>|       23 |      5 | 诺基亚n96                              |<br>|       24 |      3 | p806                                   |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       27 |     15 | 联通100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       32 |      3 | 诺基亚n85                              |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select max(goods_id), cat_id,goods_name,shop_price from goods group by cat_id ;<br>+—————+——–+——————————–+————+<br>| max(goods_id) | cat_id | goods_name                     | shop_price |<br>+—————+——–+——————————–+————+<br>|            18 |      4 | kd876                          |    1388.00 |<br>|             7 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|             6 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|            32 |      3 | 飞利浦9@9v                     |     399.00 |<br>|            16 |      2 | 恒基伟业g101                   |     823.33 |<br>|            23 |      5 | 诺基亚n96                      |    3700.00 |<br>|            26 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|            28 |     15 | 联通100元充值卡                |      95.00 |<br>|            30 |     14 | 移动100元充值卡                |      90.00 |<br>+—————+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select max(goods_id), cat_id from goods group by cat_id ;<br>+—————+——–+<br>| max(goods_id) | cat_id |<br>+—————+——–+<br>|            18 |      4 |<br>|             7 |      8 |<br>|             6 |     11 |<br>|            32 |      3 |<br>|            16 |      2 |<br>|            23 |      5 |<br>|            26 |     13 |<br>|            28 |     15 |<br>|            30 |     14 |<br>+—————+——–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select max(goods_id) as goods_id, cat_id from goods group by cat_id ) as temp where cat_id=cat_id ;<br>+———-+——–+<br>| goods_id | cat_id |<br>+———-+——–+<br>|       18 |      4 |<br>|        7 |      8 |<br>|        6 |     11 |<br>|       32 |      3 |<br>|       16 |      2 |<br>|       23 |      5 |<br>|       26 |     13 |<br>|       28 |     15 |<br>|       30 |     14 |<br>+———-+——–+<br>9 rows in set (0.06 sec)</p><p>mysql&gt; select cat_id ,count(goods_name) from goods group by cat_id;<br>+——–+——————-+<br>| cat_id | count(goods_name) |<br>+——–+——————-+<br>|      4 |                 3 |<br>|      8 |                 3 |<br>|     11 |                 2 |<br>|      3 |                15 |<br>|      2 |                 1 |<br>|      5 |                 1 |<br>|     13 |                 2 |<br>|     15 |                 2 |<br>|     14 |                 2 |<br>+——–+——————-+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id) from goods group by cat_id;<br>+——–+—————+<br>| cat_id | max(goods_id) |<br>+——–+—————+<br>|      4 |            18 |<br>|      8 |             7 |<br>|     11 |             6 |<br>|      3 |            32 |<br>|      2 |            16 |<br>|      5 |            23 |<br>|     13 |            26 |<br>|     15 |            28 |<br>|     14 |            30 |<br>+——–+—————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id),max(goods_name) from goods group by cat_id;<br>+——–+—————+——————————–+<br>| cat_id | max(goods_id) | max(goods_name)                |<br>+——–+—————+——————————–+<br>|      4 |            18 | 诺基亚5800xm                   |<br>|      8 |             7 | 诺基亚原装5800耳机             |<br>|     11 |             6 | 胜创kingmax内存卡              |<br>|      3 |            32 | 飞利浦9@9v                     |<br>|      2 |            16 | 恒基伟业g101                   |<br>|      5 |            23 | 诺基亚n96                      |<br>|     13 |            26 | 小灵通/固话50元充值卡          |<br>|     15 |            28 | 联通50元充值卡                 |<br>|     14 |            30 | 移动20元充值卡                 |<br>+——–+—————+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id) from goods ;<br>+——–+—————+<br>| cat_id | max(goods_id) |<br>+——–+—————+<br>|      4 |            32 |<br>+——–+—————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select cat_id, goods_id,goods_name from goods order by goods_id desc ;<br>+——–+———-+—————————————-+<br>| cat_id | goods_id | goods_name                             |<br>+——–+———-+—————————————-+<br>|      3 |       32 | 诺基亚n85                              |<br>|      3 |       31 | 摩托罗拉e8                             |<br>|     14 |       30 | 移动20元充值卡                         |<br>|     14 |       29 | 移动100元充值卡                        |<br>|     15 |       28 | 联通50元充值卡                         |<br>|     15 |       27 | 联通100元充值卡                        |<br>|     13 |       26 | 小灵通/固话20元充值卡                  |<br>|     13 |       25 | 小灵通/固话50元充值卡                  |<br>|      3 |       24 | p806                                   |<br>|      5 |       23 | 诺基亚n96                              |<br>|      3 |       22 | 多普达touch hd                         |<br>|      3 |       21 | 金立 a30                               |<br>|      3 |       20 | 三星bc01                               |<br>|      3 |       19 | 三星sgh-f258                           |<br>|      4 |       18 | 夏新t5                                 |<br>|      3 |       17 | 夏新n7                                 |<br>|      2 |       16 | 恒基伟业g101                           |<br>|      3 |       15 | 摩托罗拉a810                           |<br>|      4 |       14 | 诺基亚5800xm                           |<br>|      3 |       13 | 诺基亚5320 xpressmusic                 |<br>|      3 |       12 | 摩托罗拉a810                           |<br>|      3 |       11 | 索爱c702c                              |<br>|      3 |       10 | 索爱c702c                              |<br>|      3 |        9 | 诺基亚e66                              |<br>|      3 |        8 | 飞利浦9@9v                             |<br>|      8 |        7 | 诺基亚n85原装立体声耳机hs-82           |<br>|     11 |        6 | 胜创kingmax内存卡                      |<br>|     11 |        5 | 索爱原装m2卡读卡器                     |<br>|      8 |        4 | 诺基亚n85原装充电器                    |<br>|      8 |        3 | 诺基亚原装5800耳机                     |<br>|      4 |        1 | kd876                                  |<br>+——–+———-+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id) from goods ;<br>+——–+—————+<br>| cat_id | max(goods_id) |<br>+——–+—————+<br>|      4 |            32 |<br>+——–+—————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select cat_id, goods_id,goods_name from goods order by goods_id desc ;<br>+——–+———-+—————————————-+<br>| cat_id | goods_id | goods_name                             |<br>+——–+———-+—————————————-+<br>|      3 |       32 | 诺基亚n85                              |<br>|      3 |       31 | 摩托罗拉e8                             |<br>|     14 |       30 | 移动20元充值卡                         |<br>|     14 |       29 | 移动100元充值卡                        |<br>|     15 |       28 | 联通50元充值卡                         |<br>|     15 |       27 | 联通100元充值卡                        |<br>|     13 |       26 | 小灵通/固话20元充值卡                  |<br>|     13 |       25 | 小灵通/固话50元充值卡                  |<br>|      3 |       24 | p806                                   |<br>|      5 |       23 | 诺基亚n96                              |<br>|      3 |       22 | 多普达touch hd                         |<br>|      3 |       21 | 金立 a30                               |<br>|      3 |       20 | 三星bc01                               |<br>|      3 |       19 | 三星sgh-f258                           |<br>|      4 |       18 | 夏新t5                                 |<br>|      3 |       17 | 夏新n7                                 |<br>|      2 |       16 | 恒基伟业g101                           |<br>|      3 |       15 | 摩托罗拉a810                           |<br>|      4 |       14 | 诺基亚5800xm                           |<br>|      3 |       13 | 诺基亚5320 xpressmusic                 |<br>|      3 |       12 | 摩托罗拉a810                           |<br>|      3 |       11 | 索爱c702c                              |<br>|      3 |       10 | 索爱c702c                              |<br>|      3 |        9 | 诺基亚e66                              |<br>|      3 |        8 | 飞利浦9@9v                             |<br>|      8 |        7 | 诺基亚n85原装立体声耳机hs-82           |<br>|     11 |        6 | 胜创kingmax内存卡                      |<br>|     11 |        5 | 索爱原装m2卡读卡器                     |<br>|      8 |        4 | 诺基亚n85原装充电器                    |<br>|      8 |        3 | 诺基亚原装5800耳机                     |<br>|      4 |        1 | kd876                                  |<br>+——–+———-+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id) from goods ;<br>+——–+—————+<br>| cat_id | max(goods_id) |<br>+——–+—————+<br>|      4 |            32 |<br>+——–+—————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id) from goods group by cat_id;<br>+——–+—————+<br>| cat_id | max(goods_id) |<br>+——–+—————+<br>|      4 |            18 |<br>|      8 |             7 |<br>|     11 |             6 |<br>|      3 |            32 |<br>|      2 |            16 |<br>|      5 |            23 |<br>|     13 |            26 |<br>|     15 |            28 |<br>|     14 |            30 |<br>+——–+—————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id ,goods_name,cat_id from goods where goods_id in(select max(goods_id) from goods group by cat_id) ;<br>+———-+—————————————-+——–+<br>| goods_id | goods_name                             | cat_id |<br>+———-+—————————————-+——–+<br>|        6 | 胜创kingmax内存卡                      |     11 |<br>|        7 | 诺基亚n85原装立体声耳机hs-82           |      8 |<br>|       16 | 恒基伟业g101                           |      2 |<br>|       18 | 夏新t5                                 |      4 |<br>|       23 | 诺基亚n96                              |      5 |<br>|       26 | 小灵通/固话20元充值卡                  |     13 |<br>|       28 | 联通50元充值卡                         |     15 |<br>|       30 | 移动20元充值卡                         |     14 |<br>|       32 | 诺基亚n85                              |      3 |<br>+———-+—————————————-+——–+<br>9 rows in set (0.06 sec)</p><p>mysql&gt; select * from(select goods_id,cat_id ,goods_name from goods order by goods_id desc ) as temp  group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select * from(select goods_id,cat_id ,goods_name from goods order by goods_id desc)  as temp  group by temp.cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id ,goods_name from goods order by goods_id desc;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       32 |      3 | 诺基亚n85                              |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       27 |     15 | 联通100元充值卡                        |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       24 |      3 | p806                                   |<br>|       23 |      5 | 诺基亚n96                              |<br>|       22 |      3 | 多普达touch hd                         |<br>|       21 |      3 | 金立 a30                               |<br>|       20 |      3 | 三星bc01                               |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       18 |      4 | 夏新t5                                 |<br>|       17 |      3 | 夏新n7                                 |<br>|       16 |      2 | 恒基伟业g101                           |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       11 |      3 | 索爱c702c                              |<br>|       10 |      3 | 索爱c702c                              |<br>|        9 |      3 | 诺基亚e66                              |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        1 |      4 | kd876                                  |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,goods_name from (select goods_id,cat_id ,goods_name from goods order by goods_id desc) as temp group by cat_id;<br>+——–+——————————–+<br>| cat_id | goods_name                     |<br>+——–+——————————–+<br>|      4 | kd876                          |<br>|      8 | 诺基亚n85原装充电器            |<br>|     11 | 索爱原装m2卡读卡器             |<br>|      3 | 飞利浦9@9v                     |<br>|      2 | 恒基伟业g101                   |<br>|      5 | 诺基亚n96                      |<br>|     13 | 小灵通/固话50元充值卡          |<br>|     15 | 联通100元充值卡                |<br>|     14 | 移动100元充值卡                |<br>+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select temp.cat_id,goods_name from (select goods_id,cat_id ,goods_name from goods order by goods_id desc) as temp group by temp.cat_id;<br>+——–+——————————–+<br>| cat_id | goods_name                     |<br>+——–+——————————–+<br>|      4 | kd876                          |<br>|      8 | 诺基亚n85原装充电器            |<br>|     11 | 索爱原装m2卡读卡器             |<br>|      3 | 飞利浦9@9v                     |<br>|      2 | 恒基伟业g101                   |<br>|      5 | 诺基亚n96                      |<br>|     13 | 小灵通/固话50元充值卡          |<br>|     15 | 联通100元充值卡                |<br>|     14 | 移动100元充值卡                |<br>+——–+——————————–+<br>9 rows in set (0.05 sec)</p><p>mysql&gt; #子查询<br>mysql&gt; #查询商品id最大的商品不用排序<br>mysql&gt; select goods_id ,cat_id ,goods_name from goods where goods_id=(select max(goods_id) from goods);<br>+———-+——–+————–+<br>| goods_id | cat_id | goods_name   |<br>+———-+——–+————–+<br>|       32 |      3 | 诺基亚n85    |<br>+———-+——–+————–+<br>1 row in set (0.05 sec)</p><p>mysql&gt; #如果where型子查询 即where 列=(内层sql 返回的是必是单行单列单个值,) 若where 列 in(内层sql)只能是单列多行<br>mysql&gt; #from型子查询,内部查询的结果当作外部查询的表s<br>mysql&gt; select goods_id ,cat_id ,goods_name from (select goods_id ,cat_id ,goods_name from goods order by cat_id asc,goods_id desc) as temp group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id ,cat_id ,goods_name from goods order by cat_id asc,goods_id desc;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       24 |      3 | p806                                   |<br>|       22 |      3 | 多普达touch hd                         |<br>|       21 |      3 | 金立 a30                               |<br>|       20 |      3 | 三星bc01                               |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       17 |      3 | 夏新n7                                 |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       11 |      3 | 索爱c702c                              |<br>|       10 |      3 | 索爱c702c                              |<br>|        9 |      3 | 诺基亚e66                              |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|       18 |      4 | 夏新t5                                 |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|        1 |      4 | kd876                                  |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       27 |     15 | 联通100元充值卡                        |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id ,cat_id ,goods_name from goods order by cat_id asc,goods_id desc) as temp group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id ,cat_id ,goods_name from goods order by cat_id asc,goods_id desc) as temp group by temp.cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from (select goods_id as goods_id ,cat_id as cat_id ,goods_name as goods_name from goods order by cat_id asc,goods_id desc) as temp group by temp.cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id, goods_name from (select goods_id, goods_name, cat_id from goods order by cat_id asc, goods_id desc) as tmp group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; exit<br>mysql&gt; show databases;<br>+——————–+<br>| Database           |<br>+——————–+<br>| bookstore          |<br>| clouddb01          |<br>| clouddb02          |<br>| clouddb03          |<br>| information_schema |<br>| mydb               |<br>| mysql              |<br>| performance_schema |<br>| shop               |<br>| ssm_crud           |<br>| struts             |<br>| student            |<br>| sys                |<br>| test               |<br>| test01             |<br>+——————–+<br>15 rows in set (0.35 sec)</p><p>mysql&gt; use test01;<br>Database changed<br>mysql&gt; select goods_id,cat_id,goods_name from goods order by goods_id desc ,cat_id asc;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       32 |      3 | 诺基亚n85                              |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       27 |     15 | 联通100元充值卡                        |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       24 |      3 | p806                                   |<br>|       23 |      5 | 诺基亚n96                              |<br>|       22 |      3 | 多普达touch hd                         |<br>|       21 |      3 | 金立 a30                               |<br>|       20 |      3 | 三星bc01                               |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       18 |      4 | 夏新t5                                 |<br>|       17 |      3 | 夏新n7                                 |<br>|       16 |      2 | 恒基伟业g101                           |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       11 |      3 | 索爱c702c                              |<br>|       10 |      3 | 索爱c702c                              |<br>|        9 |      3 | 诺基亚e66                              |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        1 |      4 | kd876                                  |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from  goods order by cat_id  desc ;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       27 |     15 | 联通100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|       23 |      5 | 诺基亚n96                              |<br>|        1 |      4 | kd876                                  |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|       18 |      4 | 夏新t5                                 |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|        9 |      3 | 诺基亚e66                              |<br>|       10 |      3 | 索爱c702c                              |<br>|       11 |      3 | 索爱c702c                              |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       17 |      3 | 夏新n7                                 |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       20 |      3 | 三星bc01                               |<br>|       21 |      3 | 金立 a30                               |<br>|       22 |      3 | 多普达touch hd                         |<br>|       24 |      3 | p806                                   |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       32 |      3 | 诺基亚n85                              |<br>|       16 |      2 | 恒基伟业g101                           |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from(select goods_id,cat_id,goods_name from goods order by cat_id,goods_id desc) as tmp;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       24 |      3 | p806                                   |<br>|       22 |      3 | 多普达touch hd                         |<br>|       21 |      3 | 金立 a30                               |<br>|       20 |      3 | 三星bc01                               |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       17 |      3 | 夏新n7                                 |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       11 |      3 | 索爱c702c                              |<br>|       10 |      3 | 索爱c702c                              |<br>|        9 |      3 | 诺基亚e66                              |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|       18 |      4 | 夏新t5                                 |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|        1 |      4 | kd876                                  |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       27 |     15 | 联通100元充值卡                        |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from(select goods_id,cat_id,goods_name from goods order by cat_id,goods_id desc) as tmp group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; desc goods;<br>+————–+————————+——+—–+———+—————-+<br>| Field        | Type                   | Null | Key | Default | Extra          |<br>+————–+————————+——+—–+———+—————-+<br>| goods_id     | mediumint(8) unsigned  | NO   | PRI | NULL    | auto_increment |<br>| goods_name   | varchar(120)           | NO   |     |         |                |<br>| cat_id       | smallint(5) unsigned   | NO   |     | 0       |                |<br>| brand_id     | smallint(5) unsigned   | NO   |     | 0       |                |<br>| goods_sn     | char(15)               | NO   |     |         |                |<br>| goods_number | smallint(5) unsigned   | NO   |     | 0       |                |<br>| shop_price   | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| market_price | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| click_count  | int(10) unsigned       | NO   |     | 0       |                |<br>+————–+————————+——+—–+———+—————-+<br>9 rows in set (0.18 sec)</p><p>mysql&gt; alter table goods add index cat(cat_id);<br>Query OK, 31 rows affected (1.05 sec)<br>Records: 31  Duplicates: 0  Warnings: 0</p><p>mysql&gt; select goods_id,cat_id,goods_name from(select goods_id,cat_id,goods_name from goods order by cat_id,goods_id desc) as tmp group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|       16 |      2 | 恒基伟业g101                   |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|        1 |      4 | kd876                          |<br>|       23 |      5 | 诺基亚n96                      |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       29 |     14 | 移动100元充值卡                |<br>|       27 |     15 | 联通100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from(select goods_id,cat_id,goods_name from goods order by cat_id,goods_id desc limit 1000) as tmp group by cat_id;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       18 |      4 | 夏新t5                                 |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       28 |     15 | 联通50元充值卡                         |<br>+———-+——–+—————————————-+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from goods where goods_id in(select max(goods_id) from goods group by cat_id) group by cat_id;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       18 |      4 | 夏新t5                                 |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       28 |     15 | 联通50元充值卡                         |<br>+———-+——–+—————————————-+<br>9 rows in set (0.04 sec)</p><p>mysql&gt; #exits子查询<br>mysql&gt; #from子查询的排序要加limit<br>mysql&gt; #exists 存在,exists 子查询<br>mysql&gt; #查出有商品的栏目<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.06 sec)</p><p>mysql&gt; desc category;<br>+———–+———————-+——+—–+———+—————-+<br>| Field     | Type                 | Null | Key | Default | Extra          |<br>+———–+———————-+——+—–+———+—————-+<br>| cat_id    | smallint(5) unsigned | NO   | PRI | NULL    | auto_increment |<br>| cat_name  | varchar(90)          | NO   |     |         |                |<br>| parent_id | smallint(5) unsigned | YES  |     | NULL    |                |<br>+———–+———————-+——+—–+———+—————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select * from  category;<br>+——–+—————————+———–+<br>| cat_id | cat_name                  | parent_id |<br>+——–+—————————+———–+<br>|      1 | 手机类型                  |         0 |<br>|      2 | CDMA手机                  |         1 |<br>|      3 | GSM手机                   |         1 |<br>|      4 | 3G手机                    |         1 |<br>|      5 | 双模手机                  |         1 |<br>|      6 | 手机配件                  |         0 |<br>|      7 | 充电器                    |         6 |<br>|      8 | 耳机                      |         6 |<br>|      9 | 电池                      |         6 |<br>|     11 | 读卡器和内存卡            |         6 |<br>|     12 | 充值卡                    |         0 |<br>|     13 | 小灵通/固话充值卡         |        12 |<br>|     14 | 移动手机充值卡            |        12 |<br>|     15 | 联通手机充值卡            |        12 |<br>+——–+—————————+———–+<br>14 rows in set (0.07 sec)</p><p>mysql&gt; desc goods;<br>+————–+————————+——+—–+———+—————-+<br>| Field        | Type                   | Null | Key | Default | Extra          |<br>+————–+————————+——+—–+———+—————-+<br>| goods_id     | mediumint(8) unsigned  | NO   | PRI | NULL    | auto_increment |<br>| goods_name   | varchar(120)           | NO   |     |         |                |<br>| cat_id       | smallint(5) unsigned   | NO   | MUL | 0       |                |<br>| brand_id     | smallint(5) unsigned   | NO   |     | 0       |                |<br>| goods_sn     | char(15)               | NO   |     |         |                |<br>| goods_number | smallint(5) unsigned   | NO   |     | 0       |                |<br>| shop_price   | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| market_price | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| click_count  | int(10) unsigned       | NO   |     | 0       |                |<br>+————–+————————+——+—–+———+—————-+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; show index from goods;<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment | Visible |<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>| goods |          0 | PRIMARY  |            1 | goods_id    | A         |          31 |     NULL |   NULL |      | BTREE      |         |               | YES     |<br>| goods |          1 | cat      |            1 | cat_id      | A         |        NULL |     NULL |   NULL |      | BTREE      |         |               | YES     |<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>2 rows in set (0.17 sec)</p><p>mysql&gt; drop index cat on goods;<br>Query OK, 31 rows affected (0.55 sec)<br>Records: 31  Duplicates: 0  Warnings: 0</p><p>mysql&gt; show index from goods;<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment | Visible |<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>| goods |          0 | PRIMARY  |            1 | goods_id    | A         |          31 |     NULL |   NULL |      | BTREE      |         |               | YES     |<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>1 row in set (0.00 sec)</p><p>mysql&gt; desc goods;<br>+————–+————————+——+—–+———+—————-+<br>| Field        | Type                   | Null | Key | Default | Extra          |<br>+————–+————————+——+—–+———+—————-+<br>| goods_id     | mediumint(8) unsigned  | NO   | PRI | NULL    | auto_increment |<br>| goods_name   | varchar(120)           | NO   |     |         |                |<br>| cat_id       | smallint(5) unsigned   | NO   |     | 0       |                |<br>| brand_id     | smallint(5) unsigned   | NO   |     | 0       |                |<br>| goods_sn     | char(15)               | NO   |     |         |                |<br>| goods_number | smallint(5) unsigned   | NO   |     | 0       |                |<br>| shop_price   | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| market_price | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| click_count  | int(10) unsigned       | NO   |     | 0       |                |<br>+————–+————————+——+—–+———+—————-+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; desc category;<br>+———–+———————-+——+—–+———+—————-+<br>| Field     | Type                 | Null | Key | Default | Extra          |<br>+———–+———————-+——+—–+———+—————-+<br>| cat_id    | smallint(5) unsigned | NO   | PRI | NULL    | auto_increment |<br>| cat_name  | varchar(90)          | NO   |     |         |                |<br>| parent_id | smallint(5) unsigned | YES  |     | NULL    |                |<br>+———–+———————-+——+—–+———+—————-+<br>3 rows in set (0.03 sec)</p><p>mysql&gt; select cat_name from category;<br>+—————————+<br>| cat_name                  |<br>+—————————+<br>| 手机类型                  |<br>| CDMA手机                  |<br>| GSM手机                   |<br>| 3G手机                    |<br>| 双模手机                  |<br>| 手机配件                  |<br>| 充电器                    |<br>| 耳机                      |<br>| 电池                      |<br>| 读卡器和内存卡            |<br>| 充值卡                    |<br>| 小灵通/固话充值卡         |<br>| 移动手机充值卡            |<br>| 联通手机充值卡            |<br>+—————————+<br>14 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,cat_name from category where exists(select * from goods where category.cat_id=goods_id);<br>+——–+—————————+<br>| cat_id | cat_name                  |<br>+——–+—————————+<br>|      1 | 手机类型                  |<br>|      3 | GSM手机                   |<br>|      4 | 3G手机                    |<br>|      5 | 双模手机                  |<br>|      6 | 手机配件                  |<br>|      7 | 充电器                    |<br>|      8 | 耳机                      |<br>|      9 | 电池                      |<br>|     11 | 读卡器和内存卡            |<br>|     12 | 充值卡                    |<br>|     13 | 小灵通/固话充值卡         |<br>|     14 | 移动手机充值卡            |<br>|     15 | 联通手机充值卡            |<br>+——–+—————————+<br>13 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,cat_name from category where exists(select * from goods where category.cat_id=goods.cat_id);<br>+——–+—————————+<br>| cat_id | cat_name                  |<br>+——–+—————————+<br>|      2 | CDMA手机                  |<br>|      3 | GSM手机                   |<br>|      4 | 3G手机                    |<br>|      5 | 双模手机                  |<br>|      8 | 耳机                      |<br>|     11 | 读卡器和内存卡            |<br>|     13 | 小灵通/固话充值卡         |<br>|     14 | 移动手机充值卡            |<br>|     15 | 联通手机充值卡            |<br>+——–+—————————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; #为什么建表时加not null或default 0  ,不想出现null值<br>mysql&gt; #null判断只能用 is null 或is not nul<br>mysql&gt;<br>mysql&gt; #效率不高,影响索引效率<br>mysql&gt; select 100000<em>232344242<br>    -&gt; ;<br>+——————+<br>| 100000</em>232344242 |<br>+——————+<br>|   23234424200000 |<br>+——————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #左连接的语法<br>mysql&gt; a表不动,b表在右边滑动<br>    -&gt; #<br>    -&gt; \n<br>ERROR:<br>Unknown command ‘\n’.<br>    -&gt; ;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘a表不动,b表在右边滑动</p><p>\n’ at line 1<br>mysql&gt; #a表与b表通过什么关联行<br>mysql&gt; # a 表left join b on 条件 条件为真,则b表对应的行取出<br>mysql&gt; # a left join b on<br>mysql&gt; #将a left join b on 条件 设为c 表<br>mysql&gt; #可以对c表进行查询,可以查询a和b的列<br>mysql&gt; select  goods_id,cat_id,cat_name from goods left join category on goods.cat_id=category.cat_id;<br>ERROR 1052 (23000): Column ‘cat_id’ in field list is ambiguous<br>mysql&gt; select  goods_id,goods.cat_id,cat_name from goods left join category on goods.cat_id=category.cat_id;<br>+———-+——–+—————————+<br>| goods_id | cat_id | cat_name                  |<br>+———-+——–+—————————+<br>|        1 |      4 | 3G手机                    |<br>|        4 |      8 | 耳机                      |<br>|        3 |      8 | 耳机                      |<br>|        5 |     11 | 读卡器和内存卡            |<br>|        6 |     11 | 读卡器和内存卡            |<br>|        7 |      8 | 耳机                      |<br>|        8 |      3 | GSM手机                   |<br>|        9 |      3 | GSM手机                   |<br>|       10 |      3 | GSM手机                   |<br>|       11 |      3 | GSM手机                   |<br>|       12 |      3 | GSM手机                   |<br>|       13 |      3 | GSM手机                   |<br>|       14 |      4 | 3G手机                    |<br>|       15 |      3 | GSM手机                   |<br>|       16 |      2 | CDMA手机                  |<br>|       17 |      3 | GSM手机                   |<br>|       18 |      4 | 3G手机                    |<br>|       19 |      3 | GSM手机                   |<br>|       20 |      3 | GSM手机                   |<br>|       21 |      3 | GSM手机                   |<br>|       22 |      3 | GSM手机                   |<br>|       23 |      5 | 双模手机                  |<br>|       24 |      3 | GSM手机                   |<br>|       25 |     13 | 小灵通/固话充值卡         |<br>|       26 |     13 | 小灵通/固话充值卡         |<br>|       27 |     15 | 联通手机充值卡            |<br>|       28 |     15 | 联通手机充值卡            |<br>|       29 |     14 | 移动手机充值卡            |<br>|       30 |     14 | 移动手机充值卡            |<br>|       31 |      3 | GSM手机                   |<br>|       32 |      3 | GSM手机                   |<br>+———-+——–+—————————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select  goods_id,goods.cat_id,cat_name,goods_name from goods left join category on goods.cat_id=category.cat_id;<br>+———-+——–+—————————+—————————————-+<br>| goods_id | cat_id | cat_name                  | goods_name                             |<br>+———-+——–+—————————+—————————————-+<br>|        1 |      4 | 3G手机                    | kd876                                  |<br>|        4 |      8 | 耳机                      | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 耳机                      | 诺基亚原装5800耳机                     |<br>|        5 |     11 | 读卡器和内存卡            | 索爱原装m2卡读卡器                     |<br>|        6 |     11 | 读卡器和内存卡            | 胜创kingmax内存卡                      |<br>|        7 |      8 | 耳机                      | 诺基亚n85原装立体声耳机hs-82           |<br>|        8 |      3 | GSM手机                   | 飞利浦9@9v                             |<br>|        9 |      3 | GSM手机                   | 诺基亚e66                              |<br>|       10 |      3 | GSM手机                   | 索爱c702c                              |<br>|       11 |      3 | GSM手机                   | 索爱c702c                              |<br>|       12 |      3 | GSM手机                   | 摩托罗拉a810                           |<br>|       13 |      3 | GSM手机                   | 诺基亚5320 xpressmusic                 |<br>|       14 |      4 | 3G手机                    | 诺基亚5800xm                           |<br>|       15 |      3 | GSM手机                   | 摩托罗拉a810                           |<br>|       16 |      2 | CDMA手机                  | 恒基伟业g101                           |<br>|       17 |      3 | GSM手机                   | 夏新n7                                 |<br>|       18 |      4 | 3G手机                    | 夏新t5                                 |<br>|       19 |      3 | GSM手机                   | 三星sgh-f258                           |<br>|       20 |      3 | GSM手机                   | 三星bc01                               |<br>|       21 |      3 | GSM手机                   | 金立 a30                               |<br>|       22 |      3 | GSM手机                   | 多普达touch hd                         |<br>|       23 |      5 | 双模手机                  | 诺基亚n96                              |<br>|       24 |      3 | GSM手机                   | p806                                   |<br>|       25 |     13 | 小灵通/固话充值卡         | 小灵通/固话50元充值卡                  |<br>|       26 |     13 | 小灵通/固话充值卡         | 小灵通/固话20元充值卡                  |<br>|       27 |     15 | 联通手机充值卡            | 联通100元充值卡                        |<br>|       28 |     15 | 联通手机充值卡            | 联通50元充值卡                         |<br>|       29 |     14 | 移动手机充值卡            | 移动100元充值卡                        |<br>|       30 |     14 | 移动手机充值卡            | 移动20元充值卡                         |<br>|       31 |      3 | GSM手机                   | 摩托罗拉e8                             |<br>|       32 |      3 | GSM手机                   | 诺基亚n85                              |<br>+———-+——–+—————————+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select  goods_id,goods.cat_id,goods_name,cat_name from goods left join category on goods.cat_id=category.cat_id;<br>+———-+——–+—————————————-+—————————+<br>| goods_id | cat_id | goods_name                             | cat_name                  |<br>+———-+——–+—————————————-+—————————+<br>|        1 |      4 | kd876                                  | 3G手机                    |<br>|        4 |      8 | 诺基亚n85原装充电器                    | 耳机                      |<br>|        3 |      8 | 诺基亚原装5800耳机                     | 耳机                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     | 读卡器和内存卡            |<br>|        6 |     11 | 胜创kingmax内存卡                      | 读卡器和内存卡            |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           | 耳机                      |<br>|        8 |      3 | 飞利浦9@9v                             | GSM手机                   |<br>|        9 |      3 | 诺基亚e66                              | GSM手机                   |<br>|       10 |      3 | 索爱c702c                              | GSM手机                   |<br>|       11 |      3 | 索爱c702c                              | GSM手机                   |<br>|       12 |      3 | 摩托罗拉a810                           | GSM手机                   |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 | GSM手机                   |<br>|       14 |      4 | 诺基亚5800xm                           | 3G手机                    |<br>|       15 |      3 | 摩托罗拉a810                           | GSM手机                   |<br>|       16 |      2 | 恒基伟业g101                           | CDMA手机                  |<br>|       17 |      3 | 夏新n7                                 | GSM手机                   |<br>|       18 |      4 | 夏新t5                                 | 3G手机                    |<br>|       19 |      3 | 三星sgh-f258                           | GSM手机                   |<br>|       20 |      3 | 三星bc01                               | GSM手机                   |<br>|       21 |      3 | 金立 a30                               | GSM手机                   |<br>|       22 |      3 | 多普达touch hd                         | GSM手机                   |<br>|       23 |      5 | 诺基亚n96                              | 双模手机                  |<br>|       24 |      3 | p806                                   | GSM手机                   |<br>|       25 |     13 | 小灵通/固话50元充值卡                  | 小灵通/固话充值卡         |<br>|       26 |     13 | 小灵通/固话20元充值卡                  | 小灵通/固话充值卡         |<br>|       27 |     15 | 联通100元充值卡                        | 联通手机充值卡            |<br>|       28 |     15 | 联通50元充值卡                         | 联通手机充值卡            |<br>|       29 |     14 | 移动100元充值卡                        | 移动手机充值卡            |<br>|       30 |     14 | 移动20元充值卡                         | 移动手机充值卡            |<br>|       31 |      3 | 摩托罗拉e8                             | GSM手机                   |<br>|       32 |      3 | 诺基亚n85                              | GSM手机                   |<br>+———-+——–+—————————————-+—————————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; #取出第四个栏目的商品以及商品的栏目名称<br>mysql&gt; select  goods_id,goods.cat_id,goods_name,cat_name from goods left join category on goods.cat_id=category.cat_id where goods.cat_id=4;<br>+———-+——–+—————–+———-+<br>| goods_id | cat_id | goods_name      | cat_name |<br>+———-+——–+—————–+———-+<br>|        1 |      4 | kd876           | 3G手机   |<br>|       14 |      4 | 诺基亚5800xm    | 3G手机   |<br>|       18 |      4 | 夏新t5          | 3G手机   |<br>+———-+——–+—————–+———-+<br>3 rows in set (0.07 sec)</p><p>mysql&gt; #左右连接,左连接即左表不动,<br>mysql&gt; #a left join b 并不是说 a 一定是在b的左边<br>mysql&gt; #左右连接可以互换, a left join b =b right join a<br>mysql&gt; # 内链接 特点 所有有配偶的男生/女生 走到舞台上来, 其 左表和右表不匹配的不能出现<br>mysql&gt; # 集合的角度看,内链接是左右连接的交集;<br>mysql&gt; # 外连接,求的是并集,但是在mysql中不支持<br>mysql&gt; #左连接<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.60 sec)</p><p>mysql&gt; select * from t;<br>+——+————–+<br>| tid  | tname        |<br>+——+————–+<br>|    1 | 国安         |<br>|    2 | 申花         |<br>|    3 | 布尔联队     |<br>+——+————–+<br>3 rows in set (0.40 sec)</p><p>mysql&gt; select * from m;<br>+——+——+——+——+————+<br>| mid  | hid  | gid  | mres | matime     |<br>+——+——+——+——+————+<br>|    1 |    1 |    2 | 2:0  | 2006-05-21 |<br>|    2 |    2 |    3 | 1:2  | 2006-06-21 |<br>|    3 |    3 |    1 | 2:5  | 2006-06-25 |<br>|    4 |    2 |    1 | 3:2  | 2006-07-21 |<br>+——+——+——+——+————+<br>4 rows in set (0.10 sec)</p><p>mysql&gt; select m.mid,m.hid,t.tname,m.gid,t.tname from m left join t on m.hid=t.tid;<br>+——+——+————–+——+————–+<br>| mid  | hid  | tname        | gid  | tname        |<br>+——+——+————–+——+————–+<br>|    1 |    1 | 国安         |    2 | 国安         |<br>|    2 |    2 | 申花         |    3 | 申花         |<br>|    4 |    2 | 申花         |    1 | 申花         |<br>|    3 |    3 | 布尔联队     |    1 | 布尔联队     |<br>+——+——+————–+——+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select m.mid,m.hid,t.tname,m.gid from m left join t on m.hid=t.tid;<br>+——+——+————–+——+<br>| mid  | hid  | tname        | gid  |<br>+——+——+————–+——+<br>|    1 |    1 | 国安         |    2 |<br>|    2 |    2 | 申花         |    3 |<br>|    4 |    2 | 申花         |    1 |<br>|    3 |    3 | 布尔联队     |    1 |<br>+——+——+————–+——+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,t.tname,tem.gid,t.tname from (select m.mid,m.hid,t.tname,m.gid from m left join t on m.hid=t.tid) as tem  left join t on t.tid=tem.gid;<br>+——+——+————–+——+————–+<br>| mid  | hid  | tname        | gid  | tname        |<br>+——+——+————–+——+————–+<br>|    4 |    2 | 国安         |    1 | 国安         |<br>|    3 |    3 | 国安         |    1 | 国安         |<br>|    1 |    1 | 申花         |    2 | 申花         |<br>|    2 |    2 | 布尔联队     |    3 | 布尔联队     |<br>+——+——+————–+——+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,t.tname,tem.gid,t.tname from (select m.mid,m.hid,t.tname,m.gid from m left join t on m.hid=t.tid) as tem  left join t on t.tid=tem.gid order by tem.mid asc;<br>+——+——+————–+——+————–+<br>| mid  | hid  | tname        | gid  | tname        |<br>+——+——+————–+——+————–+<br>|    1 |    1 | 申花         |    2 | 申花         |<br>|    2 |    2 | 布尔联队     |    3 | 布尔联队     |<br>|    3 |    3 | 国安         |    1 | 国安         |<br>|    4 |    2 | 国安         |    1 | 国安         |<br>+——+——+————–+——+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,t.tname,tem.gid,t.tname from (select m.mid,m.hid,t.tname,m.gid from m left join t on m.hid=t.tid) as tem  left join t on tem.gid=t.tid order by tem.mid asc;<br>+——+——+————–+——+————–+<br>| mid  | hid  | tname        | gid  | tname        |<br>+——+——+————–+——+————–+<br>|    1 |    1 | 申花         |    2 | 申花         |<br>|    2 |    2 | 布尔联队     |    3 | 布尔联队     |<br>|    3 |    3 | 国安         |    1 | 国安         |<br>|    4 |    2 | 国安         |    1 | 国安         |<br>+——+——+————–+——+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,tem.tname,tem.gid,tem.tname from (select m.mid,m.hid,t.tname,m.gid from m left join t on m.hid=t.tid) as tem  left join t on tem.gid=t.tid order by tem.mid asc;<br>+——+——+————–+——+————–+<br>| mid  | hid  | tname        | gid  | tname        |<br>+——+——+————–+——+————–+<br>|    1 |    1 | 国安         |    2 | 国安         |<br>|    2 |    2 | 申花         |    3 | 申花         |<br>|    3 |    3 | 布尔联队     |    1 | 布尔联队     |<br>|    4 |    2 | 申花         |    1 | 申花         |<br>+——+——+————–+——+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select m.* from m left join t on m.hid=t.tid;<br>+——+——+——+——+————+<br>| mid  | hid  | gid  | mres | matime     |<br>+——+——+——+——+————+<br>|    1 |    1 |    2 | 2:0  | 2006-05-21 |<br>|    2 |    2 |    3 | 1:2  | 2006-06-21 |<br>|    4 |    2 |    1 | 3:2  | 2006-07-21 |<br>|    3 |    3 |    1 | 2:5  | 2006-06-25 |<br>+——+——+——+——+————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select m.*,t.tname from m left join t on m.hid=t.tid;<br>+——+——+——+——+————+————–+<br>| mid  | hid  | gid  | mres | matime     | tname        |<br>+——+——+——+——+————+————–+<br>|    1 |    1 |    2 | 2:0  | 2006-05-21 | 国安         |<br>|    2 |    2 |    3 | 1:2  | 2006-06-21 | 申花         |<br>|    4 |    2 |    1 | 3:2  | 2006-07-21 | 申花         |<br>|    3 |    3 |    1 | 2:5  | 2006-06-25 | 布尔联队     |<br>+——+——+——+——+————+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.<em>, t.tname  from (select m.</em>,t.tname from m left join t on m.hid=t.tid) as tem left join t on tem.gid=t.tid;<br>+——+——+——+——+————+————–+————–+<br>| mid  | hid  | gid  | mres | matime     | tname        | tname        |<br>+——+——+——+——+————+————–+————–+<br>|    4 |    2 |    1 | 3:2  | 2006-07-21 | 申花         | 国安         |<br>|    3 |    3 |    1 | 2:5  | 2006-06-25 | 布尔联队     | 国安         |<br>|    1 |    1 |    2 | 2:0  | 2006-05-21 | 国安         | 申花         |<br>|    2 |    2 |    3 | 1:2  | 2006-06-21 | 申花         | 布尔联队     |<br>+——+——+——+——+————+————–+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select * from t;<br>+——+————–+<br>| tid  | tname        |<br>+——+————–+<br>|    1 | 国安         |<br>|    2 | 申花         |<br>|    3 | 布尔联队     |<br>+——+————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,tem.tname,tem.gid,t.tname,tem.mres,tem.matime  from (select m.mid ,m.hid,t.tname,m.gid,m.mres,m.matime from m left join t on m.hid=t.tid) as tem left join t on tem.gid=t.tid;<br>+——+——+————–+——+————–+——+————+<br>| mid  | hid  | tname        | gid  | tname        | mres | matime     |<br>+——+——+————–+——+————–+——+————+<br>|    4 |    2 | 申花         |    1 | 国安         | 3:2  | 2006-07-21 |<br>|    3 |    3 | 布尔联队     |    1 | 国安         | 2:5  | 2006-06-25 |<br>|    1 |    1 | 国安         |    2 | 申花         | 2:0  | 2006-05-21 |<br>|    2 |    2 | 申花         |    3 | 布尔联队     | 1:2  | 2006-06-21 |<br>+——+——+————–+——+————–+——+————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,tem.tname,tem.gid,t.tname,tem.mres,tem.matime  from (select m.mid ,m.hid,t.tname,m.gid,m.mres,m.matime from m left join t on m.hid=t.tid) as tem left join t on tem.gid=t.tid order by tem.mid;<br>+——+——+————–+——+————–+——+————+<br>| mid  | hid  | tname        | gid  | tname        | mres | matime     |<br>+——+——+————–+——+————–+——+————+<br>|    1 |    1 | 国安         |    2 | 申花         | 2:0  | 2006-05-21 |<br>|    2 |    2 | 申花         |    3 | 布尔联队     | 1:2  | 2006-06-21 |<br>|    3 |    3 | 布尔联队     |    1 | 国安         | 2:5  | 2006-06-25 |<br>|    4 |    2 | 申花         |    1 | 国安         | 3:2  | 2006-07-21 |<br>+——+——+————–+——+————–+——+————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select * from m;<br>+——+——+——+——+————+<br>| mid  | hid  | gid  | mres | matime     |<br>+——+——+——+——+————+<br>|    1 |    1 |    2 | 2:0  | 2006-05-21 |<br>|    2 |    2 |    3 | 1:2  | 2006-06-21 |<br>|    3 |    3 |    1 | 2:5  | 2006-06-25 |<br>|    4 |    2 |    1 | 3:2  | 2006-07-21 |<br>+——+——+——+——+————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,tem.tname,tem.gid,t.tname,tem.mres,tem.matime  from (select m.mid ,m.hid,t.tname,m.gid,m.mres,m.matime from m left join t on m.hid=t.tid) as tem left join t on tem.gid=t.tid where tem.matime between “2006-6-1” and “2006-7-1”  order by tem.mid;<br>+——+——+————–+——+————–+——+————+<br>| mid  | hid  | tname        | gid  | tname        | mres | matime     |<br>+——+——+————–+——+————–+——+————+<br>|    2 |    2 | 申花         |    3 | 布尔联队     | 1:2  | 2006-06-21 |<br>|    3 |    3 | 布尔联队     |    1 | 国安         | 2:5  | 2006-06-25 |<br>+——+——+————–+——+————–+——+————+<br>2 rows in set (0.06 sec)</p><p>mysql&gt; select m.mid ,m.hid,t.tname,m.gid,tem.tname,m.mres,m.matime from m left join t on m.hid=t.tid  left join t  as tem on m.gid=tem.tid where m.matime between “2006-6-1” and “2006-7-1”  order by m.mid;<br>+——+——+————–+——+————–+——+————+<br>| mid  | hid  | tname        | gid  | tname        | mres | matime     |<br>+——+——+————–+——+————–+——+————+<br>|    2 |    2 | 申花         |    3 | 布尔联队     | 1:2  | 2006-06-21 |<br>|    3 |    3 | 布尔联队     |    1 | 国安         | 2:5  | 2006-06-25 |<br>+——+——+————–+——+————–+——+————+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; exit<br>mysql&gt; use test01;<br>Database changed<br>mysql&gt; select goods_id,goods_name,shop_price from goods where shop_price&lt;50<br>    -&gt; ;<br>+———-+——————————–+————+<br>| goods_id | goods_name                     | shop_price |<br>+———-+——————————–+————+<br>|        5 | 索爱原装m2卡读卡器             |      20.00 |<br>|        6 | 胜创kingmax内存卡              |      42.00 |<br>|       25 | 小灵通/固话50元充值卡          |      48.00 |<br>|       26 | 小灵通/固话20元充值卡          |      19.00 |<br>|       28 | 联通50元充值卡                 |      45.00 |<br>|       30 | 移动20元充值卡                 |      18.00 |<br>+———-+——————————–+————+<br>6 rows in set (0.14 sec)</p><p>mysql&gt; #union 联合 语法 sql1 union sql2<br>mysql&gt; select goods_id,goods_name,shop_price from goods where shop_price&gt;4000;<br>+———-+——————-+————+<br>| goods_id | goods_name        | shop_price |<br>+———-+——————-+————+<br>|       22 | 多普达touch hd    |    5999.00 |<br>+———-+——————-+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select goods_id,goods_name,shop_price from goods where shop_price&gt;4000 union select goods_id,goods_name,shop_price from goods where shop_price&lt;50;<br>+———-+——————————–+————+<br>| goods_id | goods_name                     | shop_price |<br>+———-+——————————–+————+<br>|       22 | 多普达touch hd                 |    5999.00 |<br>|        5 | 索爱原装m2卡读卡器             |      20.00 |<br>|        6 | 胜创kingmax内存卡              |      42.00 |<br>|       25 | 小灵通/固话50元充值卡          |      48.00 |<br>|       26 | 小灵通/固话20元充值卡          |      19.00 |<br>|       28 | 联通50元充值卡                 |      45.00 |<br>|       30 | 移动20元充值卡                 |      18.00 |<br>+———-+——————————–+————+<br>7 rows in set (0.10 sec)</p><p>mysql&gt; #可以从两张表union联合查询<br>mysql&gt; #两个列名不一致 以第一个列名为准<br>mysql&gt; #union 满足的条件,只要结果集的列数一致就可以了<br>mysql&gt; #union后的结果集可以排序<br>mysql&gt; #格式: sql1 union sql2 order by<br>mysql&gt; # 用nuion 取出第4个栏目和第5个栏目的商品m,并按价格升序排列<br>mysql&gt; select goods_id ,cat_id, goods_name ,shop_price from goods union select goods_id ,cat_id ,goods_name ,shop_price from goods order by shop_price asc;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.05 sec)</p><p>mysql&gt; select goods_id ,cat_id, goods_name ,shop_price from goods where cat_id=4 union select goods_id ,cat_id ,goods_name ,shop_price from goods where cat_id=5 order by shop_price asc;<br>+———-+——–+—————–+————+<br>| goods_id | cat_id | goods_name      | shop_price |<br>+———-+——–+—————–+————+<br>|        1 |      4 | kd876           |    1388.00 |<br>|       14 |      4 | 诺基亚5800xm    |    2625.00 |<br>|       18 |      4 | 夏新t5          |    2878.00 |<br>|       23 |      5 | 诺基亚n96       |    3700.00 |<br>+———-+——–+—————–+————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; #取出第3个下价格前三高 的商品,和第四个栏目下价格前两高的商品用union完成</p><p>mysql&gt; select goods_id ,cat_id,goods_name ,shop_price from goods where cat_id=3 order by  shop_price desc limit 3;<br>+———-+——–+——————-+————+<br>| goods_id | cat_id | goods_name        | shop_price |<br>+———-+——–+——————-+————+<br>|       22 |      3 | 多普达touch hd    |    5999.00 |<br>|       32 |      3 | 诺基亚n85         |    3010.00 |<br>|       17 |      3 | 夏新n7            |    2300.00 |<br>+———-+——–+——————-+————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id ,cat_id ,goods_name ,shop_price from goods where cat_id=4 order by shop_price desc limit 2;<br>+———-+——–+—————–+————+<br>| goods_id | cat_id | goods_name      | shop_price |<br>+———-+——–+—————–+————+<br>|       18 |      4 | 夏新t5          |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm    |    2625.00 |<br>+———-+——–+—————–+————+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; (select goods_id ,cat_id,goods_name ,shop_price from goods where cat_id=3 order by  shop_price desc limit 3) union (select goods_id ,cat_id,goods_name ,shop_price from goods where cat_id=4 order by shop_price desc limit 2);<br>+———-+——–+——————-+————+<br>| goods_id | cat_id | goods_name        | shop_price |<br>+———-+——–+——————-+————+<br>|       22 |      3 | 多普达touch hd    |    5999.00 |<br>|       32 |      3 | 诺基亚n85         |    3010.00 |<br>|       17 |      3 | 夏新n7            |    2300.00 |<br>|       18 |      4 | 夏新t5            |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm      |    2625.00 |<br>+———-+——–+——————-+————+<br>5 rows in set (0.00 sec)</p><p>mysql&gt; #这次内层的order by 不会失效是因为有limit,单纯的order by不会对结果集有影响,需要配合limit<br>mysql&gt; #如果union后的结果有重复如何解决<br>mysql&gt; #union会有去重的效果,不想去重可以用union all<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.08 sec)</p><p>mysql&gt; select * from a;<br>+——+——+<br>| id   | num  |<br>+——+——+<br>| a    |    5 |<br>| b    |   10 |<br>| c    |   15 |<br>| d    |   10 |<br>+——+——+<br>4 rows in set (0.15 sec)</p><p>mysql&gt; select  * from b;<br>+——+——+<br>| id   | num  |<br>+——+——+<br>| b    |    5 |<br>| c    |   15 |<br>| d    |   20 |<br>| e    |   99 |<br>+——+——+<br>4 rows in set (0.02 sec)</p><p>mysql&gt; select * from a union select * from b;<br>+——+——+<br>| id   | num  |<br>+——+——+<br>| a    |    5 |<br>| b    |   10 |<br>| c    |   15 |<br>| d    |   10 |<br>| b    |    5 |<br>| d    |   20 |<br>| e    |   99 |<br>+——+——+<br>7 rows in set (0.00 sec)</p><p>mysql&gt; select * from a union all select * from b;<br>+——+——+<br>| id   | num  |<br>+——+——+<br>| a    |    5 |<br>| b    |   10 |<br>| c    |   15 |<br>| d    |   10 |<br>| b    |    5 |<br>| c    |   15 |<br>| d    |   20 |<br>| e    |   99 |<br>+——+——+<br>8 rows in set (0.00 sec)</p><p>mysql&gt; select * from a union all select * from b group by id;<br>+——+——+<br>| id   | num  |<br>+——+——+<br>| a    |    5 |<br>| b    |   10 |<br>| c    |   15 |<br>| d    |   10 |<br>| b    |    5 |<br>| c    |   15 |<br>| d    |   20 |<br>| e    |   99 |<br>+——+——+<br>8 rows in set (0.00 sec)</p><p>mysql&gt; select tem.id,sum(tem.num) from(select a.id,a.num from a union all select b.id,b.num from b) as tem group by tem.id ;<br>+——+————–+<br>| id   | sum(tem.num) |<br>+——+————–+<br>| a    |            5 |<br>| b    |           15 |<br>| c    |           30 |<br>| d    |           30 |<br>| e    |           99 |<br>+——+————–+<br>5 rows in set (0.00 sec)</p><p>mysql&gt; select a.* ,b.* from a left join b on a.id=b.id;<br>+——+——+——+——+<br>| id   | num  | id   | num  |<br>+——+——+——+——+<br>| b    |   10 | b    |    5 |<br>| c    |   15 | c    |   15 |<br>| d    |   10 | d    |   20 |<br>| a    |    5 | NULL | NULL |<br>+——+——+——+——+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select a.* ,b.* from a inner join b on a.id=b.id;<br>+——+——+——+——+<br>| id   | num  | id   | num  |<br>+——+——+——+——+<br>| b    |   10 | b    |    5 |<br>| c    |   15 | c    |   15 |<br>| d    |   10 | d    |   20 |<br>+——+——+——+——+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select a.* ,b.* from a left join b on a.id=b.id;<br>+——+——+——+——+<br>| id   | num  | id   | num  |<br>+——+——+——+——+<br>| b    |   10 | b    |    5 |<br>| c    |   15 | c    |   15 |<br>| d    |   10 | d    |   20 |<br>| a    |    5 | NULL | NULL |<br>+——+——+——+——+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select a.* ,b.* from a left join b on a.id=b.id union select a.* ,b.* from a right join b on a.id=b.id;<br>+——+——+——+——+<br>| id   | num  | id   | num  |<br>+——+——+——+——+<br>| b    |   10 | b    |    5 |<br>| c    |   15 | c    |   15 |<br>| d    |   10 | d    |   20 |<br>| a    |    5 | NULL | NULL |<br>| NULL | NULL | e    |   99 |<br>+——+——+——+——+<br>5 rows in set (0.00 sec)</p><p>mysql&gt; #先左联再u右连然后子查询;<br>mysql&gt;<br>mysql&gt; #函数<br>mysql&gt; #取出第四个栏目的商品及打88折的会员价<br>mysql&gt; select goods_id,cat_id,good_name,shop_price<em>0.88 from goods where cat_id=4<br>    -&gt; ;<br>ERROR 1054 (42S22): Unknown column ‘good_name’ in ‘field list’<br>mysql&gt; select goods_id,cat_id,goods_name,shop_price</em>0.88 from goods where cat_id=4<br>    -&gt; ;<br>+———-+——–+—————–+—————–+<br>| goods_id | cat_id | goods_name      | shop_price*0.88 |<br>+———-+——–+—————–+—————–+<br>|        1 |      4 | kd876           |       1221.4400 |<br>|       14 |      4 | 诺基亚5800xm    |       2310.0000 |<br>|       18 |      4 | 夏新t5          |       2532.6400 |<br>+———-+——–+—————–+—————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name,floor(shop_price<em>0.88) from goods where cat_id=4 ;<br>+———-+——–+—————–+————————+<br>| goods_id | cat_id | goods_name      | floor(shop_price</em>0.88) |<br>+———-+——–+—————–+————————+<br>|        1 |      4 | kd876           |                   1221 |<br>|       14 |      4 | 诺基亚5800xm    |                   2310 |<br>|       18 |      4 | 夏新t5          |                   2532 |<br>+———-+——–+—————–+————————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #随机生成5-15之间的数字;</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  7 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                 13 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  8 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  9 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  8 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  5 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  8 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                 11 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #ceiling 向上取整<br>mysql&gt; #group concat 取出4栏目下goods_id拼接<br>mysql&gt; select group_concat(goods_id) from goods where cat_id=4;<br>+————————+<br>| group_concat(goods_id) |<br>+————————+<br>| 1,14,18                |<br>+————————+<br>1 row in set (0.08 sec)</p><p>mysql&gt; #计算字符的ascil码<br>mysql&gt; select ascil(a);<br>ERROR 1305 (42000): FUNCTION test01.ascil does not exist<br>mysql&gt; select ascii(a);<br>ERROR 1054 (42S22): Unknown column ‘a’ in ‘field list’<br>mysql&gt; select ascii(‘a’);<br>+————+<br>| ascii(‘a’) |<br>+————+<br>|         97 |<br>+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select length(“中华”);<br>+——————+<br>| length(“中华”)   |<br>+——————+<br>|                6 |<br>+——————+<br>1 row in set (0.06 sec)</p><p>mysql&gt; #length 计算的字节场地<br>mysql&gt; #length 计算的字符数<br>mysql&gt; #char_length 计算的字符数<br>mysql&gt; select char_length(‘中国’);<br>+———————–+<br>| char_length(‘中国’)   |<br>+———————–+<br>|                     2 |<br>+———————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #反转字符串<br>mysql&gt; select reverse(‘zh’)<br>    -&gt; ;<br>+—————+<br>| reverse(‘zh’) |<br>+—————+<br>| hz            |<br>+—————+<br>1 row in set (0.05 sec)</p><p>mysql&gt; select reverse(‘zh中国’);<br>+———————+<br>| reverse(‘zh中国’)   |<br>+———————+<br>| 国中hz              |<br>+———————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #position<br>mysql&gt; select position(‘@’ in ‘abc@sina.com’);<br>+———————————+<br>| position(‘@’ in ‘abc@sina.com’) |<br>+———————————+<br>|                               4 |<br>+———————————+<br>1 row in set (0.05 sec)</p><p>mysql&gt; select right(‘abc@sina.com’ ,2);<br>+————————–+<br>| right(‘abc@sina.com’ ,2) |<br>+————————–+<br>| om                       |<br>+————————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #某网站有email字段,有邮件地址,想调查163.qq.com的u邮箱的比例<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.01 sec)</p><p>mysql&gt; #查询邮箱后缀,<br>mysql&gt; create table email(uname char,email char);<br>Query OK, 0 rows affected (1.76 sec)</p><p>mysql&gt; desc email;<br>+——-+———+——+—–+———+——-+<br>| Field | Type    | Null | Key | Default | Extra |<br>+——-+———+——+—–+———+——-+<br>| uname | char(1) | YES  |     | NULL    |       |<br>| email | char(1) | YES  |     | NULL    |       |<br>+——-+———+——+—–+———+——-+<br>2 rows in set (0.09 sec)</p><p>mysql&gt; alter table email modify column uname char(50) ;<br>Query OK, 0 rows affected (1.96 sec)<br>Records: 0  Duplicates: 0  Warnings: 0</p><p>mysql&gt; alter table email modify column email char(50) ;<br>Query OK, 0 rows affected (1.34 sec)<br>Records: 0  Duplicates: 0  Warnings: 0</p><p>mysql&gt; desc eamil;<br>ERROR 1146 (42S02): Table ‘test01.eamil’ doesn’t exist<br>mysql&gt; desc email;<br>+——-+———-+——+—–+———+——-+<br>| Field | Type     | Null | Key | Default | Extra |<br>+——-+———-+——+—–+———+——-+<br>| uname | char(50) | YES  |     | NULL    |       |<br>| email | char(50) | YES  |     | NULL    |       |<br>+——-+———-+——+—–+———+——-+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; insert into email values(‘zhangsan’,‘zhan@163.com’),(‘lilie’,‘li@qq.com’),(‘hanmeimei’,‘han@126.com’);<br>Query OK, 3 rows affected (0.28 sec)<br>Records: 3  Duplicates: 0  Warnings: 0</p><p>mysql&gt; select * from email;<br>+———–+————–+<br>| uname     | email        |<br>+———–+————–+<br>| zhangsan  | <a href="mailto:zhan@163.com">zhan@163.com</a> |<br>| lilie     | <a href="mailto:li@qq.com">li@qq.com</a>    |<br>| hanmeimei | <a href="mailto:han@126.com">han@126.com</a>  |<br>+———–+————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select uname ,position(‘@’ in email) from email;<br>+———–+————————+<br>| uname     | position(‘@’ in email) |<br>+———–+————————+<br>| zhangsan  |                      5 |<br>| lilie     |                      3 |<br>| hanmeimei |                      4 |<br>+———–+————————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select uname ,right(email,position(‘@’ in email)) from email;<br>+———–+————————————-+<br>| uname     | right(email,position(‘@’ in email)) |<br>+———–+————————————-+<br>| zhangsan  | 3.com                               |<br>| lilie     | com                                 |<br>| hanmeimei | .com                                |<br>+———–+————————————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select uname ,right(email,char_length(email)-position(‘@’ in email)) from email;<br>+———–+——————————————————–+<br>| uname     | right(email,char_length(email)-position(‘@’ in email)) |<br>+———–+——————————————————–+<br>| zhangsan  | 163.com                                                |<br>| lilie     | qq.com                                                 |<br>| hanmeimei | 126.com                                                |<br>+———–+——————————————————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select uname ,right(email,length(email)-position(‘@’ in email)) from email;<br>+———–+—————————————————+<br>| uname     | right(email,length(email)-position(‘@’ in email)) |<br>+———–+—————————————————+<br>| zhangsan  | 163.com                                           |<br>| lilie     | qq.com                                            |<br>| hanmeimei | 126.com                                           |<br>+———–+—————————————————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #截取邮箱<br>mysql&gt; #截取邮箱后半部分;<br>mysql&gt; select uname ,right(email,length(email)-position(‘@’ in email)) from email;<br>+———–+—————————————————+<br>| uname     | right(email,length(email)-position(‘@’ in email)) |<br>+———–+—————————————————+<br>| zhangsan  | 163.com                                           |<br>| lilie     | qq.com                                            |<br>| hanmeimei | 126.com                                           |<br>+———–+—————————————————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #日期时间函数,取当前时间<br>mysql&gt; select now;<br>ERROR 1054 (42S22): Unknown column ‘now’ in ‘field list’<br>mysql&gt; select now();<br>+———————+<br>| now()               |<br>+———————+<br>| 2019-10-15 20:00:44 |<br>+———————+<br>1 row in set (0.05 sec)</p><p>mysql&gt; select curdate();<br>+————+<br>| curdate()  |<br>+————+<br>| 2019-10-15 |<br>+————+<br>1 row in set (0.01 sec)</p><p>mysql&gt; # now()返回datetime格式,curdate返回date格式<br>mysql&gt; select curtime();<br>+———–+<br>| curtime() |<br>+———–+<br>| 20:02:19  |<br>+———–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #查看某一日是那一周的第几天<br>mysql&gt; select dayofweek(‘2019-10-15’);<br>+————————-+<br>| dayofweek(‘2019-10-15’) |<br>+————————-+<br>|                       3 |<br>+————————-+<br>1 row in set (0.05 sec)</p><p>mysql&gt; select week(‘2019-10-15’);<br>+——————–+<br>| week(‘2019-10-15’) |<br>+——————–+<br>|                 41 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select week(‘2019-12-30’);<br>+——————–+<br>| week(‘2019-12-30’) |<br>+——————–+<br>|                 52 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select week(curdate());<br>+—————–+<br>| week(curdate()) |<br>+—————–+<br>|              41 |<br>+—————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select week(‘2019-12-31’);<br>+——————–+<br>| week(‘2019-12-31’) |<br>+——————–+<br>|                 52 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #案例:name<br>mysql&gt; # overtime 日期<br>mysql&gt; # 5        2019-9-1<br>mysql&gt; # 6        2019-9-2<br>mysql&gt; # 3        2019-9-3<br>mysql&gt; # 报表统计,按星期统计加班时间<br>mysql&gt; create table jiaban(num int(10) ,time date);<br>Query OK, 0 rows affected (0.52 sec)</p><p>mysql&gt; insert into jiaban values(3,”2019-9-1”),(4,’2019-9-2’),(5,”2019-9-3”),(6,’2019-9-10’),(19,’2019-9-18’);<br>Query OK, 5 rows affected (0.15 sec)<br>Records: 5  Duplicates: 0  Warnings: 0</p><p>mysql&gt; select * from jiaban;<br>+——+————+<br>| num  | time       |<br>+——+————+<br>|    3 | 2019-09-01 |<br>|    4 | 2019-09-02 |<br>|    5 | 2019-09-03 |<br>|    6 | 2019-09-10 |<br>|   19 | 2019-09-18 |<br>+——+————+<br>5 rows in set (0.00 sec)</p><p>mysql&gt; #按星期统计加班时间;<br>mysql&gt; select sum(num), week(time) from jiaban ;<br>+———-+————+<br>| sum(num) | week(time) |<br>+———-+————+<br>|       37 |         35 |<br>+———-+————+<br>1 row in set (0.02 sec)</p><p>mysql&gt; select sum(num), week(time) from jiaban group by week(time);<br>+———-+————+<br>| sum(num) | week(time) |<br>+———-+————+<br>|       12 |         35 |<br>|        6 |         36 |<br>|       19 |         37 |<br>+———-+————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select num, week(time) from jiaban group by week(time);<br>+——+————+<br>| num  | week(time) |<br>+——+————+<br>|    3 |         35 |<br>|    6 |         36 |<br>|   19 |         37 |<br>+——+————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select sum(num), week(time) from jiaban group by week(time);<br>+———-+————+<br>| sum(num) | week(time) |<br>+———-+————+<br>|       12 |         35 |<br>|        6 |         36 |<br>|       19 |         37 |<br>+———-+————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select *, week(time) from jiaban;<br>+——+————+————+<br>| num  | time       | week(time) |<br>+——+————+————+<br>|    3 | 2019-09-01 |         35 |<br>|    4 | 2019-09-02 |         35 |<br>|    5 | 2019-09-03 |         35 |<br>|    6 | 2019-09-10 |         36 |<br>|   19 | 2019-09-18 |         37 |<br>+——+————+————+<br>5 rows in set (0.00 sec)</p><p>mysql&gt; #加密函数,码得<br>mysql&gt; #md5加密函数;<br>mysql&gt; select md5(‘1’);<br>+———————————-+<br>| md5(‘1’)                         |<br>+———————————-+<br>| c4ca4238a0b923820dcc509a6f75849b |<br>+———————————-+<br>1 row in set (0.07 sec)</p><p>mysql&gt; select md5(‘1’);<br>+———————————-+<br>| md5(‘1’)                         |<br>+———————————-+<br>| c4ca4238a0b923820dcc509a6f75849b |<br>+———————————-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #md5是不可逆的<br>mysql&gt; #流程h控制函数<br>mysql&gt; #case 变量<br>mysql&gt; 2 when 值 then 语句；<br>    -&gt; 3 when 值 then 语句；<br>    -&gt; 4 else 语句；<br>    -&gt; 5 end case；<br>    -&gt; \c<br>mysql&gt; #if(gender=0,’优先’,’等待’) as vip<br>mysql&gt; ifnull<br>    -&gt; \c<br>mysql&gt; #ifnull的用法,判断第一个表达式是否为null 如果为null 返回第2 个表达式的值<br>mysql&gt; #如果不为null 返回自身,即表达式1<br>mysql&gt; select ifnull(‘’,a);<br>ERROR 1054 (42S22): Unknown column ‘a’ in ‘field list’<br>mysql&gt; select ifnull(‘’,’a’);<br>+—————-+<br>| ifnull(‘’,’a’) |<br>+—————-+<br>|                |<br>+—————-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select ifnull(null,’a’);<br>+——————+<br>| ifnull(null,’a’) |<br>+——————+<br>| a                |<br>+——————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #系统调试函数<br>mysql&gt;<br>mysql&gt;<br>mysql&gt; select user();<br>+—————-+<br>| user()         |<br>+—————-+<br>| root@localhost |<br>+—————-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #user返回用户及主机,判断自己的身份<br>mysql&gt; #database(),返回当前操作的数据库名<br>mysql&gt; select database();<br>+————+<br>| database() |<br>+————+<br>| test01     |<br>+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select version();<br>+———–+<br>| version() |<br>+———–+<br>| 8.0.12    |<br>+———–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #vension() 返回数据库的版本<br>mysql&gt; #时间的h格式化,优先在业务逻辑上使用,<br>mysql&gt; #总结: where 条件中,对某列使用了函数,由此列的索引不发挥作用<br>mysql&gt; #视图 view<br>mysql&gt; view 将查询表当作临时表使用,<br>    -&gt; \c<br>mysql&gt; # 查询每个栏目下商品的平均价格,并对平均价格取前三的栏目<br>mysql&gt; select cat_id,avg(shop_price),count(goods_id) from goods group by cat_id;<br>+——–+—————–+—————–+<br>| cat_id | avg(shop_price) | count(goods_id) |<br>+——–+—————–+—————–+<br>|      4 |     2297.000000 |               3 |<br>|      8 |       75.333333 |               3 |<br>|     11 |       31.000000 |               2 |<br>|      3 |     1746.066667 |              15 |<br>|      2 |      823.330000 |               1 |<br>|      5 |     3700.000000 |               1 |<br>|     13 |       33.500000 |               2 |<br>|     15 |       70.000000 |               2 |<br>|     14 |       54.000000 |               2 |<br>+——–+—————–+—————–+<br>9 rows in set (0.10 sec)</p><p>mysql&gt; select cat_id,avg(shop_price) as average,count(goods_id) from goods group by cat_id order by average desc limit 3 ;<br>+——–+————-+—————–+<br>| cat_id | average     | count(goods_id) |<br>+——–+————-+—————–+<br>|      5 | 3700.000000 |               1 |<br>|      4 | 2297.000000 |               3 |<br>|      3 | 1746.066667 |              15 |<br>+——–+————-+—————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,avg(shop_price) as average,count(goods_id) from goods group by cat_id order by average asc limit 3 ;<br>+——–+———–+—————–+<br>| cat_id | average   | count(goods_id) |<br>+——–+———–+—————–+<br>|     11 | 31.000000 |               2 |<br>|     13 | 33.500000 |               2 |<br>|     14 | 54.000000 |               2 |<br>+——–+———–+—————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #取平均价格由高到底第三到第5的栏目<br>mysql&gt; select cat_id,avg(shop_price) as average,count(goods_id) from goods group by cat_id order by average asc  ;<br>+——–+————-+—————–+<br>| cat_id | average     | count(goods_id) |<br>+——–+————-+—————–+<br>|     11 |   31.000000 |               2 |<br>|     13 |   33.500000 |               2 |<br>|     14 |   54.000000 |               2 |<br>|     15 |   70.000000 |               2 |<br>|      8 |   75.333333 |               3 |<br>|      2 |  823.330000 |               1 |<br>|      3 | 1746.066667 |              15 |<br>|      4 | 2297.000000 |               3 |<br>|      5 | 3700.000000 |               1 |<br>+——–+————-+—————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,avg(shop_price) as average,count(goods_id) from goods group by cat_id;<br>+——–+————-+—————–+<br>| cat_id | average     | count(goods_id) |<br>+——–+————-+—————–+<br>|      4 | 2297.000000 |               3 |<br>|      8 |   75.333333 |               3 |<br>|     11 |   31.000000 |               2 |<br>|      3 | 1746.066667 |              15 |<br>|      2 |  823.330000 |               1 |<br>|      5 | 3700.000000 |               1 |<br>|     13 |   33.500000 |               2 |<br>|     15 |   70.000000 |               2 |<br>|     14 |   54.000000 |               2 |<br>+——–+————-+—————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; # 将结果集设为a  a频繁用到,因此用到视图<br>mysql&gt; # 表通过某种运算得到的影子<br>mysql&gt; #如何创建视图,建视图的时候语法 create view 表名 as 查询语句;<br>mysql&gt; create view state as select cat_id,avg(shop_price) as average,count(goods_id) from goods group by cat_id;<br>Query OK, 0 rows affected (0.27 sec)</p><p>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| email            |<br>| girl             |<br>| goods            |<br>| jiaban           |<br>| m                |<br>| mian             |<br>| result           |<br>| state            |<br>| t                |<br>| user             |<br>+——————+<br>14 rows in set (0.01 sec)</p><p>mysql&gt; #多了一张state表<br>mysql&gt; select * from state;<br>+——–+————-+—————–+<br>| cat_id | average     | count(goods_id) |<br>+——–+————-+—————–+<br>|      4 | 2297.000000 |               3 |<br>|      8 |   75.333333 |               3 |<br>|     11 |   31.000000 |               2 |<br>|      3 | 1746.066667 |              15 |<br>|      2 |  823.330000 |               1 |<br>|      5 | 3700.000000 |               1 |<br>|     13 |   33.500000 |               2 |<br>|     15 |   70.000000 |               2 |<br>|     14 |   54.000000 |               2 |<br>+——–+————-+—————–+<br>9 rows in set (0.06 sec)</p><p>mysql&gt; select * from state order by average limit 3;<br>+——–+———–+—————–+<br>| cat_id | average   | count(goods_id) |<br>+——–+———–+—————–+<br>|     11 | 31.000000 |               2 |<br>|     13 | 33.500000 |               2 |<br>|     14 | 54.000000 |               2 |<br>+——–+———–+—————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #视图一旦创建完毕,可以完全当表使用,<br>mysql&gt; # 简化查询,复杂的统计,<br>mysql&gt; #更清晰的权限控制<br>mysql&gt; # 开放权限,但是不想开放密码字段,用视图<br>mysql&gt; # 多表查询,分表时候用,将表头放在视图中;<br>mysql&gt; #视图是表的影子,表与视图相互影响的关系<br>mysql&gt; #表的数据变化,影响视图的变化,<br>mysql&gt; #以此例,,此视图的数据不能更改,其数据来自shop_price的平均值<br>mysql&gt; #视图是否能够增删改呢?<br>mysql&gt; #某种情况下是可以删除的,11对应,即表的数据能够推出视图的数据,视图的数据能够推出表的数据<br>mysql&gt; #删除视图即 drop table/view 表名/视图名<br>mysql&gt; exit<br>mysql&gt; show databases;<br>+——————–+<br>| Database           |<br>+——————–+<br>| bookstore          |<br>| clouddb01          |<br>| clouddb02          |<br>| clouddb03          |<br>| information_schema |<br>| mydb               |<br>| mysql              |<br>| performance_schema |<br>| shop               |<br>| ssm_crud           |<br>| struts             |<br>| student            |<br>| sys                |<br>| test               |<br>| test01             |<br>+——————–+<br>15 rows in set (0.18 sec)</p><p>mysql&gt; use test01;<br>Database changed<br>mysql&gt; #algorithm<br>mysql&gt; # merge —合并查询语句<br>mysql&gt; #tem<br>mysql&gt; #temptable —临时表<br>mysql&gt; #undefined –未定义,由系统判断<br>mysql&gt; #建一张简单的查询视图,不同临时表,只用y条件合并<br>mysql&gt; create view as select * from goods where shop_price&gt;300;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘as select * from goods where shop_price&gt;300’ at line 1<br>mysql&gt; create view v1  as  select * from goods where shop_price&gt;300;<br>Query OK, 0 rows affected (0.52 sec)</p><p>mysql&gt; #查询视图<br>mysql&gt; select goods_id ,goods_name ,shop_price from v1 where shop_price&lt;500;<br>+———-+—————+————+<br>| goods_id | goods_name    | shop_price |<br>+———-+—————+————+<br>|        8 | 飞利浦9@9v    |     399.00 |<br>+———-+—————+————+<br>1 row in set (0.01 sec)</p><p>mysql&gt; #总的条件是&gt;300 &lt;500;<br>mysql&gt; #这个简单的查询还建立临时表的话,开销有点大;<br>mysql&gt; #这是我们可以指定algorithm为merge<br>mysql&gt; create algorithm=merge view v2 as select * from goods where shop_price&gt;300;<br>Query OK, 0 rows affected (0.21 sec)</p><p>mysql&gt; select goods_id ,goods_name ,shop_price from v2 where shop_price&lt;500;<br>+———-+—————+————+<br>| goods_id | goods_name    | shop_price |<br>+———-+—————+————+<br>|        8 | 飞利浦9@9v    |     399.00 |<br>+———-+—————+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #有的时候必须建临时表,<br>mysql&gt; #比如,每个栏目的平均商品价格<br>mysql&gt; #比如每个栏目下的最高d价格的商品<br>mysql&gt; create algorithm=temptable view v3 as select goods_id,cat_id,goods_name from goods order by cat_id asc ,goods_id desc;<br>Query OK, 0 rows affected (0.21 sec)</p><p>mysql&gt; select * from v3 group by cat_id;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       18 |      4 | 夏新t5                                 |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       28 |     15 | 联通50元充值卡                         |<br>+———-+——–+—————————————-+<br>9 rows in set (0.05 sec)</p><p>mysql&gt; select * from v3;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       24 |      3 | p806                                   |<br>|       22 |      3 | 多普达touch hd                         |<br>|       21 |      3 | 金立 a30                               |<br>|       20 |      3 | 三星bc01                               |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       17 |      3 | 夏新n7                                 |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       11 |      3 | 索爱c702c                              |<br>|       10 |      3 | 索爱c702c                              |<br>|        9 |      3 | 诺基亚e66                              |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|       18 |      4 | 夏新t5                                 |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|        1 |      4 | kd876                                  |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       27 |     15 | 联通100元充值卡                        |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; drop view v3;<br>Query OK, 0 rows affected (0.27 sec)</p><p>mysql&gt; create algorithm=temptable view v3 as select goods_id,cat_id,goods_name,shop_price from goods order by cat_id asc ,shop_price desc;<br>Query OK, 0 rows affected (0.31 sec)</p><p>mysql&gt; slect * form v3 ;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘slect * form v3’ at line 1<br>mysql&gt; select * form v3 ;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘form v3’ at line 1<br>mysql&gt; select * from v3 ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select * from v3 group by cat_id;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>+———-+——–+—————————————-+————+<br>9 rows in set (0.03 sec)</p><p>mysql&gt; #编码问题<br>mysql&gt; #字符编码到字符集的映射<br>mysql&gt; #gb2312,utf-8<br>mysql&gt; #unicode 码表,—– utf-8 压缩文件的关系<br>mysql&gt; #如何截取utf-8无乱码<br>mysql&gt; #从头开始,取1个字节,<br>mysql&gt; #通过位运算,计算连续的1的g个数<br>mysql&gt; #如为0 截取1个<br>mysql&gt; #如为n 则截取n个<br>mysql&gt; gbk转为utf-8<br>    -&gt; \c<br>mysql&gt; #jbk<br>mysql&gt; #jbk 转unicode 在转utf-8<br>mysql&gt; #乱码是怎么形成,编码和解码不统一<br>mysql&gt; #转码过程字节丢失<br>mysql&gt; create table t(id int ,name varchar(50) not null default(“1244”));<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘(“1244”))’ at line 1<br>mysql&gt; create table t(id int ,name varchar(50) not null default(1244));<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘(1244))’ at line 1<br>mysql&gt; create table t(id int ,name varchar(50) not null default ‘1244’);<br>ERROR 1050 (42S01): Table ‘t’ already exists<br>mysql&gt; create table tem(id int ,time datetime not null default now() );;<br>Query OK, 0 rows affected (0.95 sec)</p><p>ERROR:<br>No query specified</p><p>mysql&gt; desc time;<br>ERROR 1146 (42S02): Table ‘test01.time’ doesn’t exist<br>mysql&gt; desc tem;<br>+——-+———-+——+—–+——————-+——-+<br>| Field | Type     | Null | Key | Default           | Extra |<br>+——-+———-+——+—–+——————-+——-+<br>| id    | int(11)  | YES  |     | NULL              |       |<br>| time  | datetime | NO   |     | CURRENT_TIMESTAMP |       |<br>+——-+———-+——+—–+——————-+——-+<br>2 rows in set (0.13 sec)</p><p>mysql&gt; drop tem;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘tem’ at line 1<br>mysql&gt; drop table tem;<br>Query OK, 0 rows affected (0.49 sec)</p><p>mysql&gt; create table tem(id int(11) not null primary key ,name varchar(50) not null ,time datetime not null default now());<br>Query OK, 0 rows affected (0.39 sec)</p><p>mysql&gt; insert into tem values(1,”lili”),(2,”韩梅梅”),(3,”笑话”),(4,”哈哈”);<br>ERROR 1136 (21S01): Column count doesn’t match value count at row 1<br>mysql&gt; insert into tem values(1,”lili”,null),(2,”韩梅梅”,null),(3,”笑话”,null),(4,”哈哈”,null);<br>ERROR 1048 (23000): Column ‘time’ cannot be null<br>mysql&gt; insert into tem(id,name) values(1,”lili”),(2,”韩梅梅”),(3,”笑话”),(4,”哈哈”);<br>Query OK, 4 rows affected (0.20 sec)<br>Records: 4  Duplicates: 0  Warnings: 0</p><p>mysql&gt; select * from tem;<br>+—-+———–+———————+<br>| id | name      | time                |<br>+—-+———–+———————+<br>|  1 | lili      | 2019-10-16 19:45:54 |<br>|  2 | 韩梅梅    | 2019-10-16 19:45:54 |<br>|  3 | 笑话      | 2019-10-16 19:45:54 |<br>|  4 | 哈哈      | 2019-10-16 19:45:54 |<br>+—-+———–+———————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; delete from tem order by id desc limit 2;<br>Query OK, 2 rows affected (0.33 sec)</p><p>mysql&gt; select * from tem;<br>+—-+———–+———————+<br>| id | name      | time                |<br>+—-+———–+———————+<br>|  1 | lili      | 2019-10-16 19:45:54 |<br>|  2 | 韩梅梅    | 2019-10-16 19:45:54 |<br>+—-+———–+———————+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select *,week(time) from tem;<br>+—-+———–+———————+————+<br>| id | name      | time                | week(time) |<br>+—-+———–+———————+————+<br>|  1 | lili      | 2019-10-16 19:45:54 |         41 |<br>|  2 | 韩梅梅    | 2019-10-16 19:45:54 |         41 |<br>+—-+———–+———————+————+<br>2 rows in set (0.01 sec)</p><p>mysql&gt; #设置client 和connection的字符集<br>mysql&gt; # set character_set_client=gbk;<br>mysql&gt; # set character_set_connection=utf8<br>mysql&gt; # set character_set_ressults=gbk;<br>mysql&gt; # set character_set_results=gbk;<br>mysql&gt; # 1366 字符编码问题<br>mysql&gt; 大转小会丢失<br>    -&gt; \c<br>mysql&gt; #即 server&gt; connection&gt; client 编码范围<br>mysql&gt; #client con results 都是hgbk<br>mysql&gt; #client con results 都是gbk<br>mysql&gt; #若三者都是gbk 则可以简写<br>mysql&gt; # 即 set names gbk<br>mysql&gt; #utf8中文截取无乱码<br>mysql&gt; #存储引擎,<br>mysql&gt; # innodb myisam  innodb支持事务,<br>mysql&gt;<br>mysql&gt; #start transaction;<br>mysql&gt; commit;<br>Query OK, 0 rows affected (0.00 sec)</p><p>mysql&gt; #commit;<br>mysql&gt; #rollback;<br>mysql&gt; exit</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;mysql查询2&quot;&gt;&lt;a href=&quot;#mysql查询2&quot; class=&quot;headerlink&quot; title=&quot;mysql查询2&quot;&gt;&lt;/a&gt;mysql查询2&lt;/h2&gt;&lt;p&gt;作者: philxling&lt;/p&gt;
&lt;p&gt;通过多个表,然后用log记录的方式记录知识:&lt;/p&gt;
    
    </summary>
    
    
      <category term="mysql" scheme="http://philxling.cn/categories/mysql/"/>
    
    
  </entry>
  
  <entry>
    <title>mysql查询1</title>
    <link href="http://philxling.cn/2020/03/04/mysql%E6%9F%A5%E8%AF%A21/"/>
    <id>http://philxling.cn/2020/03/04/mysql%E6%9F%A5%E8%AF%A21/</id>
    <published>2020-03-04T04:32:08.000Z</published>
    <updated>2020-03-15T05:41:25.778Z</updated>
    
    <content type="html"><![CDATA[<h2 id="mysql查询基本知识-通过记录log的方式记录知识点"><a href="#mysql查询基本知识-通过记录log的方式记录知识点" class="headerlink" title="mysql查询基本知识,通过记录log的方式记录知识点"></a>mysql查询基本知识,通过记录log的方式记录知识点</h2><p>作者: philxling</p><p>mysql&gt; select goods_name,goods_id, concat(“HTC”,substring(goods_name,4)) as name from goods where goods_name like “诺基亚%”;</p><a id="more"></a><p>+—————————————-+———-+———————————-+<br>| goods_name                             | goods_id | name                             |<br>+—————————————-+———-+———————————-+<br>| 诺基亚n85原装充电器                    |        4 | HTCn85原装充电器                 |<br>| 诺基亚原装5800耳机                     |        3 | HTC原装5800耳机                  |<br>| 诺基亚n85原装立体声耳机hs-82           |        7 | HTCn85原装立体声耳机hs-82        |<br>| 诺基亚e66                              |        9 | HTCe66                           |<br>| 诺基亚5320 xpressmusic                 |       13 | HTC5320 xpressmusic              |<br>| 诺基亚5800xm                           |       14 | HTC5800xm                        |<br>| 诺基亚n96                              |       23 | HTCn96                           |<br>| 诺基亚n85                              |       32 | HTCn85                           |<br>+—————————————-+———-+———————————-+<br>8 rows in set (0.00 sec)</p><p>mysql&gt; select * from mian<br>    -&gt; ;<br>+——+<br>| num  |<br>+——+<br>|    3 |<br>|   12 |<br>|   15 |<br>|   20 |<br>|   20 |<br>|   20 |<br>|   30 |<br>|   30 |<br>|   30 |<br>+——+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; #取出第三个栏目下价格小于1000或者大于3000 同时点击量大于5的商品<br>mysql&gt; select goods_id ,goods_name, shop_price,cat_id,click_count from goods where cat_id=3 and (shop_price&lt;1000 || shop_price&gt;3000) and click_count &gt;=5 ;<br>+———-+——————-+————+——–+————-+<br>| goods_id | goods_name        | shop_price | cat_id | click_count |<br>+———-+——————-+————+——–+————-+<br>|        8 | 飞利浦9@9v        |     399.00 |      3 |          10 |<br>|       12 | 摩托罗拉a810      |     983.00 |      3 |          13 |<br>|       15 | 摩托罗拉a810      |     788.00 |      3 |           8 |<br>|       19 | 三星sgh-f258      |     858.00 |      3 |           7 |<br>|       20 | 三星bc01          |     280.00 |      3 |          14 |<br>|       22 | 多普达touch hd    |    5999.00 |      3 |          16 |<br>|       32 | 诺基亚n85         |    3010.00 |      3 |           9 |<br>+———-+——————-+————+——–+————-+<br>7 rows in set (0.00 sec)</p><p>mysql&gt; #最贵的商品的价格<br>mysql&gt; select max(shop_price) from goods;<br>+—————–+<br>| max(shop_price) |<br>+—————–+<br>|         5999.00 |<br>+—————–+<br>1 row in set (0.06 sec)</p><p>mysql&gt; #查询最便宜的商品的价格<br>mysql&gt; select min(shop_price) from goods ;<br>+—————–+<br>| min(shop_price) |<br>+—————–+<br>|           18.00 |<br>+—————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #查出最旧的商品<br>mysql&gt; select min(goods_id) from goods;<br>+—————+<br>| min(goods_id) |<br>+—————+<br>|             1 |<br>+—————+<br>1 row in set (0.10 sec)</p><p>mysql&gt; #goods_number是库存量<br>mysql&gt; select sum(goods_number) from goods<br>    -&gt; ;<br>+——————-+<br>| sum(goods_number) |<br>+——————-+<br>|               313 |<br>+——————-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #查看自己店里的商品的平均价格</p><p>mysql&gt; select avg(shop_price) from goods;<br>+—————–+<br>| avg(shop_price) |<br>+—————–+<br>|     1232.526774 |<br>+—————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #统计多少种商品<br>mysql&gt; select count(<em>) from goods;<br>+———-+<br>| count(</em>) |<br>+———-+<br>|       31 |<br>+———-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.17 sec)</p><p>mysql&gt; select * from t;<br>+——+————–+<br>| tid  | tname        |<br>+——+————–+<br>|    1 | 国安         |<br>|    2 | 申花         |<br>|    3 | 布尔联队     |<br>+——+————–+<br>3 rows in set (0.06 sec)</p><p>mysql&gt; #select count(<em>) from 表名,表示查询的是绝对的行数,哪怕某一行所有字段全为null的时候也能计算在内,<br>mysql&gt; #而select count(字段) from 表名 查询的是该列不为null的所有行的行数<br>mysql&gt; #用count(</em>)和count(1) 那个好,对于myisamm的表咩有区别,这种引擎计数器在维护,innodb的用count(*))直接读行数,效率很低<br>mysql&gt; #计算第三个栏目下所有商品的库存量之和<br>mysql&gt; select sum(goods_number) from goods where cat_id =3;<br>+——————-+<br>| sum(goods_number) |<br>+——————-+<br>|               203 |<br>+——————-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #计算每个栏目下的库存量之和<br>mysql&gt; select cat_id, sum(goods_number) from goods  group by cat_id ;<br>+——–+——————-+<br>| cat_id | sum(goods_number) |<br>+——–+——————-+<br>|      4 |                 3 |<br>|      8 |                61 |<br>|     11 |                23 |<br>|      3 |               203 |<br>|      2 |                 0 |<br>|      5 |                 8 |<br>|     13 |                 4 |<br>|     15 |                 2 |<br>|     14 |                 9 |<br>+——–+——————-+<br>9 rows in set (0.05 sec)</p><p>mysql&gt; #having 筛选<br>mysql&gt; #查询每种商品积压的货款<br>mysql&gt; show databases;<br>+——————–+<br>| Database           |<br>+——————–+<br>| bookstore          |<br>| clouddb01          |<br>| clouddb02          |<br>| clouddb03          |<br>| information_schema |<br>| mydb               |<br>| mysql              |<br>| performance_schema |<br>| shop               |<br>| ssm_crud           |<br>| struts             |<br>| student            |<br>| sys                |<br>| test               |<br>| test01             |<br>+——————–+<br>15 rows in set (0.00 sec)</p><p>mysql&gt; #查询每种商品积压的货款<br>mysql&gt; select market_price,shop_price, market_price-shop_price as discount from goods where 1 having discount &gt;200;<br>ERROR 1046 (3D000): No database selected<br>mysql&gt; use test01;<br>Database changed</p><p>mysql&gt; #查询每种商品积压的货款<br>mysql&gt; #提示: 商品的库存量*价格</p><p>mysql&gt; select goods_id ,shop_price,goods_number*shop_price as hk from goods;<br>+———-+————+———–+<br>| goods_id | shop_price | hk        |<br>+———-+————+———–+<br>|        1 |    1388.00 |   1388.00 |<br>|        4 |      58.00 |    986.00 |<br>|        3 |      68.00 |   1632.00 |<br>|        5 |      20.00 |    160.00 |<br>|        6 |      42.00 |    630.00 |<br>|        7 |     100.00 |   2000.00 |<br>|        8 |     399.00 |    399.00 |<br>|        9 |    2298.00 |   9192.00 |<br>|       10 |    1328.00 |   9296.00 |<br>|       11 |    1300.00 |   1300.00 |<br>|       12 |     983.00 |   7864.00 |<br>|       13 |    1311.00 |  10488.00 |<br>|       14 |    2625.00 |   2625.00 |<br>|       15 |     788.00 |   2364.00 |<br>|       16 |     823.33 |      0.00 |<br>|       17 |    2300.00 |   2300.00 |<br>|       18 |    2878.00 |   2878.00 |<br>|       19 |     858.00 |  10296.00 |<br>|       20 |     280.00 |   3360.00 |<br>|       21 |    2000.00 |  80000.00 |<br>|       22 |    5999.00 |   5999.00 |<br>|       23 |    3700.00 |  29600.00 |<br>|       24 |    2000.00 | 200000.00 |<br>|       25 |      48.00 |     96.00 |<br>|       26 |      19.00 |     38.00 |<br>|       27 |      95.00 |    190.00 |<br>|       28 |      45.00 |      0.00 |<br>|       29 |      90.00 |      0.00 |<br>|       30 |      18.00 |    162.00 |<br>|       31 |    1337.00 |   1337.00 |<br>|       32 |    3010.00 |  12040.00 |<br>+———-+————+———–+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; #查询该店积压的总货款<br>mysql&gt; select goods_number ,sum(goods_number*shop_price) as sum from goods;<br>+————–+———–+<br>| goods_number | sum       |<br>+————–+———–+<br>|            1 | 398620.00 |<br>+————–+———–+<br>1 row in set (0.07 sec)</p><p>mysql&gt; select sum(goods_number*shop_price) as sum from goods;<br>+———–+<br>| sum       |<br>+———–+<br>| 398620.00 |<br>+———–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #查询每个栏目下积压的k货款<br>mysql&gt; select cat_id, sum(goods_number*shop_price) as sum from goods group by cat_id;<br>+——–+———–+<br>| cat_id | sum       |<br>+——–+———–+<br>|      4 |   6891.00 |<br>|      8 |   4618.00 |<br>|     11 |    790.00 |<br>|      3 | 356235.00 |<br>|      2 |      0.00 |<br>|      5 |  29600.00 |<br>|     13 |    134.00 |<br>|     15 |    190.00 |<br>|     14 |    162.00 |<br>+——–+———–+<br>9 rows in set (0.03 sec)</p><p>mysql&gt; #查询栏目的积压货款金额,且查出挤压金额超出20000的货款<br>mysql&gt; select cat_id, sum(goods_number*shop_price) as sum from goods  group by cat_id having sum&gt;20000;<br>+——–+———–+<br>| cat_id | sum       |<br>+——–+———–+<br>|      3 | 356235.00 |<br>|      5 |  29600.00 |<br>+——–+———–+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; #查询本店市场价与本店价省的钱,且筛选出省钱200以上的商品<br>mysql&gt; select goods_name, market_price-shop_price as discount from goods having discount&gt;200;<br>ERROR 1690 (22003): DECIMAL UNSIGNED value is out of range in ‘(<code>test01</code>.<code>goods</code>.<code>market_price</code> - <code>test01</code>.<code>goods</code>.<code>shop_price</code>)’<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.14 sec)</p><p>mysql&gt; select * from result;<br>+——–+———+——-+<br>| name   | subject | score |<br>+——–+———+——-+<br>| 张三   | 数学    |    90 |<br>| 张三   | 语文    |    50 |<br>| 张三   | 地理    |    40 |<br>| 李四   | 语文    |    55 |<br>| 李四   | 政治    |    45 |<br>| 王五   | 政治    |    30 |<br>+——–+———+——-+<br>6 rows in set (0.07 sec)</p><p>mysql&gt; #查询出两门及两门以上不及格者的平均成绩<br>mysql&gt; select avg(score) as average ,subject from result where subject&gt;=2  group by name having average&lt;60;<br>Empty set, 6 warnings (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,subject from result group by name;<br>+———+———+<br>| average | subject |<br>+———+———+<br>| 60.0000 | 数学    |<br>| 50.0000 | 语文    |<br>| 30.0000 | 政治    |<br>+———+———+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result group by name;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>| 60.0000 | 张三   |<br>| 50.0000 | 李四   |<br>| 30.0000 | 王五   |<br>+———+——–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where 1  group by name;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>| 60.0000 | 张三   |<br>| 50.0000 | 李四   |<br>| 30.0000 | 王五   |<br>+———+——–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where 1  group by name having average&lt;60 ;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>| 50.0000 | 李四   |<br>| 30.0000 | 王五   |<br>+———+——–+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where score&lt;60  group by name having avg(average) ;<br>Empty set (0.00 sec)</p><p>mysql&gt; select avg(score&lt;60) as average ,name from result where 1  group by name having avg(average) ;<br>Empty set (0.00 sec)</p><p>mysql&gt; select avg(score&lt;60) as average ,name from result where 1  group by name ;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>|  0.6667 | 张三   |<br>|  1.0000 | 李四   |<br>|  1.0000 | 王五   |<br>+———+——–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where score&lt;60  group by name ;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>| 45.0000 | 张三   |<br>| 50.0000 | 李四   |<br>| 30.0000 | 王五   |<br>+———+——–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where subject&gt;=2  group by name ;<br>Empty set, 6 warnings (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) from result where score&lt;60  group by name ;<br>+———+——–+—————-+<br>| average | name   | count(subject) |<br>+———+——–+—————-+<br>| 45.0000 | 张三   |              2 |<br>| 50.0000 | 李四   |              2 |<br>| 30.0000 | 王五   |              1 |<br>+———+——–+—————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) as subject from result where score&lt;60   group by name having subject&gt;=2  ;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 45.0000 | 张三   |       2 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) as subject from result where score&lt;60   group by name having subject&gt;=2 and avg(average);<br>Empty set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject)&gt;=2 as subject from result where score&lt;60   group by name having avg(average);<br>Empty set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) as subject from result where score&lt;60   group by name having subject&gt;=2;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 45.0000 | 张三   |       2 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where score&lt;60  group by name ;<br>+———+——–+<br>| average | name   |<br>+———+——–+<br>| 45.0000 | 张三   |<br>| 50.0000 | 李四   |<br>| 30.0000 | 王五   |<br>+———+——–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) from result where score&lt;60  group by name ;<br>+———+——–+—————-+<br>| average | name   | count(subject) |<br>+———+——–+—————-+<br>| 45.0000 | 张三   |              2 |<br>| 50.0000 | 李四   |              2 |<br>| 30.0000 | 王五   |              1 |<br>+———+——–+—————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject)&gt;=2 from result where score&lt;60  group by name ;<br>+———+——–+——————-+<br>| average | name   | count(subject)&gt;=2 |<br>+———+——–+——————-+<br>| 45.0000 | 张三   |                 1 |<br>| 50.0000 | 李四   |                 1 |<br>| 30.0000 | 王五   |                 0 |<br>+———+——–+——————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject)&gt;=2 from result where score&lt;60  group by name ;<br>+———+——–+——————-+<br>| average | name   | count(subject)&gt;=2 |<br>+———+——–+——————-+<br>| 45.0000 | 张三   |                 1 |<br>| 50.0000 | 李四   |                 1 |<br>| 30.0000 | 王五   |                 0 |<br>+———+——–+——————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name,count(subject) from result where score&lt;60  group by name ;<br>+———+——–+—————-+<br>| average | name   | count(subject) |<br>+———+——–+—————-+<br>| 45.0000 | 张三   |              2 |<br>| 50.0000 | 李四   |              2 |<br>| 30.0000 | 王五   |              1 |<br>+———+——–+—————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name from result where score&lt;60 and subject&gt;=2   group by name ;<br>Empty set, 5 warnings (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name, count(subject) from result where score&lt;60 and subject&gt;=2   group by name ;<br>Empty set, 5 warnings (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name, count(subject) from result where score&lt;60    group by name ;<br>+———+——–+—————-+<br>| average | name   | count(subject) |<br>+———+——–+—————-+<br>| 45.0000 | 张三   |              2 |<br>| 50.0000 | 李四   |              2 |<br>| 30.0000 | 王五   |              1 |<br>+———+——–+—————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select avg(score) as average ,name, count(subject) as subject from result where score&lt;60    group by name having subject&gt;=2  ;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 45.0000 | 张三   |       2 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; use test01<br>Database changed<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.42 sec)</p><p>mysql&gt; select avg(score) as average ,name, count(subject) as subject from result where score&lt;60    group by name having subject&gt;=2  ;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 45.0000 | 张三   |       2 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.14 sec)</p><p>mysql&gt; insert into resule values(“赵六”,”语文”,100),<br>    -&gt; (“赵六”,”数学”,99),<br>    -&gt; (“赵六”,”英语”,98);<br>ERROR 1146 (42S02): Table ‘test01.resule’ doesn’t exist<br>mysql&gt; insert into result values(“赵六”,”语文”,100),<br>    -&gt; (“赵六”,”数学”,99),<br>    -&gt; (“赵六”,”英语”,98);<br>Query OK, 3 rows affected (0.19 sec)<br>Records: 3  Duplicates: 0  Warnings: 0</p><p>mysql&gt; select * from result;<br>+——–+———+——-+<br>| name   | subject | score |<br>+——–+———+——-+<br>| 张三   | 数学    |    90 |<br>| 张三   | 语文    |    50 |<br>| 张三   | 地理    |    40 |<br>| 李四   | 语文    |    55 |<br>| 李四   | 政治    |    45 |<br>| 王五   | 政治    |    30 |<br>| 赵六   | 语文    |   100 |<br>| 赵六   | 数学    |    99 |<br>| 赵六   | 英语    |    98 |<br>+——–+———+——-+<br>9 rows in set (0.00 sec)</p><p>mysql&gt;  select avg(score) as average ,name, count(subject) as subject from result where score&lt;60    group by name having subject&gt;=2;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 45.0000 | 张三   |       2 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; insert into result values(“张三”,”英语”,34);<br>Query OK, 1 row affected (0.05 sec)</p><p>mysql&gt;  select avg(score) as average ,name, count(subject) as subject from result where score&lt;60    group by name having subject&gt;=2;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 41.3333 | 张三   |       3 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt;  select avg(score) as average ,name, sum(score&lt;60) as subject from result   group by name having subject&gt;=2;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 53.5000 | 张三   |       3 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt;  select avg(score) as average ,name, sum(score&lt;60) as subject from result   group by name having subject&gt;=2 order by average;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 50.0000 | 李四   |       2 |<br>| 53.5000 | 张三   |       3 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt;  select avg(score) as average ,name, sum(score&lt;60) as subject from result   group by name having subject&gt;=2 order by desc average;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘desc average’ at line 1<br>mysql&gt;  select avg(score) as average ,name, sum(score&lt;60) as subject from result   group by name having subject&gt;=2 order by  average desc;<br>+———+——–+———+<br>| average | name   | subject |<br>+———+——–+———+<br>| 53.5000 | 张三   |       3 |<br>| 50.0000 | 李四   |       2 |<br>+———+——–+———+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; #降序排 order by 列名 desc 降序/asc升序<br>mysql&gt;  select avg(score) as average ,name, sum(score&lt;60) as subject from result   group by name having subject&gt;=2 order by  add_time asc;<br>ERROR 1054 (42S22): Unknown column ‘add_time’ in ‘order clause’<br>mysql&gt; desc goods;<br>+————–+————————+——+—–+———+—————-+<br>| Field        | Type                   | Null | Key | Default | Extra          |<br>+————–+————————+——+—–+———+—————-+<br>| goods_id     | mediumint(8) unsigned  | NO   | PRI | NULL    | auto_increment |<br>| goods_name   | varchar(120)           | NO   |     |         |                |<br>| cat_id       | smallint(5) unsigned   | NO   |     | 0       |                |<br>| brand_id     | smallint(5) unsigned   | NO   |     | 0       |                |<br>| goods_sn     | char(15)               | NO   |     |         |                |<br>| goods_number | smallint(5) unsigned   | NO   |     | 0       |                |<br>| shop_price   | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| market_price | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| click_count  | int(10) unsigned       | NO   |     | 0       |                |<br>+————–+————————+——+—–+———+—————-+<br>9 rows in set (0.20 sec)</p><p>mysql&gt; select goods_name ,cat_id,goods_id,shop_price from goods order by asc cat_id ,shop_price desc;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘asc cat_id ,shop_price desc’ at line 1<br>mysql&gt; select goods_name ,cat_id,goods_id,shop_price from goods order by  cat_id asc ,shop_price desc;<br>+—————————————-+——–+———-+————+<br>| goods_name                             | cat_id | goods_id | shop_price |<br>+—————————————-+——–+———-+————+<br>| 恒基伟业g101                           |      2 |       16 |     823.33 |<br>| 多普达touch hd                         |      3 |       22 |    5999.00 |<br>| 诺基亚n85                              |      3 |       32 |    3010.00 |<br>| 夏新n7                                 |      3 |       17 |    2300.00 |<br>| 诺基亚e66                              |      3 |        9 |    2298.00 |<br>| 金立 a30                               |      3 |       21 |    2000.00 |<br>| p806                                   |      3 |       24 |    2000.00 |<br>| 摩托罗拉e8                             |      3 |       31 |    1337.00 |<br>| 索爱c702c                              |      3 |       10 |    1328.00 |<br>| 诺基亚5320 xpressmusic                 |      3 |       13 |    1311.00 |<br>| 索爱c702c                              |      3 |       11 |    1300.00 |<br>| 摩托罗拉a810                           |      3 |       12 |     983.00 |<br>| 三星sgh-f258                           |      3 |       19 |     858.00 |<br>| 摩托罗拉a810                           |      3 |       15 |     788.00 |<br>| 飞利浦9@9v                             |      3 |        8 |     399.00 |<br>| 三星bc01                               |      3 |       20 |     280.00 |<br>| 夏新t5                                 |      4 |       18 |    2878.00 |<br>| 诺基亚5800xm                           |      4 |       14 |    2625.00 |<br>| kd876                                  |      4 |        1 |    1388.00 |<br>| 诺基亚n96                              |      5 |       23 |    3700.00 |<br>| 诺基亚n85原装立体声耳机hs-82           |      8 |        7 |     100.00 |<br>| 诺基亚原装5800耳机                     |      8 |        3 |      68.00 |<br>| 诺基亚n85原装充电器                    |      8 |        4 |      58.00 |<br>| 胜创kingmax内存卡                      |     11 |        6 |      42.00 |<br>| 索爱原装m2卡读卡器                     |     11 |        5 |      20.00 |<br>| 小灵通/固话50元充值卡                  |     13 |       25 |      48.00 |<br>| 小灵通/固话20元充值卡                  |     13 |       26 |      19.00 |<br>| 移动100元充值卡                        |     14 |       29 |      90.00 |<br>| 移动20元充值卡                         |     14 |       30 |      18.00 |<br>| 联通100元充值卡                        |     15 |       27 |      95.00 |<br>| 联通50元充值卡                         |     15 |       28 |      45.00 |<br>+—————————————-+——–+———-+————+<br>31 rows in set (0.26 sec)</p><p>mysql&gt; #多排 用,隔开 order by cat_id asc ,shop_price desc<br>mysql&gt; exit<br>mysql&gt; use test01;<br>Database changed<br>mysql&gt; #limit 限制条目<br>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods where cat_id=3 order by shop_price desc limit 0,3;<br>+———-+——–+——————-+————+<br>| goods_id | cat_id | goods_name        | shop_price |<br>+———-+——–+——————-+————+<br>|       22 |      3 | 多普达touch hd    |    5999.00 |<br>|       32 |      3 | 诺基亚n85         |    3010.00 |<br>|       17 |      3 | 夏新n7            |    2300.00 |<br>+———-+——–+——————-+————+<br>3 rows in set (0.01 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods where cat_id=3 order by shop_price desc limit 2,2;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       17 |      3 | 夏新n7       |    2300.00 |<br>|        9 |      3 | 诺基亚e66    |    2298.00 |<br>+———-+——–+————–+————+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods where cat_id=3 order by shop_price desc limit 2,3;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       17 |      3 | 夏新n7       |    2300.00 |<br>|        9 |      3 | 诺基亚e66    |    2298.00 |<br>|       21 |      3 | 金立 a30     |    2000.00 |<br>+———-+——–+————–+————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #limit 第一个参数为0可以不写<br>mysql&gt; #查询出每个栏目下id号最大的一条商品<br>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods where 1 group by cat_id order by goods_id desc limit 1;<br>+———-+——–+———————–+————+<br>| goods_id | cat_id | goods_name            | shop_price |<br>+———-+——–+———————–+————+<br>|       29 |     14 | 移动100元充值卡       |      90.00 |<br>+———-+——–+———————–+————+<br>1 row in set (0.06 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods where 1 group by cat_id ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name,shop_price from goods  group by cat_id ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,goods_name,shop_price from goods  group by cat_id ;<br>+——–+——————————–+————+<br>| cat_id | goods_name                     | shop_price |<br>+——–+——————————–+————+<br>|      4 | kd876                          |    1388.00 |<br>|      8 | 诺基亚n85原装充电器            |      58.00 |<br>|     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|      3 | 飞利浦9@9v                     |     399.00 |<br>|      2 | 恒基伟业g101                   |     823.33 |<br>|      5 | 诺基亚n96                      |    3700.00 |<br>|     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|     15 | 联通100元充值卡                |      95.00 |<br>|     14 | 移动100元充值卡                |      90.00 |<br>+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods   group by cat_id=3  ;<br>+———-+——–+—————+————+<br>| goods_id | cat_id | goods_name    | shop_price |<br>+———-+——–+—————+————+<br>|        1 |      4 | kd876         |    1388.00 |<br>|        8 |      3 | 飞利浦9@9v    |     399.00 |<br>+———-+——–+—————+————+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods group by cat_id ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods group by cat_id  order by cat_id asc ,goods_id desc ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|        1 |      4 | kd876                          |    1388.00 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as tem group by cat_id  ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.04 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as tem group by cat_id  order by cat_id asc ,goods_id desc limit 1  ;<br>+———-+——–+——————+————+<br>| goods_id | cat_id | goods_name       | shop_price |<br>+———-+——–+——————+————+<br>|       16 |      2 | 恒基伟业g101     |     823.33 |<br>+———-+——–+——————+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as tem group by cat_id  order by cat_id asc ,goods_id desc ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|        1 |      4 | kd876                          |    1388.00 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as temp order by cat_id asc ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as temp group by cat_id order by cat_id asc ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|        1 |      4 | kd876                          |    1388.00 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id, cat_id,goods_name,shop_price from goods order by cat_id asc ,goods_id desc) as temp group by cat_id  ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods where cat_id=3 order by goods_id desc limit 1 ;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       32 |      3 | 诺基亚n85    |    3010.00 |<br>+———-+——–+————–+————+<br>1 row in set (0.07 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods  order by goods_id desc limit 1 ;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       32 |      3 | 诺基亚n85    |    3010.00 |<br>+———-+——–+————–+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods  order by goods_id desc limit 1 ;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       32 |      3 | 诺基亚n85    |    3010.00 |<br>+———-+——–+————–+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods  order by goods_id desc  ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods group by cat_id  order by goods_id desc  ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        1 |      4 | kd876                          |    1388.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods group by cat_id  ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|        1 |      4 | kd876                          |    1388.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods group by cat_id  order by goods_id desc  ;<br>+———-+——–+——————————–+————+<br>| goods_id | cat_id | goods_name                     | shop_price |<br>+———-+——–+——————————–+————+<br>|       29 |     14 | 移动100元充值卡                |      90.00 |<br>|       27 |     15 | 联通100元充值卡                |      95.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|       23 |      5 | 诺基亚n96                      |    3700.00 |<br>|       16 |      2 | 恒基伟业g101                   |     823.33 |<br>|        8 |      3 | 飞利浦9@9v                     |     399.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|        4 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|        1 |      4 | kd876                          |    1388.00 |<br>+———-+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id,goods_name,shop_price from goods  order by goods_id desc limit 1 ;<br>+———-+——–+————–+————+<br>| goods_id | cat_id | goods_name   | shop_price |<br>+———-+——–+————–+————+<br>|       32 |      3 | 诺基亚n85    |    3010.00 |<br>+———-+——–+————–+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select max(goods_id), cat_id,goods_name,shop_price from goods  order by goods_id desc ;<br>+—————+——–+————+————+<br>| max(goods_id) | cat_id | goods_name | shop_price |<br>+—————+——–+————+————+<br>|            32 |      4 | kd876      |    1388.00 |<br>+—————+——–+————+————+<br>1 row in set (0.06 sec)</p><p>mysql&gt; select goods_id ,cat_id ,goods_name from goods<br>    -&gt; ;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|        1 |      4 | kd876                                  |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|        9 |      3 | 诺基亚e66                              |<br>|       10 |      3 | 索爱c702c                              |<br>|       11 |      3 | 索爱c702c                              |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       16 |      2 | 恒基伟业g101                           |<br>|       17 |      3 | 夏新n7                                 |<br>|       18 |      4 | 夏新t5                                 |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       20 |      3 | 三星bc01                               |<br>|       21 |      3 | 金立 a30                               |<br>|       22 |      3 | 多普达touch hd                         |<br>|       23 |      5 | 诺基亚n96                              |<br>|       24 |      3 | p806                                   |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       27 |     15 | 联通100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       32 |      3 | 诺基亚n85                              |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select max(goods_id), cat_id,goods_name,shop_price from goods group by cat_id ;<br>+—————+——–+——————————–+————+<br>| max(goods_id) | cat_id | goods_name                     | shop_price |<br>+—————+——–+——————————–+————+<br>|            18 |      4 | kd876                          |    1388.00 |<br>|             7 |      8 | 诺基亚n85原装充电器            |      58.00 |<br>|             6 |     11 | 索爱原装m2卡读卡器             |      20.00 |<br>|            32 |      3 | 飞利浦9@9v                     |     399.00 |<br>|            16 |      2 | 恒基伟业g101                   |     823.33 |<br>|            23 |      5 | 诺基亚n96                      |    3700.00 |<br>|            26 |     13 | 小灵通/固话50元充值卡          |      48.00 |<br>|            28 |     15 | 联通100元充值卡                |      95.00 |<br>|            30 |     14 | 移动100元充值卡                |      90.00 |<br>+—————+——–+——————————–+————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select max(goods_id), cat_id from goods group by cat_id ;<br>+—————+——–+<br>| max(goods_id) | cat_id |<br>+—————+——–+<br>|            18 |      4 |<br>|             7 |      8 |<br>|             6 |     11 |<br>|            32 |      3 |<br>|            16 |      2 |<br>|            23 |      5 |<br>|            26 |     13 |<br>|            28 |     15 |<br>|            30 |     14 |<br>+—————+——–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select max(goods_id) as goods_id, cat_id from goods group by cat_id ) as temp where cat_id=cat_id ;<br>+———-+——–+<br>| goods_id | cat_id |<br>+———-+——–+<br>|       18 |      4 |<br>|        7 |      8 |<br>|        6 |     11 |<br>|       32 |      3 |<br>|       16 |      2 |<br>|       23 |      5 |<br>|       26 |     13 |<br>|       28 |     15 |<br>|       30 |     14 |<br>+———-+——–+<br>9 rows in set (0.06 sec)</p><p>mysql&gt; select cat_id ,count(goods_name) from goods group by cat_id;<br>+——–+——————-+<br>| cat_id | count(goods_name) |<br>+——–+——————-+<br>|      4 |                 3 |<br>|      8 |                 3 |<br>|     11 |                 2 |<br>|      3 |                15 |<br>|      2 |                 1 |<br>|      5 |                 1 |<br>|     13 |                 2 |<br>|     15 |                 2 |<br>|     14 |                 2 |<br>+——–+——————-+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id) from goods group by cat_id;<br>+——–+—————+<br>| cat_id | max(goods_id) |<br>+——–+—————+<br>|      4 |            18 |<br>|      8 |             7 |<br>|     11 |             6 |<br>|      3 |            32 |<br>|      2 |            16 |<br>|      5 |            23 |<br>|     13 |            26 |<br>|     15 |            28 |<br>|     14 |            30 |<br>+——–+—————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id),max(goods_name) from goods group by cat_id;<br>+——–+—————+——————————–+<br>| cat_id | max(goods_id) | max(goods_name)                |<br>+——–+—————+——————————–+<br>|      4 |            18 | 诺基亚5800xm                   |<br>|      8 |             7 | 诺基亚原装5800耳机             |<br>|     11 |             6 | 胜创kingmax内存卡              |<br>|      3 |            32 | 飞利浦9@9v                     |<br>|      2 |            16 | 恒基伟业g101                   |<br>|      5 |            23 | 诺基亚n96                      |<br>|     13 |            26 | 小灵通/固话50元充值卡          |<br>|     15 |            28 | 联通50元充值卡                 |<br>|     14 |            30 | 移动20元充值卡                 |<br>+——–+—————+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id) from goods ;<br>+——–+—————+<br>| cat_id | max(goods_id) |<br>+——–+—————+<br>|      4 |            32 |<br>+——–+—————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select cat_id, goods_id,goods_name from goods order by goods_id desc ;<br>+——–+———-+—————————————-+<br>| cat_id | goods_id | goods_name                             |<br>+——–+———-+—————————————-+<br>|      3 |       32 | 诺基亚n85                              |<br>|      3 |       31 | 摩托罗拉e8                             |<br>|     14 |       30 | 移动20元充值卡                         |<br>|     14 |       29 | 移动100元充值卡                        |<br>|     15 |       28 | 联通50元充值卡                         |<br>|     15 |       27 | 联通100元充值卡                        |<br>|     13 |       26 | 小灵通/固话20元充值卡                  |<br>|     13 |       25 | 小灵通/固话50元充值卡                  |<br>|      3 |       24 | p806                                   |<br>|      5 |       23 | 诺基亚n96                              |<br>|      3 |       22 | 多普达touch hd                         |<br>|      3 |       21 | 金立 a30                               |<br>|      3 |       20 | 三星bc01                               |<br>|      3 |       19 | 三星sgh-f258                           |<br>|      4 |       18 | 夏新t5                                 |<br>|      3 |       17 | 夏新n7                                 |<br>|      2 |       16 | 恒基伟业g101                           |<br>|      3 |       15 | 摩托罗拉a810                           |<br>|      4 |       14 | 诺基亚5800xm                           |<br>|      3 |       13 | 诺基亚5320 xpressmusic                 |<br>|      3 |       12 | 摩托罗拉a810                           |<br>|      3 |       11 | 索爱c702c                              |<br>|      3 |       10 | 索爱c702c                              |<br>|      3 |        9 | 诺基亚e66                              |<br>|      3 |        8 | 飞利浦9@9v                             |<br>|      8 |        7 | 诺基亚n85原装立体声耳机hs-82           |<br>|     11 |        6 | 胜创kingmax内存卡                      |<br>|     11 |        5 | 索爱原装m2卡读卡器                     |<br>|      8 |        4 | 诺基亚n85原装充电器                    |<br>|      8 |        3 | 诺基亚原装5800耳机                     |<br>|      4 |        1 | kd876                                  |<br>+——–+———-+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id) from goods ;<br>+——–+—————+<br>| cat_id | max(goods_id) |<br>+——–+—————+<br>|      4 |            32 |<br>+——–+—————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select cat_id, goods_id,goods_name from goods order by goods_id desc ;<br>+——–+———-+—————————————-+<br>| cat_id | goods_id | goods_name                             |<br>+——–+———-+—————————————-+<br>|      3 |       32 | 诺基亚n85                              |<br>|      3 |       31 | 摩托罗拉e8                             |<br>|     14 |       30 | 移动20元充值卡                         |<br>|     14 |       29 | 移动100元充值卡                        |<br>|     15 |       28 | 联通50元充值卡                         |<br>|     15 |       27 | 联通100元充值卡                        |<br>|     13 |       26 | 小灵通/固话20元充值卡                  |<br>|     13 |       25 | 小灵通/固话50元充值卡                  |<br>|      3 |       24 | p806                                   |<br>|      5 |       23 | 诺基亚n96                              |<br>|      3 |       22 | 多普达touch hd                         |<br>|      3 |       21 | 金立 a30                               |<br>|      3 |       20 | 三星bc01                               |<br>|      3 |       19 | 三星sgh-f258                           |<br>|      4 |       18 | 夏新t5                                 |<br>|      3 |       17 | 夏新n7                                 |<br>|      2 |       16 | 恒基伟业g101                           |<br>|      3 |       15 | 摩托罗拉a810                           |<br>|      4 |       14 | 诺基亚5800xm                           |<br>|      3 |       13 | 诺基亚5320 xpressmusic                 |<br>|      3 |       12 | 摩托罗拉a810                           |<br>|      3 |       11 | 索爱c702c                              |<br>|      3 |       10 | 索爱c702c                              |<br>|      3 |        9 | 诺基亚e66                              |<br>|      3 |        8 | 飞利浦9@9v                             |<br>|      8 |        7 | 诺基亚n85原装立体声耳机hs-82           |<br>|     11 |        6 | 胜创kingmax内存卡                      |<br>|     11 |        5 | 索爱原装m2卡读卡器                     |<br>|      8 |        4 | 诺基亚n85原装充电器                    |<br>|      8 |        3 | 诺基亚原装5800耳机                     |<br>|      4 |        1 | kd876                                  |<br>+——–+———-+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id) from goods ;<br>+——–+—————+<br>| cat_id | max(goods_id) |<br>+——–+—————+<br>|      4 |            32 |<br>+——–+—————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select cat_id ,max(goods_id) from goods group by cat_id;<br>+——–+—————+<br>| cat_id | max(goods_id) |<br>+——–+—————+<br>|      4 |            18 |<br>|      8 |             7 |<br>|     11 |             6 |<br>|      3 |            32 |<br>|      2 |            16 |<br>|      5 |            23 |<br>|     13 |            26 |<br>|     15 |            28 |<br>|     14 |            30 |<br>+——–+—————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id ,goods_name,cat_id from goods where goods_id in(select max(goods_id) from goods group by cat_id) ;<br>+———-+—————————————-+——–+<br>| goods_id | goods_name                             | cat_id |<br>+———-+—————————————-+——–+<br>|        6 | 胜创kingmax内存卡                      |     11 |<br>|        7 | 诺基亚n85原装立体声耳机hs-82           |      8 |<br>|       16 | 恒基伟业g101                           |      2 |<br>|       18 | 夏新t5                                 |      4 |<br>|       23 | 诺基亚n96                              |      5 |<br>|       26 | 小灵通/固话20元充值卡                  |     13 |<br>|       28 | 联通50元充值卡                         |     15 |<br>|       30 | 移动20元充值卡                         |     14 |<br>|       32 | 诺基亚n85                              |      3 |<br>+———-+—————————————-+——–+<br>9 rows in set (0.06 sec)</p><p>mysql&gt; select * from(select goods_id,cat_id ,goods_name from goods order by goods_id desc ) as temp  group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select * from(select goods_id,cat_id ,goods_name from goods order by goods_id desc)  as temp  group by temp.cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id ,goods_name from goods order by goods_id desc;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       32 |      3 | 诺基亚n85                              |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       27 |     15 | 联通100元充值卡                        |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       24 |      3 | p806                                   |<br>|       23 |      5 | 诺基亚n96                              |<br>|       22 |      3 | 多普达touch hd                         |<br>|       21 |      3 | 金立 a30                               |<br>|       20 |      3 | 三星bc01                               |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       18 |      4 | 夏新t5                                 |<br>|       17 |      3 | 夏新n7                                 |<br>|       16 |      2 | 恒基伟业g101                           |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       11 |      3 | 索爱c702c                              |<br>|       10 |      3 | 索爱c702c                              |<br>|        9 |      3 | 诺基亚e66                              |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        1 |      4 | kd876                                  |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,goods_name from (select goods_id,cat_id ,goods_name from goods order by goods_id desc) as temp group by cat_id;<br>+——–+——————————–+<br>| cat_id | goods_name                     |<br>+——–+——————————–+<br>|      4 | kd876                          |<br>|      8 | 诺基亚n85原装充电器            |<br>|     11 | 索爱原装m2卡读卡器             |<br>|      3 | 飞利浦9@9v                     |<br>|      2 | 恒基伟业g101                   |<br>|      5 | 诺基亚n96                      |<br>|     13 | 小灵通/固话50元充值卡          |<br>|     15 | 联通100元充值卡                |<br>|     14 | 移动100元充值卡                |<br>+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select temp.cat_id,goods_name from (select goods_id,cat_id ,goods_name from goods order by goods_id desc) as temp group by temp.cat_id;<br>+——–+——————————–+<br>| cat_id | goods_name                     |<br>+——–+——————————–+<br>|      4 | kd876                          |<br>|      8 | 诺基亚n85原装充电器            |<br>|     11 | 索爱原装m2卡读卡器             |<br>|      3 | 飞利浦9@9v                     |<br>|      2 | 恒基伟业g101                   |<br>|      5 | 诺基亚n96                      |<br>|     13 | 小灵通/固话50元充值卡          |<br>|     15 | 联通100元充值卡                |<br>|     14 | 移动100元充值卡                |<br>+——–+——————————–+<br>9 rows in set (0.05 sec)</p><p>mysql&gt; #子查询<br>mysql&gt; #查询商品id最大的商品不用排序<br>mysql&gt; select goods_id ,cat_id ,goods_name from goods where goods_id=(select max(goods_id) from goods);<br>+———-+——–+————–+<br>| goods_id | cat_id | goods_name   |<br>+———-+——–+————–+<br>|       32 |      3 | 诺基亚n85    |<br>+———-+——–+————–+<br>1 row in set (0.05 sec)</p><p>mysql&gt; #如果where型子查询 即where 列=(内层sql 返回的是必是单行单列单个值,) 若where 列 in(内层sql)只能是单列多行<br>mysql&gt; #from型子查询,内部查询的结果当作外部查询的表s<br>mysql&gt; select goods_id ,cat_id ,goods_name from (select goods_id ,cat_id ,goods_name from goods order by cat_id asc,goods_id desc) as temp group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id ,cat_id ,goods_name from goods order by cat_id asc,goods_id desc;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       24 |      3 | p806                                   |<br>|       22 |      3 | 多普达touch hd                         |<br>|       21 |      3 | 金立 a30                               |<br>|       20 |      3 | 三星bc01                               |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       17 |      3 | 夏新n7                                 |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       11 |      3 | 索爱c702c                              |<br>|       10 |      3 | 索爱c702c                              |<br>|        9 |      3 | 诺基亚e66                              |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|       18 |      4 | 夏新t5                                 |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|        1 |      4 | kd876                                  |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       27 |     15 | 联通100元充值卡                        |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id ,cat_id ,goods_name from goods order by cat_id asc,goods_id desc) as temp group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select * from (select goods_id ,cat_id ,goods_name from goods order by cat_id asc,goods_id desc) as temp group by temp.cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from (select goods_id as goods_id ,cat_id as cat_id ,goods_name as goods_name from goods order by cat_id asc,goods_id desc) as temp group by temp.cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id, cat_id, goods_name from (select goods_id, goods_name, cat_id from goods order by cat_id asc, goods_id desc) as tmp group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; exit<br>mysql&gt; show databases;<br>+——————–+<br>| Database           |<br>+——————–+<br>| bookstore          |<br>| clouddb01          |<br>| clouddb02          |<br>| clouddb03          |<br>| information_schema |<br>| mydb               |<br>| mysql              |<br>| performance_schema |<br>| shop               |<br>| ssm_crud           |<br>| struts             |<br>| student            |<br>| sys                |<br>| test               |<br>| test01             |<br>+——————–+<br>15 rows in set (0.35 sec)</p><p>mysql&gt; use test01;<br>Database changed<br>mysql&gt; select goods_id,cat_id,goods_name from goods order by goods_id desc ,cat_id asc;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       32 |      3 | 诺基亚n85                              |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       27 |     15 | 联通100元充值卡                        |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       24 |      3 | p806                                   |<br>|       23 |      5 | 诺基亚n96                              |<br>|       22 |      3 | 多普达touch hd                         |<br>|       21 |      3 | 金立 a30                               |<br>|       20 |      3 | 三星bc01                               |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       18 |      4 | 夏新t5                                 |<br>|       17 |      3 | 夏新n7                                 |<br>|       16 |      2 | 恒基伟业g101                           |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       11 |      3 | 索爱c702c                              |<br>|       10 |      3 | 索爱c702c                              |<br>|        9 |      3 | 诺基亚e66                              |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        1 |      4 | kd876                                  |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from  goods order by cat_id  desc ;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       27 |     15 | 联通100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|       23 |      5 | 诺基亚n96                              |<br>|        1 |      4 | kd876                                  |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|       18 |      4 | 夏新t5                                 |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|        9 |      3 | 诺基亚e66                              |<br>|       10 |      3 | 索爱c702c                              |<br>|       11 |      3 | 索爱c702c                              |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       17 |      3 | 夏新n7                                 |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       20 |      3 | 三星bc01                               |<br>|       21 |      3 | 金立 a30                               |<br>|       22 |      3 | 多普达touch hd                         |<br>|       24 |      3 | p806                                   |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       32 |      3 | 诺基亚n85                              |<br>|       16 |      2 | 恒基伟业g101                           |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from(select goods_id,cat_id,goods_name from goods order by cat_id,goods_id desc) as tmp;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       24 |      3 | p806                                   |<br>|       22 |      3 | 多普达touch hd                         |<br>|       21 |      3 | 金立 a30                               |<br>|       20 |      3 | 三星bc01                               |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       17 |      3 | 夏新n7                                 |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       11 |      3 | 索爱c702c                              |<br>|       10 |      3 | 索爱c702c                              |<br>|        9 |      3 | 诺基亚e66                              |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|       18 |      4 | 夏新t5                                 |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|        1 |      4 | kd876                                  |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       27 |     15 | 联通100元充值卡                        |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from(select goods_id,cat_id,goods_name from goods order by cat_id,goods_id desc) as tmp group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|        1 |      4 | kd876                          |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|       16 |      2 | 恒基伟业g101                   |<br>|       23 |      5 | 诺基亚n96                      |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       27 |     15 | 联通100元充值卡                |<br>|       29 |     14 | 移动100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; desc goods;<br>+————–+————————+——+—–+———+—————-+<br>| Field        | Type                   | Null | Key | Default | Extra          |<br>+————–+————————+——+—–+———+—————-+<br>| goods_id     | mediumint(8) unsigned  | NO   | PRI | NULL    | auto_increment |<br>| goods_name   | varchar(120)           | NO   |     |         |                |<br>| cat_id       | smallint(5) unsigned   | NO   |     | 0       |                |<br>| brand_id     | smallint(5) unsigned   | NO   |     | 0       |                |<br>| goods_sn     | char(15)               | NO   |     |         |                |<br>| goods_number | smallint(5) unsigned   | NO   |     | 0       |                |<br>| shop_price   | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| market_price | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| click_count  | int(10) unsigned       | NO   |     | 0       |                |<br>+————–+————————+——+—–+———+—————-+<br>9 rows in set (0.18 sec)</p><p>mysql&gt; alter table goods add index cat(cat_id);<br>Query OK, 31 rows affected (1.05 sec)<br>Records: 31  Duplicates: 0  Warnings: 0</p><p>mysql&gt; select goods_id,cat_id,goods_name from(select goods_id,cat_id,goods_name from goods order by cat_id,goods_id desc) as tmp group by cat_id;<br>+———-+——–+——————————–+<br>| goods_id | cat_id | goods_name                     |<br>+———-+——–+——————————–+<br>|       16 |      2 | 恒基伟业g101                   |<br>|        8 |      3 | 飞利浦9@9v                     |<br>|        1 |      4 | kd876                          |<br>|       23 |      5 | 诺基亚n96                      |<br>|        4 |      8 | 诺基亚n85原装充电器            |<br>|        5 |     11 | 索爱原装m2卡读卡器             |<br>|       25 |     13 | 小灵通/固话50元充值卡          |<br>|       29 |     14 | 移动100元充值卡                |<br>|       27 |     15 | 联通100元充值卡                |<br>+———-+——–+——————————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from(select goods_id,cat_id,goods_name from goods order by cat_id,goods_id desc limit 1000) as tmp group by cat_id;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       18 |      4 | 夏新t5                                 |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       28 |     15 | 联通50元充值卡                         |<br>+———-+——–+—————————————-+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name from goods where goods_id in(select max(goods_id) from goods group by cat_id) group by cat_id;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       18 |      4 | 夏新t5                                 |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       28 |     15 | 联通50元充值卡                         |<br>+———-+——–+—————————————-+<br>9 rows in set (0.04 sec)</p><p>mysql&gt; #exits子查询<br>mysql&gt; #from子查询的排序要加limit<br>mysql&gt; #exists 存在,exists 子查询<br>mysql&gt; #查出有商品的栏目<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.06 sec)</p><p>mysql&gt; desc category;<br>+———–+———————-+——+—–+———+—————-+<br>| Field     | Type                 | Null | Key | Default | Extra          |<br>+———–+———————-+——+—–+———+—————-+<br>| cat_id    | smallint(5) unsigned | NO   | PRI | NULL    | auto_increment |<br>| cat_name  | varchar(90)          | NO   |     |         |                |<br>| parent_id | smallint(5) unsigned | YES  |     | NULL    |                |<br>+———–+———————-+——+—–+———+—————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select * from  category;<br>+——–+—————————+———–+<br>| cat_id | cat_name                  | parent_id |<br>+——–+—————————+———–+<br>|      1 | 手机类型                  |         0 |<br>|      2 | CDMA手机                  |         1 |<br>|      3 | GSM手机                   |         1 |<br>|      4 | 3G手机                    |         1 |<br>|      5 | 双模手机                  |         1 |<br>|      6 | 手机配件                  |         0 |<br>|      7 | 充电器                    |         6 |<br>|      8 | 耳机                      |         6 |<br>|      9 | 电池                      |         6 |<br>|     11 | 读卡器和内存卡            |         6 |<br>|     12 | 充值卡                    |         0 |<br>|     13 | 小灵通/固话充值卡         |        12 |<br>|     14 | 移动手机充值卡            |        12 |<br>|     15 | 联通手机充值卡            |        12 |<br>+——–+—————————+———–+<br>14 rows in set (0.07 sec)</p><p>mysql&gt; desc goods;<br>+————–+————————+——+—–+———+—————-+<br>| Field        | Type                   | Null | Key | Default | Extra          |<br>+————–+————————+——+—–+———+—————-+<br>| goods_id     | mediumint(8) unsigned  | NO   | PRI | NULL    | auto_increment |<br>| goods_name   | varchar(120)           | NO   |     |         |                |<br>| cat_id       | smallint(5) unsigned   | NO   | MUL | 0       |                |<br>| brand_id     | smallint(5) unsigned   | NO   |     | 0       |                |<br>| goods_sn     | char(15)               | NO   |     |         |                |<br>| goods_number | smallint(5) unsigned   | NO   |     | 0       |                |<br>| shop_price   | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| market_price | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| click_count  | int(10) unsigned       | NO   |     | 0       |                |<br>+————–+————————+——+—–+———+—————-+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; show index from goods;<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment | Visible |<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>| goods |          0 | PRIMARY  |            1 | goods_id    | A         |          31 |     NULL |   NULL |      | BTREE      |         |               | YES     |<br>| goods |          1 | cat      |            1 | cat_id      | A         |        NULL |     NULL |   NULL |      | BTREE      |         |               | YES     |<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>2 rows in set (0.17 sec)</p><p>mysql&gt; drop index cat on goods;<br>Query OK, 31 rows affected (0.55 sec)<br>Records: 31  Duplicates: 0  Warnings: 0</p><p>mysql&gt; show index from goods;<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment | Visible |<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>| goods |          0 | PRIMARY  |            1 | goods_id    | A         |          31 |     NULL |   NULL |      | BTREE      |         |               | YES     |<br>+——-+————+———-+————–+————-+———–+————-+———-+——–+——+————+———+—————+———+<br>1 row in set (0.00 sec)</p><p>mysql&gt; desc goods;<br>+————–+————————+——+—–+———+—————-+<br>| Field        | Type                   | Null | Key | Default | Extra          |<br>+————–+————————+——+—–+———+—————-+<br>| goods_id     | mediumint(8) unsigned  | NO   | PRI | NULL    | auto_increment |<br>| goods_name   | varchar(120)           | NO   |     |         |                |<br>| cat_id       | smallint(5) unsigned   | NO   |     | 0       |                |<br>| brand_id     | smallint(5) unsigned   | NO   |     | 0       |                |<br>| goods_sn     | char(15)               | NO   |     |         |                |<br>| goods_number | smallint(5) unsigned   | NO   |     | 0       |                |<br>| shop_price   | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| market_price | decimal(10,2) unsigned | NO   |     | 0.00    |                |<br>| click_count  | int(10) unsigned       | NO   |     | 0       |                |<br>+————–+————————+——+—–+———+—————-+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; desc category;<br>+———–+———————-+——+—–+———+—————-+<br>| Field     | Type                 | Null | Key | Default | Extra          |<br>+———–+———————-+——+—–+———+—————-+<br>| cat_id    | smallint(5) unsigned | NO   | PRI | NULL    | auto_increment |<br>| cat_name  | varchar(90)          | NO   |     |         |                |<br>| parent_id | smallint(5) unsigned | YES  |     | NULL    |                |<br>+———–+———————-+——+—–+———+—————-+<br>3 rows in set (0.03 sec)</p><p>mysql&gt; select cat_name from category;<br>+—————————+<br>| cat_name                  |<br>+—————————+<br>| 手机类型                  |<br>| CDMA手机                  |<br>| GSM手机                   |<br>| 3G手机                    |<br>| 双模手机                  |<br>| 手机配件                  |<br>| 充电器                    |<br>| 耳机                      |<br>| 电池                      |<br>| 读卡器和内存卡            |<br>| 充值卡                    |<br>| 小灵通/固话充值卡         |<br>| 移动手机充值卡            |<br>| 联通手机充值卡            |<br>+—————————+<br>14 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,cat_name from category where exists(select * from goods where category.cat_id=goods_id);<br>+——–+—————————+<br>| cat_id | cat_name                  |<br>+——–+—————————+<br>|      1 | 手机类型                  |<br>|      3 | GSM手机                   |<br>|      4 | 3G手机                    |<br>|      5 | 双模手机                  |<br>|      6 | 手机配件                  |<br>|      7 | 充电器                    |<br>|      8 | 耳机                      |<br>|      9 | 电池                      |<br>|     11 | 读卡器和内存卡            |<br>|     12 | 充值卡                    |<br>|     13 | 小灵通/固话充值卡         |<br>|     14 | 移动手机充值卡            |<br>|     15 | 联通手机充值卡            |<br>+——–+—————————+<br>13 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,cat_name from category where exists(select * from goods where category.cat_id=goods.cat_id);<br>+——–+—————————+<br>| cat_id | cat_name                  |<br>+——–+—————————+<br>|      2 | CDMA手机                  |<br>|      3 | GSM手机                   |<br>|      4 | 3G手机                    |<br>|      5 | 双模手机                  |<br>|      8 | 耳机                      |<br>|     11 | 读卡器和内存卡            |<br>|     13 | 小灵通/固话充值卡         |<br>|     14 | 移动手机充值卡            |<br>|     15 | 联通手机充值卡            |<br>+——–+—————————+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; #为什么建表时加not null或default 0  ,不想出现null值<br>mysql&gt; #null判断只能用 is null 或is not nul<br>mysql&gt;<br>mysql&gt; #效率不高,影响索引效率<br>mysql&gt; select 100000<em>232344242<br>    -&gt; ;<br>+——————+<br>| 100000</em>232344242 |<br>+——————+<br>|   23234424200000 |<br>+——————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #左连接的语法<br>mysql&gt; a表不动,b表在右边滑动<br>    -&gt; #<br>    -&gt; \n<br>ERROR:<br>Unknown command ‘\n’.<br>    -&gt; ;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘a表不动,b表在右边滑动</p><p>\n’ at line 1<br>mysql&gt; #a表与b表通过什么关联行<br>mysql&gt; # a 表left join b on 条件 条件为真,则b表对应的行取出<br>mysql&gt; # a left join b on<br>mysql&gt; #将a left join b on 条件 设为c 表<br>mysql&gt; #可以对c表进行查询,可以查询a和b的列<br>mysql&gt; select  goods_id,cat_id,cat_name from goods left join category on goods.cat_id=category.cat_id;<br>ERROR 1052 (23000): Column ‘cat_id’ in field list is ambiguous<br>mysql&gt; select  goods_id,goods.cat_id,cat_name from goods left join category on goods.cat_id=category.cat_id;<br>+———-+——–+—————————+<br>| goods_id | cat_id | cat_name                  |<br>+———-+——–+—————————+<br>|        1 |      4 | 3G手机                    |<br>|        4 |      8 | 耳机                      |<br>|        3 |      8 | 耳机                      |<br>|        5 |     11 | 读卡器和内存卡            |<br>|        6 |     11 | 读卡器和内存卡            |<br>|        7 |      8 | 耳机                      |<br>|        8 |      3 | GSM手机                   |<br>|        9 |      3 | GSM手机                   |<br>|       10 |      3 | GSM手机                   |<br>|       11 |      3 | GSM手机                   |<br>|       12 |      3 | GSM手机                   |<br>|       13 |      3 | GSM手机                   |<br>|       14 |      4 | 3G手机                    |<br>|       15 |      3 | GSM手机                   |<br>|       16 |      2 | CDMA手机                  |<br>|       17 |      3 | GSM手机                   |<br>|       18 |      4 | 3G手机                    |<br>|       19 |      3 | GSM手机                   |<br>|       20 |      3 | GSM手机                   |<br>|       21 |      3 | GSM手机                   |<br>|       22 |      3 | GSM手机                   |<br>|       23 |      5 | 双模手机                  |<br>|       24 |      3 | GSM手机                   |<br>|       25 |     13 | 小灵通/固话充值卡         |<br>|       26 |     13 | 小灵通/固话充值卡         |<br>|       27 |     15 | 联通手机充值卡            |<br>|       28 |     15 | 联通手机充值卡            |<br>|       29 |     14 | 移动手机充值卡            |<br>|       30 |     14 | 移动手机充值卡            |<br>|       31 |      3 | GSM手机                   |<br>|       32 |      3 | GSM手机                   |<br>+———-+——–+—————————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select  goods_id,goods.cat_id,cat_name,goods_name from goods left join category on goods.cat_id=category.cat_id;<br>+———-+——–+—————————+—————————————-+<br>| goods_id | cat_id | cat_name                  | goods_name                             |<br>+———-+——–+—————————+—————————————-+<br>|        1 |      4 | 3G手机                    | kd876                                  |<br>|        4 |      8 | 耳机                      | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 耳机                      | 诺基亚原装5800耳机                     |<br>|        5 |     11 | 读卡器和内存卡            | 索爱原装m2卡读卡器                     |<br>|        6 |     11 | 读卡器和内存卡            | 胜创kingmax内存卡                      |<br>|        7 |      8 | 耳机                      | 诺基亚n85原装立体声耳机hs-82           |<br>|        8 |      3 | GSM手机                   | 飞利浦9@9v                             |<br>|        9 |      3 | GSM手机                   | 诺基亚e66                              |<br>|       10 |      3 | GSM手机                   | 索爱c702c                              |<br>|       11 |      3 | GSM手机                   | 索爱c702c                              |<br>|       12 |      3 | GSM手机                   | 摩托罗拉a810                           |<br>|       13 |      3 | GSM手机                   | 诺基亚5320 xpressmusic                 |<br>|       14 |      4 | 3G手机                    | 诺基亚5800xm                           |<br>|       15 |      3 | GSM手机                   | 摩托罗拉a810                           |<br>|       16 |      2 | CDMA手机                  | 恒基伟业g101                           |<br>|       17 |      3 | GSM手机                   | 夏新n7                                 |<br>|       18 |      4 | 3G手机                    | 夏新t5                                 |<br>|       19 |      3 | GSM手机                   | 三星sgh-f258                           |<br>|       20 |      3 | GSM手机                   | 三星bc01                               |<br>|       21 |      3 | GSM手机                   | 金立 a30                               |<br>|       22 |      3 | GSM手机                   | 多普达touch hd                         |<br>|       23 |      5 | 双模手机                  | 诺基亚n96                              |<br>|       24 |      3 | GSM手机                   | p806                                   |<br>|       25 |     13 | 小灵通/固话充值卡         | 小灵通/固话50元充值卡                  |<br>|       26 |     13 | 小灵通/固话充值卡         | 小灵通/固话20元充值卡                  |<br>|       27 |     15 | 联通手机充值卡            | 联通100元充值卡                        |<br>|       28 |     15 | 联通手机充值卡            | 联通50元充值卡                         |<br>|       29 |     14 | 移动手机充值卡            | 移动100元充值卡                        |<br>|       30 |     14 | 移动手机充值卡            | 移动20元充值卡                         |<br>|       31 |      3 | GSM手机                   | 摩托罗拉e8                             |<br>|       32 |      3 | GSM手机                   | 诺基亚n85                              |<br>+———-+——–+—————————+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select  goods_id,goods.cat_id,goods_name,cat_name from goods left join category on goods.cat_id=category.cat_id;<br>+———-+——–+—————————————-+—————————+<br>| goods_id | cat_id | goods_name                             | cat_name                  |<br>+———-+——–+—————————————-+—————————+<br>|        1 |      4 | kd876                                  | 3G手机                    |<br>|        4 |      8 | 诺基亚n85原装充电器                    | 耳机                      |<br>|        3 |      8 | 诺基亚原装5800耳机                     | 耳机                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     | 读卡器和内存卡            |<br>|        6 |     11 | 胜创kingmax内存卡                      | 读卡器和内存卡            |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           | 耳机                      |<br>|        8 |      3 | 飞利浦9@9v                             | GSM手机                   |<br>|        9 |      3 | 诺基亚e66                              | GSM手机                   |<br>|       10 |      3 | 索爱c702c                              | GSM手机                   |<br>|       11 |      3 | 索爱c702c                              | GSM手机                   |<br>|       12 |      3 | 摩托罗拉a810                           | GSM手机                   |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 | GSM手机                   |<br>|       14 |      4 | 诺基亚5800xm                           | 3G手机                    |<br>|       15 |      3 | 摩托罗拉a810                           | GSM手机                   |<br>|       16 |      2 | 恒基伟业g101                           | CDMA手机                  |<br>|       17 |      3 | 夏新n7                                 | GSM手机                   |<br>|       18 |      4 | 夏新t5                                 | 3G手机                    |<br>|       19 |      3 | 三星sgh-f258                           | GSM手机                   |<br>|       20 |      3 | 三星bc01                               | GSM手机                   |<br>|       21 |      3 | 金立 a30                               | GSM手机                   |<br>|       22 |      3 | 多普达touch hd                         | GSM手机                   |<br>|       23 |      5 | 诺基亚n96                              | 双模手机                  |<br>|       24 |      3 | p806                                   | GSM手机                   |<br>|       25 |     13 | 小灵通/固话50元充值卡                  | 小灵通/固话充值卡         |<br>|       26 |     13 | 小灵通/固话20元充值卡                  | 小灵通/固话充值卡         |<br>|       27 |     15 | 联通100元充值卡                        | 联通手机充值卡            |<br>|       28 |     15 | 联通50元充值卡                         | 联通手机充值卡            |<br>|       29 |     14 | 移动100元充值卡                        | 移动手机充值卡            |<br>|       30 |     14 | 移动20元充值卡                         | 移动手机充值卡            |<br>|       31 |      3 | 摩托罗拉e8                             | GSM手机                   |<br>|       32 |      3 | 诺基亚n85                              | GSM手机                   |<br>+———-+——–+—————————————-+—————————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; #取出第四个栏目的商品以及商品的栏目名称<br>mysql&gt; select  goods_id,goods.cat_id,goods_name,cat_name from goods left join category on goods.cat_id=category.cat_id where goods.cat_id=4;<br>+———-+——–+—————–+———-+<br>| goods_id | cat_id | goods_name      | cat_name |<br>+———-+——–+—————–+———-+<br>|        1 |      4 | kd876           | 3G手机   |<br>|       14 |      4 | 诺基亚5800xm    | 3G手机   |<br>|       18 |      4 | 夏新t5          | 3G手机   |<br>+———-+——–+—————–+———-+<br>3 rows in set (0.07 sec)</p><p>mysql&gt; #左右连接,左连接即左表不动,<br>mysql&gt; #a left join b 并不是说 a 一定是在b的左边<br>mysql&gt; #左右连接可以互换, a left join b =b right join a<br>mysql&gt; # 内链接 特点 所有有配偶的男生/女生 走到舞台上来, 其 左表和右表不匹配的不能出现<br>mysql&gt; # 集合的角度看,内链接是左右连接的交集;<br>mysql&gt; # 外连接,求的是并集,但是在mysql中不支持<br>mysql&gt; #左连接<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.60 sec)</p><p>mysql&gt; select * from t;<br>+——+————–+<br>| tid  | tname        |<br>+——+————–+<br>|    1 | 国安         |<br>|    2 | 申花         |<br>|    3 | 布尔联队     |<br>+——+————–+<br>3 rows in set (0.40 sec)</p><p>mysql&gt; select * from m;<br>+——+——+——+——+————+<br>| mid  | hid  | gid  | mres | matime     |<br>+——+——+——+——+————+<br>|    1 |    1 |    2 | 2:0  | 2006-05-21 |<br>|    2 |    2 |    3 | 1:2  | 2006-06-21 |<br>|    3 |    3 |    1 | 2:5  | 2006-06-25 |<br>|    4 |    2 |    1 | 3:2  | 2006-07-21 |<br>+——+——+——+——+————+<br>4 rows in set (0.10 sec)</p><p>mysql&gt; select m.mid,m.hid,t.tname,m.gid,t.tname from m left join t on m.hid=t.tid;<br>+——+——+————–+——+————–+<br>| mid  | hid  | tname        | gid  | tname        |<br>+——+——+————–+——+————–+<br>|    1 |    1 | 国安         |    2 | 国安         |<br>|    2 |    2 | 申花         |    3 | 申花         |<br>|    4 |    2 | 申花         |    1 | 申花         |<br>|    3 |    3 | 布尔联队     |    1 | 布尔联队     |<br>+——+——+————–+——+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select m.mid,m.hid,t.tname,m.gid from m left join t on m.hid=t.tid;<br>+——+——+————–+——+<br>| mid  | hid  | tname        | gid  |<br>+——+——+————–+——+<br>|    1 |    1 | 国安         |    2 |<br>|    2 |    2 | 申花         |    3 |<br>|    4 |    2 | 申花         |    1 |<br>|    3 |    3 | 布尔联队     |    1 |<br>+——+——+————–+——+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,t.tname,tem.gid,t.tname from (select m.mid,m.hid,t.tname,m.gid from m left join t on m.hid=t.tid) as tem  left join t on t.tid=tem.gid;<br>+——+——+————–+——+————–+<br>| mid  | hid  | tname        | gid  | tname        |<br>+——+——+————–+——+————–+<br>|    4 |    2 | 国安         |    1 | 国安         |<br>|    3 |    3 | 国安         |    1 | 国安         |<br>|    1 |    1 | 申花         |    2 | 申花         |<br>|    2 |    2 | 布尔联队     |    3 | 布尔联队     |<br>+——+——+————–+——+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,t.tname,tem.gid,t.tname from (select m.mid,m.hid,t.tname,m.gid from m left join t on m.hid=t.tid) as tem  left join t on t.tid=tem.gid order by tem.mid asc;<br>+——+——+————–+——+————–+<br>| mid  | hid  | tname        | gid  | tname        |<br>+——+——+————–+——+————–+<br>|    1 |    1 | 申花         |    2 | 申花         |<br>|    2 |    2 | 布尔联队     |    3 | 布尔联队     |<br>|    3 |    3 | 国安         |    1 | 国安         |<br>|    4 |    2 | 国安         |    1 | 国安         |<br>+——+——+————–+——+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,t.tname,tem.gid,t.tname from (select m.mid,m.hid,t.tname,m.gid from m left join t on m.hid=t.tid) as tem  left join t on tem.gid=t.tid order by tem.mid asc;<br>+——+——+————–+——+————–+<br>| mid  | hid  | tname        | gid  | tname        |<br>+——+——+————–+——+————–+<br>|    1 |    1 | 申花         |    2 | 申花         |<br>|    2 |    2 | 布尔联队     |    3 | 布尔联队     |<br>|    3 |    3 | 国安         |    1 | 国安         |<br>|    4 |    2 | 国安         |    1 | 国安         |<br>+——+——+————–+——+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,tem.tname,tem.gid,tem.tname from (select m.mid,m.hid,t.tname,m.gid from m left join t on m.hid=t.tid) as tem  left join t on tem.gid=t.tid order by tem.mid asc;<br>+——+——+————–+——+————–+<br>| mid  | hid  | tname        | gid  | tname        |<br>+——+——+————–+——+————–+<br>|    1 |    1 | 国安         |    2 | 国安         |<br>|    2 |    2 | 申花         |    3 | 申花         |<br>|    3 |    3 | 布尔联队     |    1 | 布尔联队     |<br>|    4 |    2 | 申花         |    1 | 申花         |<br>+——+——+————–+——+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select m.* from m left join t on m.hid=t.tid;<br>+——+——+——+——+————+<br>| mid  | hid  | gid  | mres | matime     |<br>+——+——+——+——+————+<br>|    1 |    1 |    2 | 2:0  | 2006-05-21 |<br>|    2 |    2 |    3 | 1:2  | 2006-06-21 |<br>|    4 |    2 |    1 | 3:2  | 2006-07-21 |<br>|    3 |    3 |    1 | 2:5  | 2006-06-25 |<br>+——+——+——+——+————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select m.*,t.tname from m left join t on m.hid=t.tid;<br>+——+——+——+——+————+————–+<br>| mid  | hid  | gid  | mres | matime     | tname        |<br>+——+——+——+——+————+————–+<br>|    1 |    1 |    2 | 2:0  | 2006-05-21 | 国安         |<br>|    2 |    2 |    3 | 1:2  | 2006-06-21 | 申花         |<br>|    4 |    2 |    1 | 3:2  | 2006-07-21 | 申花         |<br>|    3 |    3 |    1 | 2:5  | 2006-06-25 | 布尔联队     |<br>+——+——+——+——+————+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.<em>, t.tname  from (select m.</em>,t.tname from m left join t on m.hid=t.tid) as tem left join t on tem.gid=t.tid;<br>+——+——+——+——+————+————–+————–+<br>| mid  | hid  | gid  | mres | matime     | tname        | tname        |<br>+——+——+——+——+————+————–+————–+<br>|    4 |    2 |    1 | 3:2  | 2006-07-21 | 申花         | 国安         |<br>|    3 |    3 |    1 | 2:5  | 2006-06-25 | 布尔联队     | 国安         |<br>|    1 |    1 |    2 | 2:0  | 2006-05-21 | 国安         | 申花         |<br>|    2 |    2 |    3 | 1:2  | 2006-06-21 | 申花         | 布尔联队     |<br>+——+——+——+——+————+————–+————–+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select * from t;<br>+——+————–+<br>| tid  | tname        |<br>+——+————–+<br>|    1 | 国安         |<br>|    2 | 申花         |<br>|    3 | 布尔联队     |<br>+——+————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,tem.tname,tem.gid,t.tname,tem.mres,tem.matime  from (select m.mid ,m.hid,t.tname,m.gid,m.mres,m.matime from m left join t on m.hid=t.tid) as tem left join t on tem.gid=t.tid;<br>+——+——+————–+——+————–+——+————+<br>| mid  | hid  | tname        | gid  | tname        | mres | matime     |<br>+——+——+————–+——+————–+——+————+<br>|    4 |    2 | 申花         |    1 | 国安         | 3:2  | 2006-07-21 |<br>|    3 |    3 | 布尔联队     |    1 | 国安         | 2:5  | 2006-06-25 |<br>|    1 |    1 | 国安         |    2 | 申花         | 2:0  | 2006-05-21 |<br>|    2 |    2 | 申花         |    3 | 布尔联队     | 1:2  | 2006-06-21 |<br>+——+——+————–+——+————–+——+————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,tem.tname,tem.gid,t.tname,tem.mres,tem.matime  from (select m.mid ,m.hid,t.tname,m.gid,m.mres,m.matime from m left join t on m.hid=t.tid) as tem left join t on tem.gid=t.tid order by tem.mid;<br>+——+——+————–+——+————–+——+————+<br>| mid  | hid  | tname        | gid  | tname        | mres | matime     |<br>+——+——+————–+——+————–+——+————+<br>|    1 |    1 | 国安         |    2 | 申花         | 2:0  | 2006-05-21 |<br>|    2 |    2 | 申花         |    3 | 布尔联队     | 1:2  | 2006-06-21 |<br>|    3 |    3 | 布尔联队     |    1 | 国安         | 2:5  | 2006-06-25 |<br>|    4 |    2 | 申花         |    1 | 国安         | 3:2  | 2006-07-21 |<br>+——+——+————–+——+————–+——+————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select * from m;<br>+——+——+——+——+————+<br>| mid  | hid  | gid  | mres | matime     |<br>+——+——+——+——+————+<br>|    1 |    1 |    2 | 2:0  | 2006-05-21 |<br>|    2 |    2 |    3 | 1:2  | 2006-06-21 |<br>|    3 |    3 |    1 | 2:5  | 2006-06-25 |<br>|    4 |    2 |    1 | 3:2  | 2006-07-21 |<br>+——+——+——+——+————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select tem.mid,tem.hid,tem.tname,tem.gid,t.tname,tem.mres,tem.matime  from (select m.mid ,m.hid,t.tname,m.gid,m.mres,m.matime from m left join t on m.hid=t.tid) as tem left join t on tem.gid=t.tid where tem.matime between “2006-6-1” and “2006-7-1”  order by tem.mid;<br>+——+——+————–+——+————–+——+————+<br>| mid  | hid  | tname        | gid  | tname        | mres | matime     |<br>+——+——+————–+——+————–+——+————+<br>|    2 |    2 | 申花         |    3 | 布尔联队     | 1:2  | 2006-06-21 |<br>|    3 |    3 | 布尔联队     |    1 | 国安         | 2:5  | 2006-06-25 |<br>+——+——+————–+——+————–+——+————+<br>2 rows in set (0.06 sec)</p><p>mysql&gt; select m.mid ,m.hid,t.tname,m.gid,tem.tname,m.mres,m.matime from m left join t on m.hid=t.tid  left join t  as tem on m.gid=tem.tid where m.matime between “2006-6-1” and “2006-7-1”  order by m.mid;<br>+——+——+————–+——+————–+——+————+<br>| mid  | hid  | tname        | gid  | tname        | mres | matime     |<br>+——+——+————–+——+————–+——+————+<br>|    2 |    2 | 申花         |    3 | 布尔联队     | 1:2  | 2006-06-21 |<br>|    3 |    3 | 布尔联队     |    1 | 国安         | 2:5  | 2006-06-25 |<br>+——+——+————–+——+————–+——+————+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; exit<br>mysql&gt; use test01;<br>Database changed<br>mysql&gt; select goods_id,goods_name,shop_price from goods where shop_price&lt;50<br>    -&gt; ;<br>+———-+——————————–+————+<br>| goods_id | goods_name                     | shop_price |<br>+———-+——————————–+————+<br>|        5 | 索爱原装m2卡读卡器             |      20.00 |<br>|        6 | 胜创kingmax内存卡              |      42.00 |<br>|       25 | 小灵通/固话50元充值卡          |      48.00 |<br>|       26 | 小灵通/固话20元充值卡          |      19.00 |<br>|       28 | 联通50元充值卡                 |      45.00 |<br>|       30 | 移动20元充值卡                 |      18.00 |<br>+———-+——————————–+————+<br>6 rows in set (0.14 sec)</p><p>mysql&gt; #union 联合 语法 sql1 union sql2<br>mysql&gt; select goods_id,goods_name,shop_price from goods where shop_price&gt;4000;<br>+———-+——————-+————+<br>| goods_id | goods_name        | shop_price |<br>+———-+——————-+————+<br>|       22 | 多普达touch hd    |    5999.00 |<br>+———-+——————-+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select goods_id,goods_name,shop_price from goods where shop_price&gt;4000 union select goods_id,goods_name,shop_price from goods where shop_price&lt;50;<br>+———-+——————————–+————+<br>| goods_id | goods_name                     | shop_price |<br>+———-+——————————–+————+<br>|       22 | 多普达touch hd                 |    5999.00 |<br>|        5 | 索爱原装m2卡读卡器             |      20.00 |<br>|        6 | 胜创kingmax内存卡              |      42.00 |<br>|       25 | 小灵通/固话50元充值卡          |      48.00 |<br>|       26 | 小灵通/固话20元充值卡          |      19.00 |<br>|       28 | 联通50元充值卡                 |      45.00 |<br>|       30 | 移动20元充值卡                 |      18.00 |<br>+———-+——————————–+————+<br>7 rows in set (0.10 sec)</p><p>mysql&gt; #可以从两张表union联合查询<br>mysql&gt; #两个列名不一致 以第一个列名为准<br>mysql&gt; #union 满足的条件,只要结果集的列数一致就可以了<br>mysql&gt; #union后的结果集可以排序<br>mysql&gt; #格式: sql1 union sql2 order by<br>mysql&gt; # 用nuion 取出第4个栏目和第5个栏目的商品m,并按价格升序排列<br>mysql&gt; select goods_id ,cat_id, goods_name ,shop_price from goods union select goods_id ,cat_id ,goods_name ,shop_price from goods order by shop_price asc;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.05 sec)</p><p>mysql&gt; select goods_id ,cat_id, goods_name ,shop_price from goods where cat_id=4 union select goods_id ,cat_id ,goods_name ,shop_price from goods where cat_id=5 order by shop_price asc;<br>+———-+——–+—————–+————+<br>| goods_id | cat_id | goods_name      | shop_price |<br>+———-+——–+—————–+————+<br>|        1 |      4 | kd876           |    1388.00 |<br>|       14 |      4 | 诺基亚5800xm    |    2625.00 |<br>|       18 |      4 | 夏新t5          |    2878.00 |<br>|       23 |      5 | 诺基亚n96       |    3700.00 |<br>+———-+——–+—————–+————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; #取出第3个下价格前三高 的商品,和第四个栏目下价格前两高的商品用union完成</p><p>mysql&gt; select goods_id ,cat_id,goods_name ,shop_price from goods where cat_id=3 order by  shop_price desc limit 3;<br>+———-+——–+——————-+————+<br>| goods_id | cat_id | goods_name        | shop_price |<br>+———-+——–+——————-+————+<br>|       22 |      3 | 多普达touch hd    |    5999.00 |<br>|       32 |      3 | 诺基亚n85         |    3010.00 |<br>|       17 |      3 | 夏新n7            |    2300.00 |<br>+———-+——–+——————-+————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id ,cat_id ,goods_name ,shop_price from goods where cat_id=4 order by shop_price desc limit 2;<br>+———-+——–+—————–+————+<br>| goods_id | cat_id | goods_name      | shop_price |<br>+———-+——–+—————–+————+<br>|       18 |      4 | 夏新t5          |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm    |    2625.00 |<br>+———-+——–+—————–+————+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; (select goods_id ,cat_id,goods_name ,shop_price from goods where cat_id=3 order by  shop_price desc limit 3) union (select goods_id ,cat_id,goods_name ,shop_price from goods where cat_id=4 order by shop_price desc limit 2);<br>+———-+——–+——————-+————+<br>| goods_id | cat_id | goods_name        | shop_price |<br>+———-+——–+——————-+————+<br>|       22 |      3 | 多普达touch hd    |    5999.00 |<br>|       32 |      3 | 诺基亚n85         |    3010.00 |<br>|       17 |      3 | 夏新n7            |    2300.00 |<br>|       18 |      4 | 夏新t5            |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm      |    2625.00 |<br>+———-+——–+——————-+————+<br>5 rows in set (0.00 sec)</p><p>mysql&gt; #这次内层的order by 不会失效是因为有limit,单纯的order by不会对结果集有影响,需要配合limit<br>mysql&gt; #如果union后的结果有重复如何解决<br>mysql&gt; #union会有去重的效果,不想去重可以用union all<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.08 sec)</p><p>mysql&gt; select * from a;<br>+——+——+<br>| id   | num  |<br>+——+——+<br>| a    |    5 |<br>| b    |   10 |<br>| c    |   15 |<br>| d    |   10 |<br>+——+——+<br>4 rows in set (0.15 sec)</p><p>mysql&gt; select  * from b;<br>+——+——+<br>| id   | num  |<br>+——+——+<br>| b    |    5 |<br>| c    |   15 |<br>| d    |   20 |<br>| e    |   99 |<br>+——+——+<br>4 rows in set (0.02 sec)</p><p>mysql&gt; select * from a union select * from b;<br>+——+——+<br>| id   | num  |<br>+——+——+<br>| a    |    5 |<br>| b    |   10 |<br>| c    |   15 |<br>| d    |   10 |<br>| b    |    5 |<br>| d    |   20 |<br>| e    |   99 |<br>+——+——+<br>7 rows in set (0.00 sec)</p><p>mysql&gt; select * from a union all select * from b;<br>+——+——+<br>| id   | num  |<br>+——+——+<br>| a    |    5 |<br>| b    |   10 |<br>| c    |   15 |<br>| d    |   10 |<br>| b    |    5 |<br>| c    |   15 |<br>| d    |   20 |<br>| e    |   99 |<br>+——+——+<br>8 rows in set (0.00 sec)</p><p>mysql&gt; select * from a union all select * from b group by id;<br>+——+——+<br>| id   | num  |<br>+——+——+<br>| a    |    5 |<br>| b    |   10 |<br>| c    |   15 |<br>| d    |   10 |<br>| b    |    5 |<br>| c    |   15 |<br>| d    |   20 |<br>| e    |   99 |<br>+——+——+<br>8 rows in set (0.00 sec)</p><p>mysql&gt; select tem.id,sum(tem.num) from(select a.id,a.num from a union all select b.id,b.num from b) as tem group by tem.id ;<br>+——+————–+<br>| id   | sum(tem.num) |<br>+——+————–+<br>| a    |            5 |<br>| b    |           15 |<br>| c    |           30 |<br>| d    |           30 |<br>| e    |           99 |<br>+——+————–+<br>5 rows in set (0.00 sec)</p><p>mysql&gt; select a.* ,b.* from a left join b on a.id=b.id;<br>+——+——+——+——+<br>| id   | num  | id   | num  |<br>+——+——+——+——+<br>| b    |   10 | b    |    5 |<br>| c    |   15 | c    |   15 |<br>| d    |   10 | d    |   20 |<br>| a    |    5 | NULL | NULL |<br>+——+——+——+——+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select a.* ,b.* from a inner join b on a.id=b.id;<br>+——+——+——+——+<br>| id   | num  | id   | num  |<br>+——+——+——+——+<br>| b    |   10 | b    |    5 |<br>| c    |   15 | c    |   15 |<br>| d    |   10 | d    |   20 |<br>+——+——+——+——+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select a.* ,b.* from a left join b on a.id=b.id;<br>+——+——+——+——+<br>| id   | num  | id   | num  |<br>+——+——+——+——+<br>| b    |   10 | b    |    5 |<br>| c    |   15 | c    |   15 |<br>| d    |   10 | d    |   20 |<br>| a    |    5 | NULL | NULL |<br>+——+——+——+——+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; select a.* ,b.* from a left join b on a.id=b.id union select a.* ,b.* from a right join b on a.id=b.id;<br>+——+——+——+——+<br>| id   | num  | id   | num  |<br>+——+——+——+——+<br>| b    |   10 | b    |    5 |<br>| c    |   15 | c    |   15 |<br>| d    |   10 | d    |   20 |<br>| a    |    5 | NULL | NULL |<br>| NULL | NULL | e    |   99 |<br>+——+——+——+——+<br>5 rows in set (0.00 sec)</p><p>mysql&gt; #先左联再u右连然后子查询;<br>mysql&gt;<br>mysql&gt; #函数<br>mysql&gt; #取出第四个栏目的商品及打88折的会员价<br>mysql&gt; select goods_id,cat_id,good_name,shop_price<em>0.88 from goods where cat_id=4<br>    -&gt; ;<br>ERROR 1054 (42S22): Unknown column ‘good_name’ in ‘field list’<br>mysql&gt; select goods_id,cat_id,goods_name,shop_price</em>0.88 from goods where cat_id=4<br>    -&gt; ;<br>+———-+——–+—————–+—————–+<br>| goods_id | cat_id | goods_name      | shop_price*0.88 |<br>+———-+——–+—————–+—————–+<br>|        1 |      4 | kd876           |       1221.4400 |<br>|       14 |      4 | 诺基亚5800xm    |       2310.0000 |<br>|       18 |      4 | 夏新t5          |       2532.6400 |<br>+———-+——–+—————–+—————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select goods_id,cat_id,goods_name,floor(shop_price<em>0.88) from goods where cat_id=4 ;<br>+———-+——–+—————–+————————+<br>| goods_id | cat_id | goods_name      | floor(shop_price</em>0.88) |<br>+———-+——–+—————–+————————+<br>|        1 |      4 | kd876           |                   1221 |<br>|       14 |      4 | 诺基亚5800xm    |                   2310 |<br>|       18 |      4 | 夏新t5          |                   2532 |<br>+———-+——–+—————–+————————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #随机生成5-15之间的数字;</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  7 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                 13 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  8 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  9 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  8 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  5 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                  8 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select floor(rand()<em>10+5);<br>+——————–+<br>| floor(rand()</em>10+5) |<br>+——————–+<br>|                 11 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #ceiling 向上取整<br>mysql&gt; #group concat 取出4栏目下goods_id拼接<br>mysql&gt; select group_concat(goods_id) from goods where cat_id=4;<br>+————————+<br>| group_concat(goods_id) |<br>+————————+<br>| 1,14,18                |<br>+————————+<br>1 row in set (0.08 sec)</p><p>mysql&gt; #计算字符的ascil码<br>mysql&gt; select ascil(a);<br>ERROR 1305 (42000): FUNCTION test01.ascil does not exist<br>mysql&gt; select ascii(a);<br>ERROR 1054 (42S22): Unknown column ‘a’ in ‘field list’<br>mysql&gt; select ascii(‘a’);<br>+————+<br>| ascii(‘a’) |<br>+————+<br>|         97 |<br>+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select length(“中华”);<br>+——————+<br>| length(“中华”)   |<br>+——————+<br>|                6 |<br>+——————+<br>1 row in set (0.06 sec)</p><p>mysql&gt; #length 计算的字节场地<br>mysql&gt; #length 计算的字符数<br>mysql&gt; #char_length 计算的字符数<br>mysql&gt; select char_length(‘中国’);<br>+———————–+<br>| char_length(‘中国’)   |<br>+———————–+<br>|                     2 |<br>+———————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #反转字符串<br>mysql&gt; select reverse(‘zh’)<br>    -&gt; ;<br>+—————+<br>| reverse(‘zh’) |<br>+—————+<br>| hz            |<br>+—————+<br>1 row in set (0.05 sec)</p><p>mysql&gt; select reverse(‘zh中国’);<br>+———————+<br>| reverse(‘zh中国’)   |<br>+———————+<br>| 国中hz              |<br>+———————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #position<br>mysql&gt; select position(‘@’ in ‘abc@sina.com’);<br>+———————————+<br>| position(‘@’ in ‘abc@sina.com’) |<br>+———————————+<br>|                               4 |<br>+———————————+<br>1 row in set (0.05 sec)</p><p>mysql&gt; select right(‘abc@sina.com’ ,2);<br>+————————–+<br>| right(‘abc@sina.com’ ,2) |<br>+————————–+<br>| om                       |<br>+————————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #某网站有email字段,有邮件地址,想调查163.qq.com的u邮箱的比例<br>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| girl             |<br>| goods            |<br>| m                |<br>| mian             |<br>| result           |<br>| t                |<br>| user             |<br>+——————+<br>11 rows in set (0.01 sec)</p><p>mysql&gt; #查询邮箱后缀,<br>mysql&gt; create table email(uname char,email char);<br>Query OK, 0 rows affected (1.76 sec)</p><p>mysql&gt; desc email;<br>+——-+———+——+—–+———+——-+<br>| Field | Type    | Null | Key | Default | Extra |<br>+——-+———+——+—–+———+——-+<br>| uname | char(1) | YES  |     | NULL    |       |<br>| email | char(1) | YES  |     | NULL    |       |<br>+——-+———+——+—–+———+——-+<br>2 rows in set (0.09 sec)</p><p>mysql&gt; alter table email modify column uname char(50) ;<br>Query OK, 0 rows affected (1.96 sec)<br>Records: 0  Duplicates: 0  Warnings: 0</p><p>mysql&gt; alter table email modify column email char(50) ;<br>Query OK, 0 rows affected (1.34 sec)<br>Records: 0  Duplicates: 0  Warnings: 0</p><p>mysql&gt; desc eamil;<br>ERROR 1146 (42S02): Table ‘test01.eamil’ doesn’t exist<br>mysql&gt; desc email;<br>+——-+———-+——+—–+———+——-+<br>| Field | Type     | Null | Key | Default | Extra |<br>+——-+———-+——+—–+———+——-+<br>| uname | char(50) | YES  |     | NULL    |       |<br>| email | char(50) | YES  |     | NULL    |       |<br>+——-+———-+——+—–+———+——-+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; insert into email values(‘zhangsan’,‘zhan@163.com’),(‘lilie’,‘li@qq.com’),(‘hanmeimei’,‘han@126.com’);<br>Query OK, 3 rows affected (0.28 sec)<br>Records: 3  Duplicates: 0  Warnings: 0</p><p>mysql&gt; select * from email;<br>+———–+————–+<br>| uname     | email        |<br>+———–+————–+<br>| zhangsan  | <a href="mailto:zhan@163.com">zhan@163.com</a> |<br>| lilie     | <a href="mailto:li@qq.com">li@qq.com</a>    |<br>| hanmeimei | <a href="mailto:han@126.com">han@126.com</a>  |<br>+———–+————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select uname ,position(‘@’ in email) from email;<br>+———–+————————+<br>| uname     | position(‘@’ in email) |<br>+———–+————————+<br>| zhangsan  |                      5 |<br>| lilie     |                      3 |<br>| hanmeimei |                      4 |<br>+———–+————————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select uname ,right(email,position(‘@’ in email)) from email;<br>+———–+————————————-+<br>| uname     | right(email,position(‘@’ in email)) |<br>+———–+————————————-+<br>| zhangsan  | 3.com                               |<br>| lilie     | com                                 |<br>| hanmeimei | .com                                |<br>+———–+————————————-+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select uname ,right(email,char_length(email)-position(‘@’ in email)) from email;<br>+———–+——————————————————–+<br>| uname     | right(email,char_length(email)-position(‘@’ in email)) |<br>+———–+——————————————————–+<br>| zhangsan  | 163.com                                                |<br>| lilie     | qq.com                                                 |<br>| hanmeimei | 126.com                                                |<br>+———–+——————————————————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select uname ,right(email,length(email)-position(‘@’ in email)) from email;<br>+———–+—————————————————+<br>| uname     | right(email,length(email)-position(‘@’ in email)) |<br>+———–+—————————————————+<br>| zhangsan  | 163.com                                           |<br>| lilie     | qq.com                                            |<br>| hanmeimei | 126.com                                           |<br>+———–+—————————————————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #截取邮箱<br>mysql&gt; #截取邮箱后半部分;<br>mysql&gt; select uname ,right(email,length(email)-position(‘@’ in email)) from email;<br>+———–+—————————————————+<br>| uname     | right(email,length(email)-position(‘@’ in email)) |<br>+———–+—————————————————+<br>| zhangsan  | 163.com                                           |<br>| lilie     | qq.com                                            |<br>| hanmeimei | 126.com                                           |<br>+———–+—————————————————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #日期时间函数,取当前时间<br>mysql&gt; select now;<br>ERROR 1054 (42S22): Unknown column ‘now’ in ‘field list’<br>mysql&gt; select now();<br>+———————+<br>| now()               |<br>+———————+<br>| 2019-10-15 20:00:44 |<br>+———————+<br>1 row in set (0.05 sec)</p><p>mysql&gt; select curdate();<br>+————+<br>| curdate()  |<br>+————+<br>| 2019-10-15 |<br>+————+<br>1 row in set (0.01 sec)</p><p>mysql&gt; # now()返回datetime格式,curdate返回date格式<br>mysql&gt; select curtime();<br>+———–+<br>| curtime() |<br>+———–+<br>| 20:02:19  |<br>+———–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #查看某一日是那一周的第几天<br>mysql&gt; select dayofweek(‘2019-10-15’);<br>+————————-+<br>| dayofweek(‘2019-10-15’) |<br>+————————-+<br>|                       3 |<br>+————————-+<br>1 row in set (0.05 sec)</p><p>mysql&gt; select week(‘2019-10-15’);<br>+——————–+<br>| week(‘2019-10-15’) |<br>+——————–+<br>|                 41 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select week(‘2019-12-30’);<br>+——————–+<br>| week(‘2019-12-30’) |<br>+——————–+<br>|                 52 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select week(curdate());<br>+—————–+<br>| week(curdate()) |<br>+—————–+<br>|              41 |<br>+—————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select week(‘2019-12-31’);<br>+——————–+<br>| week(‘2019-12-31’) |<br>+——————–+<br>|                 52 |<br>+——————–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #案例:name<br>mysql&gt; # overtime 日期<br>mysql&gt; # 5        2019-9-1<br>mysql&gt; # 6        2019-9-2<br>mysql&gt; # 3        2019-9-3<br>mysql&gt; # 报表统计,按星期统计加班时间<br>mysql&gt; create table jiaban(num int(10) ,time date);<br>Query OK, 0 rows affected (0.52 sec)</p><p>mysql&gt; insert into jiaban values(3,”2019-9-1”),(4,’2019-9-2’),(5,”2019-9-3”),(6,’2019-9-10’),(19,’2019-9-18’);<br>Query OK, 5 rows affected (0.15 sec)<br>Records: 5  Duplicates: 0  Warnings: 0</p><p>mysql&gt; select * from jiaban;<br>+——+————+<br>| num  | time       |<br>+——+————+<br>|    3 | 2019-09-01 |<br>|    4 | 2019-09-02 |<br>|    5 | 2019-09-03 |<br>|    6 | 2019-09-10 |<br>|   19 | 2019-09-18 |<br>+——+————+<br>5 rows in set (0.00 sec)</p><p>mysql&gt; #按星期统计加班时间;<br>mysql&gt; select sum(num), week(time) from jiaban ;<br>+———-+————+<br>| sum(num) | week(time) |<br>+———-+————+<br>|       37 |         35 |<br>+———-+————+<br>1 row in set (0.02 sec)</p><p>mysql&gt; select sum(num), week(time) from jiaban group by week(time);<br>+———-+————+<br>| sum(num) | week(time) |<br>+———-+————+<br>|       12 |         35 |<br>|        6 |         36 |<br>|       19 |         37 |<br>+———-+————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select num, week(time) from jiaban group by week(time);<br>+——+————+<br>| num  | week(time) |<br>+——+————+<br>|    3 |         35 |<br>|    6 |         36 |<br>|   19 |         37 |<br>+——+————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select sum(num), week(time) from jiaban group by week(time);<br>+———-+————+<br>| sum(num) | week(time) |<br>+———-+————+<br>|       12 |         35 |<br>|        6 |         36 |<br>|       19 |         37 |<br>+———-+————+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select *, week(time) from jiaban;<br>+——+————+————+<br>| num  | time       | week(time) |<br>+——+————+————+<br>|    3 | 2019-09-01 |         35 |<br>|    4 | 2019-09-02 |         35 |<br>|    5 | 2019-09-03 |         35 |<br>|    6 | 2019-09-10 |         36 |<br>|   19 | 2019-09-18 |         37 |<br>+——+————+————+<br>5 rows in set (0.00 sec)</p><p>mysql&gt; #加密函数,码得<br>mysql&gt; #md5加密函数;<br>mysql&gt; select md5(‘1’);<br>+———————————-+<br>| md5(‘1’)                         |<br>+———————————-+<br>| c4ca4238a0b923820dcc509a6f75849b |<br>+———————————-+<br>1 row in set (0.07 sec)</p><p>mysql&gt; select md5(‘1’);<br>+———————————-+<br>| md5(‘1’)                         |<br>+———————————-+<br>| c4ca4238a0b923820dcc509a6f75849b |<br>+———————————-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #md5是不可逆的<br>mysql&gt; #流程h控制函数<br>mysql&gt; #case 变量<br>mysql&gt; 2 when 值 then 语句；<br>    -&gt; 3 when 值 then 语句；<br>    -&gt; 4 else 语句；<br>    -&gt; 5 end case；<br>    -&gt; \c<br>mysql&gt; #if(gender=0,’优先’,’等待’) as vip<br>mysql&gt; ifnull<br>    -&gt; \c<br>mysql&gt; #ifnull的用法,判断第一个表达式是否为null 如果为null 返回第2 个表达式的值<br>mysql&gt; #如果不为null 返回自身,即表达式1<br>mysql&gt; select ifnull(‘’,a);<br>ERROR 1054 (42S22): Unknown column ‘a’ in ‘field list’<br>mysql&gt; select ifnull(‘’,’a’);<br>+—————-+<br>| ifnull(‘’,’a’) |<br>+—————-+<br>|                |<br>+—————-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select ifnull(null,’a’);<br>+——————+<br>| ifnull(null,’a’) |<br>+——————+<br>| a                |<br>+——————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #系统调试函数<br>mysql&gt;<br>mysql&gt;<br>mysql&gt; select user();<br>+—————-+<br>| user()         |<br>+—————-+<br>| root@localhost |<br>+—————-+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #user返回用户及主机,判断自己的身份<br>mysql&gt; #database(),返回当前操作的数据库名<br>mysql&gt; select database();<br>+————+<br>| database() |<br>+————+<br>| test01     |<br>+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; select version();<br>+———–+<br>| version() |<br>+———–+<br>| 8.0.12    |<br>+———–+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #vension() 返回数据库的版本<br>mysql&gt; #时间的h格式化,优先在业务逻辑上使用,<br>mysql&gt; #总结: where 条件中,对某列使用了函数,由此列的索引不发挥作用<br>mysql&gt; #视图 view<br>mysql&gt; view 将查询表当作临时表使用,<br>    -&gt; \c<br>mysql&gt; # 查询每个栏目下商品的平均价格,并对平均价格取前三的栏目<br>mysql&gt; select cat_id,avg(shop_price),count(goods_id) from goods group by cat_id;<br>+——–+—————–+—————–+<br>| cat_id | avg(shop_price) | count(goods_id) |<br>+——–+—————–+—————–+<br>|      4 |     2297.000000 |               3 |<br>|      8 |       75.333333 |               3 |<br>|     11 |       31.000000 |               2 |<br>|      3 |     1746.066667 |              15 |<br>|      2 |      823.330000 |               1 |<br>|      5 |     3700.000000 |               1 |<br>|     13 |       33.500000 |               2 |<br>|     15 |       70.000000 |               2 |<br>|     14 |       54.000000 |               2 |<br>+——–+—————–+—————–+<br>9 rows in set (0.10 sec)</p><p>mysql&gt; select cat_id,avg(shop_price) as average,count(goods_id) from goods group by cat_id order by average desc limit 3 ;<br>+——–+————-+—————–+<br>| cat_id | average     | count(goods_id) |<br>+——–+————-+—————–+<br>|      5 | 3700.000000 |               1 |<br>|      4 | 2297.000000 |               3 |<br>|      3 | 1746.066667 |              15 |<br>+——–+————-+—————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,avg(shop_price) as average,count(goods_id) from goods group by cat_id order by average asc limit 3 ;<br>+——–+———–+—————–+<br>| cat_id | average   | count(goods_id) |<br>+——–+———–+—————–+<br>|     11 | 31.000000 |               2 |<br>|     13 | 33.500000 |               2 |<br>|     14 | 54.000000 |               2 |<br>+——–+———–+—————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #取平均价格由高到底第三到第5的栏目<br>mysql&gt; select cat_id,avg(shop_price) as average,count(goods_id) from goods group by cat_id order by average asc  ;<br>+——–+————-+—————–+<br>| cat_id | average     | count(goods_id) |<br>+——–+————-+—————–+<br>|     11 |   31.000000 |               2 |<br>|     13 |   33.500000 |               2 |<br>|     14 |   54.000000 |               2 |<br>|     15 |   70.000000 |               2 |<br>|      8 |   75.333333 |               3 |<br>|      2 |  823.330000 |               1 |<br>|      3 | 1746.066667 |              15 |<br>|      4 | 2297.000000 |               3 |<br>|      5 | 3700.000000 |               1 |<br>+——–+————-+—————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; select cat_id,avg(shop_price) as average,count(goods_id) from goods group by cat_id;<br>+——–+————-+—————–+<br>| cat_id | average     | count(goods_id) |<br>+——–+————-+—————–+<br>|      4 | 2297.000000 |               3 |<br>|      8 |   75.333333 |               3 |<br>|     11 |   31.000000 |               2 |<br>|      3 | 1746.066667 |              15 |<br>|      2 |  823.330000 |               1 |<br>|      5 | 3700.000000 |               1 |<br>|     13 |   33.500000 |               2 |<br>|     15 |   70.000000 |               2 |<br>|     14 |   54.000000 |               2 |<br>+——–+————-+—————–+<br>9 rows in set (0.00 sec)</p><p>mysql&gt; # 将结果集设为a  a频繁用到,因此用到视图<br>mysql&gt; # 表通过某种运算得到的影子<br>mysql&gt; #如何创建视图,建视图的时候语法 create view 表名 as 查询语句;<br>mysql&gt; create view state as select cat_id,avg(shop_price) as average,count(goods_id) from goods group by cat_id;<br>Query OK, 0 rows affected (0.27 sec)</p><p>mysql&gt; show tables;<br>+——————+<br>| Tables_in_test01 |<br>+——————+<br>| a                |<br>| b                |<br>| boy              |<br>| category         |<br>| email            |<br>| girl             |<br>| goods            |<br>| jiaban           |<br>| m                |<br>| mian             |<br>| result           |<br>| state            |<br>| t                |<br>| user             |<br>+——————+<br>14 rows in set (0.01 sec)</p><p>mysql&gt; #多了一张state表<br>mysql&gt; select * from state;<br>+——–+————-+—————–+<br>| cat_id | average     | count(goods_id) |<br>+——–+————-+—————–+<br>|      4 | 2297.000000 |               3 |<br>|      8 |   75.333333 |               3 |<br>|     11 |   31.000000 |               2 |<br>|      3 | 1746.066667 |              15 |<br>|      2 |  823.330000 |               1 |<br>|      5 | 3700.000000 |               1 |<br>|     13 |   33.500000 |               2 |<br>|     15 |   70.000000 |               2 |<br>|     14 |   54.000000 |               2 |<br>+——–+————-+—————–+<br>9 rows in set (0.06 sec)</p><p>mysql&gt; select * from state order by average limit 3;<br>+——–+———–+—————–+<br>| cat_id | average   | count(goods_id) |<br>+——–+———–+—————–+<br>|     11 | 31.000000 |               2 |<br>|     13 | 33.500000 |               2 |<br>|     14 | 54.000000 |               2 |<br>+——–+———–+—————–+<br>3 rows in set (0.00 sec)</p><p>mysql&gt; #视图一旦创建完毕,可以完全当表使用,<br>mysql&gt; # 简化查询,复杂的统计,<br>mysql&gt; #更清晰的权限控制<br>mysql&gt; # 开放权限,但是不想开放密码字段,用视图<br>mysql&gt; # 多表查询,分表时候用,将表头放在视图中;<br>mysql&gt; #视图是表的影子,表与视图相互影响的关系<br>mysql&gt; #表的数据变化,影响视图的变化,<br>mysql&gt; #以此例,,此视图的数据不能更改,其数据来自shop_price的平均值<br>mysql&gt; #视图是否能够增删改呢?<br>mysql&gt; #某种情况下是可以删除的,11对应,即表的数据能够推出视图的数据,视图的数据能够推出表的数据<br>mysql&gt; #删除视图即 drop table/view 表名/视图名<br>mysql&gt; exit<br>mysql&gt; show databases;<br>+——————–+<br>| Database           |<br>+——————–+<br>| bookstore          |<br>| clouddb01          |<br>| clouddb02          |<br>| clouddb03          |<br>| information_schema |<br>| mydb               |<br>| mysql              |<br>| performance_schema |<br>| shop               |<br>| ssm_crud           |<br>| struts             |<br>| student            |<br>| sys                |<br>| test               |<br>| test01             |<br>+——————–+<br>15 rows in set (0.18 sec)</p><p>mysql&gt; use test01;<br>Database changed<br>mysql&gt; #algorithm<br>mysql&gt; # merge —合并查询语句<br>mysql&gt; #tem<br>mysql&gt; #temptable —临时表<br>mysql&gt; #undefined –未定义,由系统判断<br>mysql&gt; #建一张简单的查询视图,不同临时表,只用y条件合并<br>mysql&gt; create view as select * from goods where shop_price&gt;300;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘as select * from goods where shop_price&gt;300’ at line 1<br>mysql&gt; create view v1  as  select * from goods where shop_price&gt;300;<br>Query OK, 0 rows affected (0.52 sec)</p><p>mysql&gt; #查询视图<br>mysql&gt; select goods_id ,goods_name ,shop_price from v1 where shop_price&lt;500;<br>+———-+—————+————+<br>| goods_id | goods_name    | shop_price |<br>+———-+—————+————+<br>|        8 | 飞利浦9@9v    |     399.00 |<br>+———-+—————+————+<br>1 row in set (0.01 sec)</p><p>mysql&gt; #总的条件是&gt;300 &lt;500;<br>mysql&gt; #这个简单的查询还建立临时表的话,开销有点大;<br>mysql&gt; #这是我们可以指定algorithm为merge<br>mysql&gt; create algorithm=merge view v2 as select * from goods where shop_price&gt;300;<br>Query OK, 0 rows affected (0.21 sec)</p><p>mysql&gt; select goods_id ,goods_name ,shop_price from v2 where shop_price&lt;500;<br>+———-+—————+————+<br>| goods_id | goods_name    | shop_price |<br>+———-+—————+————+<br>|        8 | 飞利浦9@9v    |     399.00 |<br>+———-+—————+————+<br>1 row in set (0.00 sec)</p><p>mysql&gt; #有的时候必须建临时表,<br>mysql&gt; #比如,每个栏目的平均商品价格<br>mysql&gt; #比如每个栏目下的最高d价格的商品<br>mysql&gt; create algorithm=temptable view v3 as select goods_id,cat_id,goods_name from goods order by cat_id asc ,goods_id desc;<br>Query OK, 0 rows affected (0.21 sec)</p><p>mysql&gt; select * from v3 group by cat_id;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       18 |      4 | 夏新t5                                 |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       28 |     15 | 联通50元充值卡                         |<br>+———-+——–+—————————————-+<br>9 rows in set (0.05 sec)</p><p>mysql&gt; select * from v3;<br>+———-+——–+—————————————-+<br>| goods_id | cat_id | goods_name                             |<br>+———-+——–+—————————————-+<br>|       16 |      2 | 恒基伟业g101                           |<br>|       32 |      3 | 诺基亚n85                              |<br>|       31 |      3 | 摩托罗拉e8                             |<br>|       24 |      3 | p806                                   |<br>|       22 |      3 | 多普达touch hd                         |<br>|       21 |      3 | 金立 a30                               |<br>|       20 |      3 | 三星bc01                               |<br>|       19 |      3 | 三星sgh-f258                           |<br>|       17 |      3 | 夏新n7                                 |<br>|       15 |      3 | 摩托罗拉a810                           |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |<br>|       12 |      3 | 摩托罗拉a810                           |<br>|       11 |      3 | 索爱c702c                              |<br>|       10 |      3 | 索爱c702c                              |<br>|        9 |      3 | 诺基亚e66                              |<br>|        8 |      3 | 飞利浦9@9v                             |<br>|       18 |      4 | 夏新t5                                 |<br>|       14 |      4 | 诺基亚5800xm                           |<br>|        1 |      4 | kd876                                  |<br>|       23 |      5 | 诺基亚n96                              |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |<br>|        4 |      8 | 诺基亚n85原装充电器                    |<br>|        3 |      8 | 诺基亚原装5800耳机                     |<br>|        6 |     11 | 胜创kingmax内存卡                      |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |<br>|       30 |     14 | 移动20元充值卡                         |<br>|       29 |     14 | 移动100元充值卡                        |<br>|       28 |     15 | 联通50元充值卡                         |<br>|       27 |     15 | 联通100元充值卡                        |<br>+———-+——–+—————————————-+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; drop view v3;<br>Query OK, 0 rows affected (0.27 sec)</p><p>mysql&gt; create algorithm=temptable view v3 as select goods_id,cat_id,goods_name,shop_price from goods order by cat_id asc ,shop_price desc;<br>Query OK, 0 rows affected (0.31 sec)</p><p>mysql&gt; slect * form v3 ;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘slect * form v3’ at line 1<br>mysql&gt; select * form v3 ;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘form v3’ at line 1<br>mysql&gt; select * from v3 ;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       32 |      3 | 诺基亚n85                              |    3010.00 |<br>|       17 |      3 | 夏新n7                                 |    2300.00 |<br>|        9 |      3 | 诺基亚e66                              |    2298.00 |<br>|       21 |      3 | 金立 a30                               |    2000.00 |<br>|       24 |      3 | p806                                   |    2000.00 |<br>|       31 |      3 | 摩托罗拉e8                             |    1337.00 |<br>|       10 |      3 | 索爱c702c                              |    1328.00 |<br>|       13 |      3 | 诺基亚5320 xpressmusic                 |    1311.00 |<br>|       11 |      3 | 索爱c702c                              |    1300.00 |<br>|       12 |      3 | 摩托罗拉a810                           |     983.00 |<br>|       19 |      3 | 三星sgh-f258                           |     858.00 |<br>|       15 |      3 | 摩托罗拉a810                           |     788.00 |<br>|        8 |      3 | 飞利浦9@9v                             |     399.00 |<br>|       20 |      3 | 三星bc01                               |     280.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       14 |      4 | 诺基亚5800xm                           |    2625.00 |<br>|        1 |      4 | kd876                                  |    1388.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        3 |      8 | 诺基亚原装5800耳机                     |      68.00 |<br>|        4 |      8 | 诺基亚n85原装充电器                    |      58.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|        5 |     11 | 索爱原装m2卡读卡器                     |      20.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       26 |     13 | 小灵通/固话20元充值卡                  |      19.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       30 |     14 | 移动20元充值卡                         |      18.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>|       28 |     15 | 联通50元充值卡                         |      45.00 |<br>+———-+——–+—————————————-+————+<br>31 rows in set (0.00 sec)</p><p>mysql&gt; select * from v3 group by cat_id;<br>+———-+——–+—————————————-+————+<br>| goods_id | cat_id | goods_name                             | shop_price |<br>+———-+——–+—————————————-+————+<br>|       16 |      2 | 恒基伟业g101                           |     823.33 |<br>|       22 |      3 | 多普达touch hd                         |    5999.00 |<br>|       18 |      4 | 夏新t5                                 |    2878.00 |<br>|       23 |      5 | 诺基亚n96                              |    3700.00 |<br>|        7 |      8 | 诺基亚n85原装立体声耳机hs-82           |     100.00 |<br>|        6 |     11 | 胜创kingmax内存卡                      |      42.00 |<br>|       25 |     13 | 小灵通/固话50元充值卡                  |      48.00 |<br>|       29 |     14 | 移动100元充值卡                        |      90.00 |<br>|       27 |     15 | 联通100元充值卡                        |      95.00 |<br>+———-+——–+—————————————-+————+<br>9 rows in set (0.03 sec)</p><p>mysql&gt; #编码问题<br>mysql&gt; #字符编码到字符集的映射<br>mysql&gt; #gb2312,utf-8<br>mysql&gt; #unicode 码表,—– utf-8 压缩文件的关系<br>mysql&gt; #如何截取utf-8无乱码<br>mysql&gt; #从头开始,取1个字节,<br>mysql&gt; #通过位运算,计算连续的1的g个数<br>mysql&gt; #如为0 截取1个<br>mysql&gt; #如为n 则截取n个<br>mysql&gt; gbk转为utf-8<br>    -&gt; \c<br>mysql&gt; #jbk<br>mysql&gt; #jbk 转unicode 在转utf-8<br>mysql&gt; #乱码是怎么形成,编码和解码不统一<br>mysql&gt; #转码过程字节丢失<br>mysql&gt; create table t(id int ,name varchar(50) not null default(“1244”));<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘(“1244”))’ at line 1<br>mysql&gt; create table t(id int ,name varchar(50) not null default(1244));<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘(1244))’ at line 1<br>mysql&gt; create table t(id int ,name varchar(50) not null default ‘1244’);<br>ERROR 1050 (42S01): Table ‘t’ already exists<br>mysql&gt; create table tem(id int ,time datetime not null default now() );;<br>Query OK, 0 rows affected (0.95 sec)</p><p>ERROR:<br>No query specified</p><p>mysql&gt; desc time;<br>ERROR 1146 (42S02): Table ‘test01.time’ doesn’t exist<br>mysql&gt; desc tem;<br>+——-+———-+——+—–+——————-+——-+<br>| Field | Type     | Null | Key | Default           | Extra |<br>+——-+———-+——+—–+——————-+——-+<br>| id    | int(11)  | YES  |     | NULL              |       |<br>| time  | datetime | NO   |     | CURRENT_TIMESTAMP |       |<br>+——-+———-+——+—–+——————-+——-+<br>2 rows in set (0.13 sec)</p><p>mysql&gt; drop tem;<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘tem’ at line 1<br>mysql&gt; drop table tem;<br>Query OK, 0 rows affected (0.49 sec)</p><p>mysql&gt; create table tem(id int(11) not null primary key ,name varchar(50) not null ,time datetime not null default now());<br>Query OK, 0 rows affected (0.39 sec)</p><p>mysql&gt; insert into tem values(1,”lili”),(2,”韩梅梅”),(3,”笑话”),(4,”哈哈”);<br>ERROR 1136 (21S01): Column count doesn’t match value count at row 1<br>mysql&gt; insert into tem values(1,”lili”,null),(2,”韩梅梅”,null),(3,”笑话”,null),(4,”哈哈”,null);<br>ERROR 1048 (23000): Column ‘time’ cannot be null<br>mysql&gt; insert into tem(id,name) values(1,”lili”),(2,”韩梅梅”),(3,”笑话”),(4,”哈哈”);<br>Query OK, 4 rows affected (0.20 sec)<br>Records: 4  Duplicates: 0  Warnings: 0</p><p>mysql&gt; select * from tem;<br>+—-+———–+———————+<br>| id | name      | time                |<br>+—-+———–+———————+<br>|  1 | lili      | 2019-10-16 19:45:54 |<br>|  2 | 韩梅梅    | 2019-10-16 19:45:54 |<br>|  3 | 笑话      | 2019-10-16 19:45:54 |<br>|  4 | 哈哈      | 2019-10-16 19:45:54 |<br>+—-+———–+———————+<br>4 rows in set (0.00 sec)</p><p>mysql&gt; delete from tem order by id desc limit 2;<br>Query OK, 2 rows affected (0.33 sec)</p><p>mysql&gt; select * from tem;<br>+—-+———–+———————+<br>| id | name      | time                |<br>+—-+———–+———————+<br>|  1 | lili      | 2019-10-16 19:45:54 |<br>|  2 | 韩梅梅    | 2019-10-16 19:45:54 |<br>+—-+———–+———————+<br>2 rows in set (0.00 sec)</p><p>mysql&gt; select *,week(time) from tem;<br>+—-+———–+———————+————+<br>| id | name      | time                | week(time) |<br>+—-+———–+———————+————+<br>|  1 | lili      | 2019-10-16 19:45:54 |         41 |<br>|  2 | 韩梅梅    | 2019-10-16 19:45:54 |         41 |<br>+—-+———–+———————+————+<br>2 rows in set (0.01 sec)</p><p>mysql&gt; #设置client 和connection的字符集<br>mysql&gt; # set character_set_client=gbk;<br>mysql&gt; # set character_set_connection=utf8<br>mysql&gt; # set character_set_ressults=gbk;<br>mysql&gt; # set character_set_results=gbk;<br>mysql&gt; # 1366 字符编码问题<br>mysql&gt; 大转小会丢失<br>    -&gt; \c<br>mysql&gt; #即 server&gt; connection&gt; client 编码范围<br>mysql&gt; #client con results 都是hgbk<br>mysql&gt; #client con results 都是gbk<br>mysql&gt; #若三者都是gbk 则可以简写<br>mysql&gt; # 即 set names gbk<br>mysql&gt; #utf8中文截取无乱码<br>mysql&gt; #存储引擎,<br>mysql&gt; # innodb myisam  innodb支持事务,<br>mysql&gt;<br>mysql&gt; #start transaction;<br>mysql&gt; commit;<br>Query OK, 0 rows affected (0.00 sec)</p><p>mysql&gt; #commit;<br>mysql&gt; #rollback;<br>mysql&gt; exit</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;mysql查询基本知识-通过记录log的方式记录知识点&quot;&gt;&lt;a href=&quot;#mysql查询基本知识-通过记录log的方式记录知识点&quot; class=&quot;headerlink&quot; title=&quot;mysql查询基本知识,通过记录log的方式记录知识点&quot;&gt;&lt;/a&gt;mysql查询基本知识,通过记录log的方式记录知识点&lt;/h2&gt;&lt;p&gt;作者: philxling&lt;/p&gt;
&lt;p&gt;mysql&amp;gt; select goods_name,goods_id, concat(“HTC”,substring(goods_name,4)) as name from goods where goods_name like “诺基亚%”;&lt;/p&gt;
    
    </summary>
    
    
      <category term="mysql" scheme="http://philxling.cn/categories/mysql/"/>
    
    
  </entry>
  
  <entry>
    <title>Hexo搭建博客</title>
    <link href="http://philxling.cn/2020/03/01/hello-world/"/>
    <id>http://philxling.cn/2020/03/01/hello-world/</id>
    <published>2020-03-01T04:09:32.000Z</published>
    <updated>2020-03-15T05:41:36.539Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="http://philxling.cn/categories/hexo/"/>
    
    
  </entry>
  
</feed>
